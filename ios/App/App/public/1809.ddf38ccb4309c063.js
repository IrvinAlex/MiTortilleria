"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1809,3405],{3405:(y,h,r)=>{r.r(h),r.d(h,{TermsComponent:()=>P});var g=r(467),e=r(4438),v=r(9417),n=r(7517),E=r(2723),f=r(7157),_=r(5933),F=r(177),C=r(8461);function b(p,s){if(1&p){const u=e.RV6();e.j41(0,"ion-item",3)(1,"ion-checkbox",4),e.mxI("ngModelChange",function(o){e.eBV(u);const i=e.XpG();return e.DH7(i.acceptedTerms,o)||(i.acceptedTerms=o),e.Njj(o)}),e.k0s(),e.j41(2,"ion-label"),e.EFF(3,"Acepto los T\xe9rminos y Condiciones"),e.k0s()()}if(2&p){const u=e.XpG();e.R7$(),e.R50("ngModel",u.acceptedTerms)}}function T(p,s){if(1&p){const u=e.RV6();e.j41(0,"div",5)(1,"ion-button",6),e.bIt("click",function(){e.eBV(u);const o=e.XpG();return e.Njj(o.acceptTerms())}),e.EFF(2," Aceptar y Continuar "),e.k0s()()}if(2&p){const u=e.XpG();e.R7$(),e.Y8G("disabled",!u.acceptedTerms)}}let P=(()=>{var p;class s{ngOnInit(){this.user=this.utilSvc.getFromLocalStorage("user"),this.terms=this.utilSvc.getFromLocalStorage("terms")||[]}constructor(t){this.navCtrl=t,this.acceptedTerms=!1,this.user={},this.terms=[],this.utilSvc=(0,e.WQX)(E.T),this.firebaseSvc=(0,e.WQX)(n.f),this.showTermsItem=!0,this.form=new v.gE({acepto:new v.MJ(!0)})}acceptTerms(){var t=this;return(0,g.A)(function*(){let o=`users/${t.user.uid}/terms`;const i=yield t.utilSvc.loading();yield i.present(),t.firebaseSvc.addDocument(o,t.form.value).then(function(){var a=(0,g.A)(function*(m){let l=t.firebaseSvc.obtenerColeccion(`users/${t.user.uid}/terms`).subscribe({next:c=>{t.utilSvc.saveInLocalStorage("terms",c),l.unsubscribe()}});t.utilSvc.dismissModal({success:!0}),t.utilSvc.presentToast({message:"Aceptaste los t\xe9rminos y condiciones",duration:1500,color:"primary",position:"middle",icon:"checkmark-circle-outline"})});return function(m){return a.apply(this,arguments)}}()).catch(a=>{t.utilSvc.presentToast({message:a.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{i.dismiss()})})()}}return(p=s).\u0275fac=function(t){return new(t||p)(e.rXU(f.q9))},p.\u0275cmp=e.VBU({type:p,selectors:[["app-terms"]],decls:27,vars:4,consts:[[3,"isModal","title"],["lines","none",4,"ngIf"],["class","button-container",4,"ngIf"],["lines","none"],["slot","start",3,"ngModelChange","ngModel"],[1,"button-container"],["color","primary","expand","block",3,"click","disabled"]],template:function(t,o){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content")(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title"),e.EFF(5,"Pol\xedtica de Uso"),e.k0s()(),e.j41(6,"ion-card-content")(7,"p"),e.EFF(8," Bienvenido a nuestra aplicaci\xf3n de la tortiller\xeda. Al utilizar esta aplicaci\xf3n, aceptas cumplir con los siguientes t\xe9rminos y condiciones. Por favor, l\xe9elos atentamente. "),e.k0s(),e.j41(9,"h2"),e.EFF(10,"1. Informaci\xf3n de la Cuenta"),e.k0s(),e.j41(11,"p"),e.EFF(12," Los usuarios deben proporcionar informaci\xf3n precisa y actualizada al registrarse en la aplicaci\xf3n. No compartiremos tus datos personales con terceros sin tu consentimiento. "),e.k0s(),e.j41(13,"h2"),e.EFF(14,"2. Uso de la Aplicaci\xf3n"),e.k0s(),e.j41(15,"p"),e.EFF(16," Esta aplicaci\xf3n est\xe1 dise\xf1ada para facilitar pedidos y gestionar tu experiencia con nuestra tortiller\xeda. Est\xe1 prohibido el uso inapropiado de la misma, tales como fraude o intento de acceso no autorizado a nuestros sistemas. "),e.k0s(),e.j41(17,"h2"),e.EFF(18,"3. Pol\xedtica de Pedidos"),e.k0s(),e.j41(19,"p"),e.EFF(20," Todos los pedidos realizados a trav\xe9s de la aplicaci\xf3n est\xe1n sujetos a disponibilidad. Nos reservamos el derecho de cancelar o modificar los pedidos seg\xfan disponibilidad. "),e.k0s(),e.j41(21,"h2"),e.EFF(22,"4. Cambios en los T\xe9rminos"),e.k0s(),e.j41(23,"p"),e.EFF(24," Nos reservamos el derecho de actualizar estos t\xe9rminos y condiciones en cualquier momento. Te notificaremos de los cambios a trav\xe9s de la aplicaci\xf3n. "),e.k0s(),e.DNE(25,b,4,1,"ion-item",1)(26,T,3,1,"div",2),e.k0s()()()),2&t&&(e.Y8G("isModal",!0)("title","T\xe9rminos y Condiciones"),e.R7$(25),e.Y8G("ngIf",0==o.terms.length),e.R7$(),e.Y8G("ngIf",0==o.terms.length))},dependencies:[F.bT,_.Jm,_.b_,_.I9,_.ME,_.tN,_.eY,_.W9,_.uz,_.he,_.hB,v.BC,v.vS,C.l],styles:["ion-card[_ngcontent-%COMP%]{margin:16px}.button-container[_ngcontent-%COMP%]{margin-top:20px}"]}),s})()},3125:(y,h,r)=>{r.d(h,{A:()=>p});var g=r(467),e=r(4438),v=r(2723),n=r(9417),E=r(7517),f=r(5933),_=r(177),F=r(8461);function C(s,u){if(1&s&&e.nrm(0,"img",14),2&s){const t=e.XpG();e.Y8G("src",null==t.form.value?null:t.form.value.image,e.B4B)}}function b(s,u){1&s&&e.nrm(0,"ion-icon",15)}function T(s,u){1&s&&(e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2,"Apellido Materno"),e.k0s(),e.nrm(3,"ion-input",16),e.k0s())}function P(s,u){1&s&&(e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2,"Apellido Paterno"),e.k0s(),e.nrm(3,"ion-input",17),e.k0s())}let p=(()=>{var s;class u{constructor(o){this.modalController=o,this.passwordVisible=!1,this.firebaseSvc=(0,e.WQX)(E.f),this.utilsSvc=(0,e.WQX)(v.T)}cerrarModal(){this.modalController.dismiss()}ngOnInit(){var o,i,a,m,d,l,c;this.form=new n.gE({uid:new n.MJ(""),name:new n.MJ(null===(o=this.userForm)||void 0===o?void 0:o.name,[n.k0.required,n.k0.minLength(3)]),mother_Last_Name:new n.MJ(null===(i=this.userForm)||void 0===i?void 0:i.mother_Last_Name),father_Last_Name:new n.MJ(null===(a=this.userForm)||void 0===a?void 0:a.father_Last_Name),email:new n.MJ(null===(m=this.userForm)||void 0===m?void 0:m.email,[n.k0.required,n.k0.email]),image:new n.MJ(null===(d=this.userForm)||void 0===d?void 0:d.image),negocio:new n.MJ(null===(l=this.userForm)||void 0===l?void 0:l.isBusiness)}),this.updateApellidoValidators(),null===(c=this.form.get("email"))||void 0===c||c.disable()}get isNegocio(){var o;return 3===this.userForm.type_profile&&(null===(o=this.form.get("negocio"))||void 0===o?void 0:o.value)}get headerTitle(){return!0===this.isNegocio?"Actualizar negocio":this.userForm?"Actualizar usuario":"Agregar usuario"}updateApellidoValidators(){var o,i,m,d,l,c;!0===this.isNegocio?(null===(m=this.form.get("mother_Last_Name"))||void 0===m||m.clearValidators(),null===(d=this.form.get("father_Last_Name"))||void 0===d||d.clearValidators()):(null===(l=this.form.get("mother_Last_Name"))||void 0===l||l.setValidators([n.k0.required]),null===(c=this.form.get("father_Last_Name"))||void 0===c||c.setValidators([n.k0.required])),null===(o=this.form.get("mother_Last_Name"))||void 0===o||o.updateValueAndValidity(),null===(i=this.form.get("father_Last_Name"))||void 0===i||i.updateValueAndValidity()}takePicture(){var o=this;return(0,g.A)(function*(){var i;const a=(yield o.utilsSvc.takePicture("Imagen del usuario")).dataUrl;null===(i=o.form.get("image"))||void 0===i||i.setValue(a)})()}submit(){var o=this;return(0,g.A)(function*(){o.form.valid&&(o.userForm?yield o.updateUser():console.log("Funcionalidad para crear usuario a\xfan no implementada."))})()}resetPassword(){var o=this;return(0,g.A)(function*(){var i,a;const m=(null===(i=o.userForm)||void 0===i?void 0:i.email)||(null===(a=o.form.get("email"))||void 0===a?void 0:a.value);if(!m)return void o.utilsSvc.presentToast({message:"No hay un correo v\xe1lido para enviar el enlace.",duration:2e3,color:"danger",position:"middle",icon:"alert-circle-outline"});const d=yield o.utilsSvc.loading();yield d.present(),o.firebaseSvc.sendRecoveryEmail(m).then(()=>{o.utilsSvc.presentToast({message:"Correo de restablecimiento enviado.",duration:1500,color:"primary",position:"middle",icon:"mail-outline"})}).catch(l=>{o.utilsSvc.presentToast({message:(null==l?void 0:l.message)||"No se pudo enviar el correo.",duration:2500,color:"danger",position:"middle",icon:"alert-circle-outline"})}).finally(()=>d.dismiss())})()}updateUser(){var o=this;return(0,g.A)(function*(){const i=yield o.utilsSvc.loading();yield i.present();try{var a;const l=`users/${o.userForm.uid}`;if((null===(a=o.form.get("image"))||void 0===a?void 0:a.value)!==o.userForm.image){var m,d;const M=`users/${Date.now()}`,k=yield o.firebaseSvc.uploadImage(M,null===(m=o.form.get("image"))||void 0===m?void 0:m.value);null===(d=o.form.get("image"))||void 0===d||d.setValue(k)}const c={...o.form.value};delete c.uid,delete c.password_Change,yield o.firebaseSvc.updateDocumet(l,c),o.utilsSvc.presentToast({message:"Usuario actualizado exitosamente",duration:1500,color:"success",position:"middle",icon:"checkmark-circle-outline"}),o.modalController.dismiss({success:!0,data:c})}catch(l){let c="Error al actualizar usuario.";"auth/weak-password"===l.code?c="La contrase\xf1a es demasiado d\xe9bil.":"auth/requires-recent-login"===l.code&&(c="Por favor, inicia sesi\xf3n nuevamente para actualizar tus credenciales."),o.utilsSvc.presentToast({message:c,duration:2500,color:"danger",position:"middle",icon:"alert-circle-outline"})}finally{i.dismiss()}})()}}return(s=u).\u0275fac=function(o){return new(o||s)(e.rXU(f.W3))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-update-profile"]],inputs:{userForm:"userForm"},decls:32,vars:9,consts:[[3,"isModal","title"],[1,"ion-padding","ion-text-center",3,"ngSubmit","formGroup"],[3,"src",4,"ngIf"],["style","width: 140px !important; height: 140px; margin: 0 auto; opacity: 30%;","name","person-circle-outline","class","empty-icon",4,"ngIf"],["size","small","shape","round",3,"click"],["position","floating"],["formControlName","name","required",""],[4,"ngIf"],["formControlName","email","type","email","required","",3,"value","disabled"],["lines","none",1,"ion-margin-top"],["mode","ios","fill","outline","color","primary",3,"click"],["slot","end","name","mail-outline"],["mode","ios","type","submit",1,"ion-margin",3,"disabled"],["slot","end","name","checkmark-circle-outline"],[3,"src"],["name","person-circle-outline",1,"empty-icon",2,"width","140px !important","height","140px","margin","0 auto","opacity","30%"],["formControlName","mother_Last_Name","required",""],["formControlName","father_Last_Name","required",""]],template:function(o,i){1&o&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content")(2,"form",1),e.bIt("ngSubmit",function(){return i.submit()}),e.j41(3,"ion-avatar"),e.DNE(4,C,1,1,"img",2)(5,b,1,0,"ion-icon",3),e.k0s(),e.nrm(6,"br"),e.j41(7,"ion-button",4),e.bIt("click",function(){return i.takePicture()}),e.EFF(8," Tomar/Seleccionar "),e.k0s(),e.nrm(9,"br"),e.j41(10,"ion-item")(11,"ion-label",5),e.EFF(12,"Nombre"),e.k0s(),e.nrm(13,"ion-input",6),e.k0s(),e.DNE(14,T,4,0,"ion-item",7)(15,P,4,0,"ion-item",7),e.j41(16,"ion-item")(17,"ion-label",5),e.EFF(18,"Correo Electr\xf3nico"),e.k0s(),e.nrm(19,"ion-input",8),e.k0s(),e.j41(20,"ion-item",9)(21,"ion-label")(22,"h2"),e.EFF(23,"Cambiar contrase\xf1a"),e.k0s(),e.j41(24,"p"),e.EFF(25,"Se enviar\xe1 un enlace de restablecimiento al correo registrado."),e.k0s()()(),e.j41(26,"ion-button",10),e.bIt("click",function(){return i.resetPassword()}),e.EFF(27," Enviar enlace de restablecimiento "),e.nrm(28,"ion-icon",11),e.k0s(),e.j41(29,"ion-button",12),e.EFF(30," Actualizar usuario "),e.nrm(31,"ion-icon",13),e.k0s()()()),2&o&&(e.Y8G("isModal",!0)("title",i.userForm?"Actualizar usuario":"Agregar usuario"),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(2),e.Y8G("ngIf",null==i.form.value?null:i.form.value.image),e.R7$(),e.Y8G("ngIf",!(null!=i.form.value&&i.form.value.image)),e.R7$(9),e.Y8G("ngIf",!i.isNegocio),e.R7$(),e.Y8G("ngIf",!i.isNegocio),e.R7$(4),e.Y8G("value",i.form.value.email),e.R7$(10),e.Y8G("disabled",i.form.invalid))},dependencies:[_.bT,f.mC,f.Jm,f.W9,f.iq,f.$w,f.uz,f.he,f.Gw,n.qT,n.BC,n.cb,n.YS,n.j4,n.JD,F.l],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding:1.5rem;background-color:#f9f9f9}.form-wrapper[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:2rem;width:100%;max-width:400px;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column;align-items:center}.custom-item[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}.custom-label[_ngcontent-%COMP%]{font-size:1.2rem;color:#029032;font-weight:700;margin-bottom:.5rem}.custom-input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #cccccc;border-radius:8px;background-color:#f9f9f9;font-size:1rem;color:#333;box-sizing:border-box}.custom-input[_ngcontent-%COMP%]:focus{border:1px solid #029032;outline:none}.custom-button[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#fff;padding:.8rem 2rem;border-radius:8px;background-color:#029032;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;width:100%;text-align:center}.custom-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #0000001a}.image-icon[_ngcontent-%COMP%]{font-size:100px;opacity:30%}ion-avatar[_ngcontent-%COMP%]{width:200px;height:160px;--border-radius: 15px;margin:0 auto}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px}']}),u})()}}]);