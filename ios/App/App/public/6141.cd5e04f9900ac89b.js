"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6141],{6141:(ne,M,c)=>{c.d(M,{L:()=>ee});var p=c(467),l=c(9969),e=c(4438),y=c(7517),P=c(2723),k=c(1876),x=c(7157),d=c(5933),f=c(177),F=c(8461);const O=["sliderButton"],w=["mapContainer"],b=i=>[i,"MXN","symbol-narrow","1.2-2","en-US"];function D(i,a){if(1&i&&(e.j41(0,"div",21)(1,"p"),e.nrm(2,"ion-icon",9),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("name",t.isBusinessPickup()?"time-outline":"truck-outline")("color",t.getDeliveryTypeColor()),e.R7$(),e.Lme(" ",t.getScheduledLabel(),": ",e.i5U(4,4,t.getScheduledDate(),"dd/MM/yyyy HH:mm")," ")}}function I(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(e.brH(2,1,t.getScheduledDate(),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES"))}}function T(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Por definir"),e.k0s())}function $(i,a){1&i&&(e.j41(0,"p"),e.nrm(1,"ion-icon",28),e.EFF(2," Pago en efectivo al recoger."),e.k0s())}function R(i,a){if(1&i&&(e.j41(0,"div",4)(1,"h3",13),e.nrm(2,"ion-icon",22),e.EFF(3," Informaci\xf3n de Recolecci\xf3n en Negocio "),e.k0s(),e.j41(4,"div",23)(5,"p"),e.nrm(6,"ion-icon",24),e.EFF(7),e.k0s(),e.j41(8,"p"),e.nrm(9,"ion-icon",25),e.EFF(10),e.k0s(),e.j41(11,"p"),e.nrm(12,"ion-icon",26),e.j41(13,"strong"),e.EFF(14,"Horario de recolecci\xf3n:"),e.k0s(),e.DNE(15,I,3,5,"span",27)(16,T,2,0,"span",27),e.k0s(),e.DNE(17,$,3,0,"p",27),e.k0s()()),2&i){const t=e.XpG();e.R7$(7),e.SpI(" Horario de atenci\xf3n: ",t.getBusinessInfo().hours,""),e.R7$(3),e.SpI(" Tel\xe9fono: ",t.getBusinessInfo().phone,""),e.R7$(5),e.Y8G("ngIf",t.getScheduledDate()),e.R7$(),e.Y8G("ngIf",!t.getScheduledDate()),e.R7$(),e.Y8G("ngIf","Efectivo"===t.pedido.tipo_pago)}}function j(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.pedido._direccion_texto)}}function A(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Ubicaci\xf3n proporcionada por el cliente"),e.k0s())}function G(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(e.brH(2,1,t.getScheduledDate(),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES"))}}function S(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Por definir"),e.k0s())}function N(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.pedido.indicaciones)}}function Y(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"No especificadas"),e.k0s())}function z(i,a){1&i&&(e.j41(0,"p"),e.nrm(1,"ion-icon",28),e.EFF(2," Pago en efectivo al recibir."),e.k0s())}function B(i,a){if(1&i&&(e.j41(0,"div",4)(1,"h3",13),e.nrm(2,"ion-icon",29),e.EFF(3," Entrega a Domicilio "),e.k0s(),e.j41(4,"div",30)(5,"p"),e.nrm(6,"ion-icon",31),e.EFF(7," Direcci\xf3n de entrega: "),e.DNE(8,j,2,1,"span",27)(9,A,2,0,"span",27),e.k0s(),e.j41(10,"p"),e.nrm(11,"ion-icon",32),e.j41(12,"strong"),e.EFF(13,"Horario de entrega:"),e.k0s(),e.DNE(14,G,3,5,"span",27)(15,S,2,0,"span",27),e.k0s(),e.j41(16,"p"),e.nrm(17,"ion-icon",33),e.EFF(18," Indicaciones: "),e.DNE(19,N,2,1,"span",27)(20,Y,2,0,"span",27),e.k0s(),e.DNE(21,z,3,0,"p",27),e.k0s()()),2&i){const t=e.XpG();e.R7$(8),e.Y8G("ngIf",t.pedido._direccion_texto),e.R7$(),e.Y8G("ngIf",!t.pedido._direccion_texto),e.R7$(5),e.Y8G("ngIf",t.getScheduledDate()),e.R7$(),e.Y8G("ngIf",!t.getScheduledDate()),e.R7$(4),e.Y8G("ngIf",t.pedido.indicaciones),e.R7$(),e.Y8G("ngIf",!t.pedido.indicaciones),e.R7$(),e.Y8G("ngIf","Efectivo"===t.pedido.tipo_pago)}}function X(i,a){if(1&i){const t=e.RV6();e.j41(0,"ion-button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.loadMapPreview())}),e.nrm(1,"ion-icon",42),e.EFF(2," Ver mapa "),e.k0s()}}function U(i,a){1&i&&e.nrm(0,"div",47,0)}function H(i,a){1&i&&(e.j41(0,"div",48),e.nrm(1,"ion-spinner",49),e.j41(2,"p"),e.EFF(3,"Cargando mapa..."),e.k0s()())}function V(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",50),e.nrm(1,"ion-icon",51),e.j41(2,"p"),e.EFF(3,"No se pudo cargar el mapa"),e.k0s(),e.j41(4,"ion-button",52),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.openLocationInMaps())}),e.EFF(5," Ver en Google Maps "),e.k0s()()}}function J(i,a){if(1&i&&(e.j41(0,"div",43),e.DNE(1,U,2,0,"div",44)(2,H,4,0,"div",45)(3,V,6,0,"div",46),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.mapLoadError),e.R7$(),e.Y8G("ngIf",t.showMapPreview&&!t.isMapReady&&!t.mapLoadError),e.R7$(),e.Y8G("ngIf",t.mapLoadError)}}function W(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",4)(1,"h3",13),e.nrm(2,"ion-icon",34),e.EFF(3," Ubicaci\xf3n de Entrega "),e.k0s(),e.j41(4,"div",35),e.DNE(5,X,3,0,"ion-button",36),e.j41(6,"ion-button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openLocationInMaps())}),e.nrm(7,"ion-icon",38),e.EFF(8," Abrir en Maps "),e.k0s()(),e.DNE(9,J,4,3,"div",39),e.j41(10,"div",30)(11,"p"),e.nrm(12,"ion-icon",40),e.EFF(13),e.nI1(14,"number"),e.nI1(15,"number"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",!t.showMapPreview),e.R7$(4),e.Y8G("ngIf",t.showMapPreview),e.R7$(4),e.Lme(" Coordenadas: ",e.i5U(14,4,t.pedido.geopoint_entrega.latitude,"1.6-6"),", ",e.i5U(15,7,t.pedido.geopoint_entrega.longitude,"1.6-6")," ")}}function K(i,a){if(1&i&&(e.j41(0,"p"),e.EFF(1,"Tama\xf1o de tortilla: "),e.j41(2,"span",55),e.EFF(3),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.tamano_tortilla)}}function Q(i,a){if(1&i&&(e.j41(0,"ion-item")(1,"ion-avatar",53),e.nrm(2,"img",54),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.DNE(6,K,4,1,"p",27),e.j41(7,"p"),e.EFF(8),e.k0s(),e.j41(9,"p"),e.EFF(10,"Subtotal: "),e.j41(11,"span",55),e.EFF(12),e.nI1(13,"currency"),e.k0s()()(),e.j41(14,"ion-badge",56),e.nrm(15,"ion-icon",57),e.EFF(16),e.k0s()()),2&i){const t=a.$implicit;e.R7$(2),e.FS9("alt",t.producto.nombre),e.Y8G("src",t.producto.imagen,e.B4B),e.R7$(3),e.JRh(t.nombre),e.R7$(),e.Y8G("ngIf",t.tamano_tortilla),e.R7$(2),e.SpI("Cantidad: ",t.cantidad,""),e.R7$(4),e.SpI("",e.iJd(13,7,e.eq3(13,b,t.subtotal))," MXN"),e.R7$(4),e.SpI(" ",t.cantidad," ")}}function Z(i,a){1&i&&(e.j41(0,"div",62),e.nrm(1,"ion-icon",63),e.j41(2,"p"),e.EFF(3,"Pedido entregado"),e.k0s()())}function q(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",58)(1,"button",59),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.markAsDelivered())}),e.nrm(2,"ion-icon",60),e.j41(3,"span"),e.EFF(4,"Marcar como Entregado"),e.k0s()(),e.DNE(5,Z,4,0,"div",61),e.k0s()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",t.showAnimation)}}let ee=(()=>{var i;class a{constructor(n){this.platform=n,this.sliderValue=0,this.showAnimation=!1,this.firebaseSvc=(0,e.WQX)(y.f),this.utilSvc=(0,e.WQX)(P.T),this.emailSvc=(0,e.WQX)(k._),this.isMapReady=!1,this.businessLocation=null,this.mapLoadError=!1,this.showMapPreview=!1}ngOnInit(){var n;"domicilio"===(null===(n=this.pedido.tipo_entrega)||void 0===n?void 0:n.toLowerCase())&&this.loadBusinessLocation()}ngAfterViewInit(){}loadBusinessLocation(){var n=this;return(0,p.A)(function*(){try{n.firebaseSvc.getCollectionData("direccionNegocio").subscribe(o=>{o&&o.length>0&&(n.businessLocation=o[0])})}catch(o){console.error("Error loading business location:",o)}})()}loadMapPreview(){var n=this;return(0,p.A)(function*(){n.showMapPreview||!n.pedido.geopoint_entrega||(n.showMapPreview=!0,setTimeout(()=>{n.loadLeafletMap()},100))})()}loadLeafletMap(){var n;if(null!==(n=this.mapContainer)&&void 0!==n&&n.nativeElement&&this.pedido.geopoint_entrega)try{this.loadLeafletAssets().then(()=>{this.initializeLeafletMap()}).catch(o=>{console.error("Error loading Leaflet:",o),this.mapLoadError=!0})}catch(o){console.error("Error initializing map:",o),this.mapLoadError=!0}else this.mapLoadError=!0}loadLeafletAssets(){return new Promise((n,o)=>{if(typeof L<"u")return void n();const r=document.createElement("link");r.rel="stylesheet",r.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(r);const s=document.createElement("script");s.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",s.onload=()=>n(),s.onerror=()=>o(new Error("Failed to load Leaflet")),document.head.appendChild(s)})}initializeLeafletMap(){try{var n;const o=[this.pedido.geopoint_entrega.latitude,this.pedido.geopoint_entrega.longitude];this.map=L.map(this.mapContainer.nativeElement,{center:o,zoom:15,zoomControl:!0,attributionControl:!1}),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xa9 OpenStreetMap contributors"}).addTo(this.map);const r=L.divIcon({html:'<ion-icon name="home" style="color: #3880ff; font-size: 24px;"></ion-icon>',iconSize:[30,30],iconAnchor:[15,15],className:"custom-div-icon"});if(L.marker(o,{icon:r}).addTo(this.map).bindPopup("Direcci\xf3n de entrega"),null!==(n=this.businessLocation)&&void 0!==n&&n.geopoint){const s=[this.businessLocation.geopoint.latitude,this.businessLocation.geopoint.longitude],m=L.divIcon({html:'<ion-icon name="storefront" style="color: #10dc60; font-size: 24px;"></ion-icon>',iconSize:[30,30],iconAnchor:[15,15],className:"custom-div-icon"});L.marker(s,{icon:m}).addTo(this.map).bindPopup("Tortiller\xeda Plata Jaimes");const g=L.featureGroup([L.marker(o),L.marker(s)]);this.map.fitBounds(g.getBounds().pad(.1))}setTimeout(()=>{this.map.invalidateSize(),this.isMapReady=!0},200)}catch(o){console.error("Error initializing Leaflet map:",o),this.mapLoadError=!0}}openLocationInMaps(){if(!this.pedido.geopoint_entrega)return;const r=`https://www.google.com/maps?q=${this.pedido.geopoint_entrega.latitude},${this.pedido.geopoint_entrega.longitude}`;this.platform.is("capacitor")?window.open(r,"_system"):window.open(r,"_blank")}sendThankYouEmail(n){var o=this;return(0,p.A)(function*(){try{const r=yield o.firebaseSvc.getDocument(`users/${o.pedido.uid_cliente}`),s={orderId:n,customerEmail:r.email,customerName:r.name||r.email,fecha:o.pedido.fecha.toDate?o.pedido.fecha.toDate():new Date(o.pedido.fecha),estatus:"Entregado",tipo_pago:o.pedido.tipo_pago,items:o.pedido.detalle_pedido,subtotal:o.pedido.total,discountAmount:0,discountPercent:0,transportFee:0,total:o.pedido.total};yield o.emailSvc.sendThankYouEmail(s),console.log("Email de agradecimiento enviado exitosamente")}catch(r){console.error("Error al enviar email de agradecimiento:",r)}})()}createOrderRating(n,o){var r=this;return(0,p.A)(function*(){try{const s={uid_pedido:n,uid_cliente:o,calificacion:0,comentario:"",fecha_creacion:new Date,pendiente:!0};yield r.firebaseSvc.addDocument(`users/${o}/calificaciones`,s),console.log("Calificaci\xf3n pendiente creada exitosamente")}catch(s){console.error("Error al crear calificaci\xf3n pendiente:",s)}})()}onSliderChange(){var n=this;return(0,p.A)(function*(){100===n.sliderValue&&(yield n.markAsDelivered())})()}markAsDelivered(){var n=this;return(0,p.A)(function*(){const o=yield n.utilSvc.loading();yield o.present(),n.showAnimation=!0,n.firebaseSvc.updateDocumet(`pedidos/${n.pedido.id}`,{estatus:"Entregado",pago_confirmado:!0}).then((0,p.A)(function*(){yield n.sendThankYouEmail(n.pedido.id),yield n.createOrderRating(n.pedido.id,n.pedido.uid_cliente),setTimeout(()=>{n.showAnimation=!1,n.sliderValue=0,n.pedido.estatus="Entregado",n.utilSvc.dismissModal({success:!0})},3e3)})).catch(s=>{n.utilSvc.presentToast({message:s.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{o.dismiss()})})()}getColorIcon(n){switch(n.toLowerCase()){case"cancelado":return"danger";case"entregado":return"primary";default:return"dark"}}getStatusIcon(n){switch(n.toLowerCase()){case"pedido confirmado":return"bag-check-outline";case"en preparaci\xf3n":return"refresh-circle-outline";case"en espera de recolecci\xf3n":return"time-outline";case"entregado":return"checkmark-done-outline";case"cancelado":return"close-circle-outline";default:return"help-circle-outline"}}getDeliveryTypeIcon(){var n;switch(null===(n=this.pedido.tipo_entrega)||void 0===n?void 0:n.toLowerCase()){case"domicilio":return"home-outline";case"negocio":return"storefront-outline";default:return"location-outline"}}getDeliveryTypeColor(){var n;switch(null===(n=this.pedido.tipo_entrega)||void 0===n?void 0:n.toLowerCase()){case"domicilio":return"primary";case"negocio":return"success";default:return"medium"}}getPaymentMethodIcon(){var n;return"efectivo"===((null===(n=this.pedido)||void 0===n||null===(n=n.tipo_pago)||void 0===n?void 0:n.toLowerCase())||"")?"cash-outline":"card-outline"}getPaymentStatusText(){var n,o,r;const s=(null===(n=this.pedido)||void 0===n||null===(n=n.tipo_pago)||void 0===n?void 0:n.toLowerCase())||"",m=(null===(o=this.pedido)||void 0===o||null===(o=o.tipo_entrega)||void 0===o?void 0:o.toLowerCase())||"",g=!(null===(r=this.pedido)||void 0===r||!r.pago_confirmado);return"tarjeta"===s||g?"Pago exitoso":"efectivo"===s?"domicilio"===m?"En espera de pago en domicilio":"En espera de pago en tortiller\xeda":"Estado de pago"}getPaymentStatusColor(){var n,o;const r=(null===(n=this.pedido)||void 0===n||null===(n=n.tipo_pago)||void 0===n?void 0:n.toLowerCase())||"",s=!(null===(o=this.pedido)||void 0===o||!o.pago_confirmado);return"tarjeta"===r||s?"success":"warning"}getPaymentStatusIcon(){var n,o;const r=(null===(n=this.pedido)||void 0===n||null===(n=n.tipo_pago)||void 0===n?void 0:n.toLowerCase())||"",s=!(null===(o=this.pedido)||void 0===o||!o.pago_confirmado);return"tarjeta"===r||s?"checkmark-circle-outline":"time-outline"}getScheduledDate(){var n,o,r;return null!==(n=this.pedido)&&void 0!==n&&n.hora_recoleccion?this.toDateTime(this.pedido.hora_recoleccion):null!==(o=this.pedido)&&void 0!==o&&o.fecha_entrega?this.toDateTime(this.pedido.fecha_entrega):null!==(r=this.pedido)&&void 0!==r&&r.fecha?this.toDateTime(this.pedido.fecha):null}getBusinessInfo(){return{name:"Tortiller\xeda Plata Jaimes",address:"Calle Principal #123, Centro, Ciudad",phone:"+52 722 366 4325",hours:"Lunes a Domingo de 9:00 AM a 8:00 PM"}}getScheduledLabel(){var n,o;return this.isBusinessPickup()?null!==(n=this.pedido)&&void 0!==n&&n.hora_recoleccion?"Horario de recolecci\xf3n":null!==(o=this.pedido)&&void 0!==o&&o.fecha_entrega?"Horario programado":"Fecha del pedido":"Horario de entrega"}getEffectiveDeliveryType(){var n,o,r,s,m,g,v,E,u,_,C;const h=null===(n=this.pedido)||void 0===n?void 0:n.geopoint_entrega;return!h||"number"!=typeof h.latitude||"number"!=typeof h.longitude||isNaN(h.latitude)||isNaN(h.longitude)?!0===(null===(o=this.pedido)||void 0===o?void 0:o.es_recoleccion_negocio)||"negocio"===((null===(r=this.pedido)||void 0===r?void 0:r.metodo_entrega)||"").toLowerCase()||"negocio"===((null===(s=this.pedido)||void 0===s?void 0:s.tipo_entrega)||"").toLowerCase()||null!==(m=this.pedido)&&void 0!==m&&m.hora_recoleccion||null!==(g=this.pedido)&&void 0!==g&&g.fecha_recoger?"negocio":"number"==typeof(null===(v=this.pedido)||void 0===v?void 0:v.lat)&&"number"==typeof(null===(E=this.pedido)||void 0===E?void 0:E.lng)||"number"==typeof(null===(u=this.pedido)||void 0===u||null===(u=u.coordenadas)||void 0===u?void 0:u.lat)&&"number"==typeof(null===(_=this.pedido)||void 0===_||null===(_=_.coordenadas)||void 0===_?void 0:_.lng)||"domicilio"===((null===(C=this.pedido)||void 0===C?void 0:C.tipo_entrega)||"").toLowerCase()?"domicilio":"negocio":"domicilio"}isHomeDelivery(){return"domicilio"===this.getEffectiveDeliveryType()}isBusinessPickup(){return"negocio"===this.getEffectiveDeliveryType()}getDeliveryTypeDisplayName(){switch(this.getEffectiveDeliveryType()){case"domicilio":return"Entrega a domicilio";case"negocio":return"Recolecci\xf3n en negocio";default:return"Tipo no especificado"}}toDateTime(n){if(!n)return null;if(null!=n&&n.toDate&&"function"==typeof n.toDate)return n.toDate();if(null!=n&&n.seconds)return new Date(1e3*n.seconds);const o=new Date(n);return isNaN(o.getTime())?null:o}}return(i=a).\u0275fac=function(n){return new(n||i)(e.rXU(x.OD))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-asignar-entrega"]],viewQuery:function(n,o){if(1&n&&(e.GBs(O,5),e.GBs(w,5)),2&n){let r;e.mGM(r=e.lsd())&&(o.sliderButton=r.first),e.mGM(r=e.lsd())&&(o.mapContainer=r.first)}},inputs:{pedido:"pedido"},decls:48,vars:36,consts:[["mapContainer",""],["title","Detalles del pedido",3,"isModal","showNombre","showLogo"],[1,"ticket-container"],[1,"ticket-title"],[1,"ticket-section"],["name","storefront-outline"],["name","person-outline"],["name","calendar-outline"],["class","scheduling-info",4,"ngIf"],[3,"name","color"],["mode","ios",3,"color"],["slot","start",3,"name"],["class","ticket-section",4,"ngIf"],[1,"ticket-subtitle"],[4,"ngFor","ngForOf"],[3,"name"],["mode","ios",2,"margin-left","0.5rem",3,"color"],["color","light",3,"name"],["slot","start",2,"margin-left","0.5rem",3,"color","name"],["name","cash-outline"],["class","assign-action-container",4,"ngIf"],[1,"scheduling-info"],["name","storefront-outline","color","success"],[1,"pickup-info"],["name","time-outline"],["name","call-outline"],["name","alarm-outline"],[4,"ngIf"],["name","cash-outline","color","warning"],["name","home-outline","color","primary"],[1,"delivery-info"],["name","location-outline"],["name","truck-outline"],["name","information-circle-outline"],["name","map-outline","color","primary"],[1,"map-controls"],["fill","outline","size","small","class","map-preview-btn",3,"click",4,"ngIf"],["fill","outline","size","small",1,"external-maps-btn",3,"click"],["name","navigate-outline","slot","start"],["class","map-container",4,"ngIf"],["name","location-outline","color","primary"],["fill","outline","size","small",1,"map-preview-btn",3,"click"],["name","map-outline","slot","start"],[1,"map-container"],["class","map-canvas",4,"ngIf"],["class","map-loading",4,"ngIf"],["class","map-error",4,"ngIf"],[1,"map-canvas"],[1,"map-loading"],["name","circles"],[1,"map-error"],["name","warning-outline","color","warning"],["size","small","fill","clear",3,"click"],["slot","start",1,"avatar-icon"],[3,"src","alt"],[1,"subtotal"],["slot","end","color","tertiary"],["name","cube-outline"],[1,"assign-action-container"],["type","button",1,"deliver-btn",3,"click"],["name","checkmark-outline"],["class","success-animation",4,"ngIf"],[1,"success-animation"],["name","checkmark-circle","color","primary"]],template:function(n,o){1&n&&(e.nrm(0,"app-header",1),e.j41(1,"ion-content")(2,"div",2)(3,"h2",3),e.EFF(4,"Ticket de Pedido"),e.k0s(),e.j41(5,"div",4)(6,"p"),e.nrm(7,"ion-icon",5),e.EFF(8," Nombre del negocio: Tortilleria Plata Jaimes"),e.k0s(),e.j41(9,"p"),e.nrm(10,"ion-icon",6),e.EFF(11),e.k0s(),e.j41(12,"p"),e.nrm(13,"ion-icon",7),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.DNE(16,D,5,7,"div",8),e.j41(17,"p"),e.nrm(18,"ion-icon",9),e.EFF(19," Tipo de entrega: "),e.j41(20,"ion-chip",10),e.nrm(21,"ion-icon",11),e.j41(22,"ion-label"),e.EFF(23),e.k0s()()()(),e.DNE(24,R,18,5,"div",12)(25,B,22,7,"div",12)(26,W,16,10,"div",12),e.j41(27,"h3",13),e.EFF(28,"Productos Comprados"),e.k0s(),e.j41(29,"ion-list"),e.DNE(30,Q,17,15,"ion-item",14),e.k0s(),e.j41(31,"div",4)(32,"p"),e.nrm(33,"ion-icon",15),e.EFF(34),e.j41(35,"ion-chip",16),e.nrm(36,"ion-icon",17),e.j41(37,"ion-label"),e.EFF(38),e.k0s()()(),e.j41(39,"p"),e.EFF(40),e.nrm(41,"ion-icon",18),e.k0s()(),e.j41(42,"div",4)(43,"h2"),e.nrm(44,"ion-icon",19),e.EFF(45),e.nI1(46,"currency"),e.k0s()(),e.DNE(47,q,6,1,"div",20),e.k0s()()),2&n&&(e.Y8G("isModal",!0)("showNombre",!1)("showLogo",!1),e.R7$(11),e.SpI(" Cliente: ",o.pedido.nombre_cliente,""),e.R7$(3),e.SpI(" Fecha: ",e.i5U(15,25,null==o.pedido.fecha?null:o.pedido.fecha.toDate(),"dd/MM/yyyy"),""),e.R7$(2),e.Y8G("ngIf",o.getScheduledDate()),e.R7$(2),e.Y8G("name",o.getDeliveryTypeIcon())("color",o.getDeliveryTypeColor()),e.R7$(2),e.Y8G("color",o.getDeliveryTypeColor()),e.R7$(),e.Y8G("name",o.getDeliveryTypeIcon()),e.R7$(2),e.JRh(o.getDeliveryTypeDisplayName()),e.R7$(),e.Y8G("ngIf",o.isBusinessPickup()),e.R7$(),e.Y8G("ngIf",o.isHomeDelivery()),e.R7$(),e.Y8G("ngIf",o.isHomeDelivery()&&o.pedido.geopoint_entrega),e.R7$(4),e.Y8G("ngForOf",o.pedido.detalle_pedido),e.R7$(3),e.Y8G("name",o.getPaymentMethodIcon()),e.R7$(),e.SpI(" Tipo de Pago: ",o.pedido.tipo_pago," "),e.R7$(),e.Y8G("color",o.getPaymentStatusColor()),e.R7$(),e.Y8G("name",o.getPaymentStatusIcon()),e.R7$(2),e.JRh(o.getPaymentStatusText()),e.R7$(2),e.SpI(" Estatus: ",o.pedido.estatus," "),e.R7$(),e.Y8G("color",o.getColorIcon(o.pedido.estatus))("name",o.getStatusIcon(o.pedido.estatus)),e.R7$(4),e.SpI(" Total: ",e.iJd(46,28,e.eq3(34,b,o.pedido.total))," MXN\n"),e.R7$(2),e.Y8G("ngIf","en espera de recolecci\xf3n"===o.pedido.estatus.toLowerCase()))},dependencies:[f.Sq,f.bT,d.mC,d.In,d.Jm,d.ZB,d.W9,d.iq,d.uz,d.he,d.nf,d.w2,F.l,f.QX,f.oe,f.vh],styles:['@charset "UTF-8";.ticket-container[_ngcontent-%COMP%]{padding:16px;background-color:#f7f7f7;border-radius:8px;margin:20px;box-shadow:0 4px 8px #0003}.ticket-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;text-align:center;color:#333;margin-bottom:1rem}.ticket-section[_ngcontent-%COMP%]{background-color:#fff;padding:12px;border-radius:8px;margin-bottom:1rem;box-shadow:0 2px 6px #0000001a}.ticket-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#444;margin:.5rem 0;display:flex;align-items:center}.ticket-section[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.ticket-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-top:1rem;margin-bottom:.5rem;color:#666}.product-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{background-color:#fafafa;border-radius:6px;margin:4px 0;box-shadow:0 1px 3px #0000001a}.product-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem;color:#555}.ticket-section[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#28a745}ion-content[_ngcontent-%COMP%]{--ion-background-color: #e9ecef}.assign-slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:50px;text-align:center}.assign-slider[_ngcontent-%COMP%]{width:80%;--knob-size: 36px;--bar-height: 24px;--knob-background: var(--ion-color-primary);--bar-background-active: var(--ion-color-primary);--bar-background: #ddd;--bar-border-radius: 50px}.success-animation[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px;animation:_ngcontent-%COMP%_fadeInScale .5s ease forwards}.success-animation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:var(--ion-color-primary);animation:_ngcontent-%COMP%_scaleUp .5s ease forwards}.success-animation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-primary);margin-top:8px}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(.5)}to{transform:scale(1)}}ion-item[_ngcontent-%COMP%]{--inner-padding-start: 10px;border-bottom:1px solid var(--ion-color-light)}.avatar-icon[_ngcontent-%COMP%]{background-color:var(--ion-color-light);display:flex;align-items:center;justify-content:center;border-radius:50%;height:40px;width:40px}.avatar-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin:0;color:var(--ion-color-dark)}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--ion-color-medium)}.subtotal[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-success)}ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;padding:5px;border-radius:10px;font-size:14px}.map-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}.map-preview-btn[_ngcontent-%COMP%], .external-maps-btn[_ngcontent-%COMP%]{--border-width: 1px;--border-style: solid;--border-color: var(--ion-color-primary);height:32px}.map-container[_ngcontent-%COMP%]{position:relative;width:100%;height:250px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #00000026;margin:1rem 0;border:1px solid #e0e0e0}.map-canvas[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px}.map-loading[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#f8f9fa;color:#6c757d;border-radius:8px}.map-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:1rem;--color: var(--ion-color-primary)}.map-error[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#fff8e1;color:#f57c00;border-radius:8px;text-align:center}.map-error[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.map-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:.9rem}.delivery-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:.75rem;border-radius:6px;margin-top:.5rem;border-left:3px solid var(--ion-color-primary)}.delivery-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:.9rem;color:#666;display:flex;align-items:center}.delivery-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.5rem}.pickup-info[_ngcontent-%COMP%]{background-color:#f0f8f0;padding:1rem;border-radius:8px;border-left:4px solid var(--ion-color-success)}.pickup-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;display:flex;align-items:center;font-size:.95rem}.pickup-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.75rem;color:var(--ion-color-success)}.assign-action-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:24px;text-align:center}.deliver-btn[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:50%;border:none;color:#fff;background:linear-gradient(145deg,#34c759,#2bb24f);box-shadow:0 8px 16px #0000002e;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease}.deliver-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#fff}.deliver-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;text-align:center}.deliver-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 18px #00000038}.deliver-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 6px 12px #0000002e}[_ngcontent-%COMP%]:global(.custom-div-icon){background:#fff;border:2px solid #ddd;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 6px #0003}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{height:200px;margin:.75rem 0}.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.map-preview-btn[_ngcontent-%COMP%], .external-maps-btn[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.delivery-info[_ngcontent-%COMP%]{padding:.5rem;font-size:.85rem}}@media (max-width: 480px){.map-container[_ngcontent-%COMP%]{height:180px}.ticket-container[_ngcontent-%COMP%]{margin:10px;padding:12px}}'],data:{animation:[(0,l.hZ)("slideButton",[(0,l.wk)("start",(0,l.iF)({transform:"translateX(0)"})),(0,l.wk)("end",(0,l.iF)({transform:"translateX(100%)"})),(0,l.kY)("start => end",(0,l.i0)("0.3s ease-out")),(0,l.kY)("end => start",(0,l.i0)("0.3s ease-in"))])]}}),a})()}}]);