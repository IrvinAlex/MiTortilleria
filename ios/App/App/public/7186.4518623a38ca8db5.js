"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7186],{7186:(Oo,$,C)=>{C.r($),C.d($,{MetodoEntregaNegocioPageModule:()=>Po});var y=C(177),S=C(9417),s=C(5933),k=C(8265),v=C(467),o=C(4438),I=C(7517),j=C(2723),T=C(1876),N=C(8461);const O=n=>[n,"MXN","symbol-narrow","1.2-2","en-US"],A=()=>[0,"MXN","symbol-narrow","1.2-2","en-US"],G=()=>[5,"MXN","symbol-narrow","1.2-2","en-US"];function z(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span"),o.EFF(2),o.k0s(),o.j41(3,"span"),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=c.$implicit;o.R7$(2),o.Lme("",(null==i.producto?null:i.producto.nombre)||""," x",i.cantidad,""),o.R7$(2),o.SpI("",o.iJd(5,3,o.eq3(9,O,i.subtotal))," MXN")}}function X(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",22),o.EFF(2,"Subtotal: "),o.k0s(),o.j41(3,"span",22),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,O,null==i.cart?null:i.cart.total))," MXN")}}function Y(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",23),o.EFF(2,"Descuento: "),o.k0s(),o.j41(3,"span",23),o.EFF(4),o.nI1(5,"number"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("-",o.i5U(5,1,i.porcentaje,"1.0-0"),"%")}}function L(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",24),o.EFF(2,"Subtotal con descuento:"),o.k0s(),o.j41(3,"span",24),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,O,(null==i.cart?null:i.cart.total)-(null==i.cart?null:i.cart.total)*(i.porcentaje/100)))," MXN")}}function H(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span"),o.EFF(2,"Subtotal:"),o.k0s(),o.j41(3,"span"),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,O,null==i.cart?null:i.cart.total))," MXN")}}function J(n,c){1&n&&(o.j41(0,"div",25),o.nrm(1,"ion-icon",26),o.j41(2,"span",27),o.EFF(3,"\xa1Tienes env\xedo gratis!"),o.k0s()())}function B(n,c){1&n&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"currency"),o.k0s()),2&n&&(o.R7$(),o.SpI("",o.iJd(2,1,o.lJ4(7,A))," MXN"))}function q(n,c){if(1&n&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"currency"),o.k0s()),2&n){const i=o.XpG();o.R7$(),o.SpI("",o.iJd(2,1,o.eq3(7,O,i.transportFee))," MXN")}}function U(n,c){1&n&&(o.j41(0,"div",12)(1,"span"),o.EFF(2,"Cargo de servicio:"),o.k0s(),o.j41(3,"span"),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n&&(o.R7$(4),o.SpI("",o.iJd(5,1,o.lJ4(7,G))," MXN"))}function V(n,c){if(1&n&&(o.j41(0,"div",28),o.nrm(1,"ion-icon",29),o.j41(2,"span",30),o.EFF(3),o.nI1(4,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(3),o.SpI("Agrega ",o.iJd(4,1,o.eq3(7,O,140-((null==i.cart?null:i.cart.total)-(null==i.cart?null:i.cart.total)*(i.porcentaje/100))))," MXN m\xe1s para env\xedo gratis")}}function W(n,c){if(1&n&&(o.j41(0,"span")(1,"strong"),o.EFF(2),o.nI1(3,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(2),o.SpI("",o.iJd(3,1,o.eq3(7,O,(null==i.cart?null:i.cart.total)-(null==i.cart?null:i.cart.total)*(i.porcentaje/100)))," MXN")}}function Q(n,c){if(1&n&&(o.j41(0,"span")(1,"strong"),o.EFF(2),o.nI1(3,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(2),o.SpI("",o.iJd(3,1,o.eq3(7,O,(null==i.cart?null:i.cart.total)-(null==i.cart?null:i.cart.total)*(i.porcentaje/100)+i.transportFee+5))," MXN")}}function Z(n,c){1&n&&(o.j41(0,"div",31),o.nrm(1,"div",32),o.k0s())}function K(n,c){1&n&&o.nrm(0,"ion-icon",36)}function oo(n,c){if(1&n){const i=o.RV6();o.j41(0,"div",33)(1,"ion-button",34),o.bIt("click",function(){o.eBV(i);const e=o.XpG();return o.Njj(e.confirmPayment())}),o.DNE(2,K,1,0,"ion-icon",35),o.EFF(3),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.AVh("animated",i.confirming),o.Y8G("disabled",i.confirming||i.paymentConfirmed),o.R7$(),o.Y8G("ngIf",i.paymentConfirmed),o.R7$(),o.SpI(" ",i.paymentConfirmed?"Pedido Confirmado":"Confirmar Pago"," ")}}let to=(()=>{var n;class c{constructor(){this.selectedPayment=null,this.confirming=!1,this.paymentConfirmed=!1,this.utilsSvc=(0,o.WQX)(j.T),this.firebaseSvc=(0,o.WQX)(I.f),this.emailSvc=(0,o.WQX)(T._),this.discountAmount=0,this.porcentaje=0,this.distanciaKm=0,this.transportFee=0}ngOnInit(){this.getCartDetails(),this.applyStoredCoupon();const t=this.dir()[0];t&&this.firebaseSvc.getCollectionData("direccionNegocio").subscribe(e=>{if(e&&e.length>0){const a=e[0],r=this.calcularDistancia(parseFloat(t.geopoint._lat||t.geopoint.latitude),parseFloat(t.geopoint._long||t.geopoint.longitude),parseFloat(a.geopoint.latitude)||parseFloat(a.geopoint._lat),parseFloat(a.geopoint.longitude)||parseFloat(a.geopoint._long));this.distanciaKm=parseFloat(r.toFixed(2)),this.loadTransportFeeFromFirebase(this.distanciaKm)}})}loadTransportFeeFromFirebase(t){var e=this;return(0,v.A)(function*(){try{e.firebaseSvc.getCollectionData("tarifas_transporte").subscribe(a=>{if(a&&a.length>0){const r=a.find(l=>t>=l.distancia_min&&t<=l.distancia_max&&l.activo);if(r)return void(e.transportFee=r.tarifa)}e.firebaseSvc.getCollectionData("tarifa_fija").subscribe(r=>{e.transportFee=r&&r.length>0&&r[0].activo?r[0].precio:e.calculateTransportFee(t)})})}catch(a){console.error("Error loading transport fee from Firebase:",a),e.transportFee=e.calculateTransportFee(t)}})()}calculateTransportFee(t){return t<=.5?30:t<=1?35:t<=1.5?50:t<=2?65:t<=2.5?70:t<=3?80:t<=3.5?90:t<=4?115:t<=4.5?125:145}sendOrderConfirmationEmail(t,e){var a=this;return(0,v.A)(function*(){try{const r=a.utilsSvc.getFromLocalStorage("user"),l={orderId:t,customerEmail:r.email,customerName:r.name||r.email,fecha:new Date,estatus:"Pedido confirmado",tipo_pago:e,items:a.cart.detalle_carrito,subtotal:a.cart.total,discountAmount:a.cart.total*(a.porcentaje/100),discountPercent:a.porcentaje,transportFee:a.transportFee,total:a.cart.total-a.cart.total*(a.porcentaje/100)+a.transportFee};yield a.emailSvc.sendOrderConfirmationEmail(l),console.log("Email de confirmaci\xf3n enviado exitosamente")}catch(r){console.error("Error al enviar email de confirmaci\xf3n:",r)}})()}renderPayPalButton(){var a,t=this;document.getElementById("paypal-button-container")?window.paypal.Buttons({createOrder:(a,r)=>{const l=this.cart.total-this.cart.total*(this.porcentaje/100);return r.order.create({purchase_units:[{amount:{value:(l+(l>=140?0:this.transportFee)+(l<140?5:0)).toFixed(2)},shipping_address:{country_code:"MX"}}],shipping_preference:"SET_PROVIDED_ADDRESS"})},onApprove:(a=(0,v.A)(function*(r,l){return l.order.capture().then(function(){var d=(0,v.A)(function*(u){console.log("Pago completado:",u);const m=yield t.utilsSvc.loading();yield m.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,v.A)(function*(){const p=document.querySelector(".confirm-button");p&&p.classList.add("complete");const M=t.utilsSvc.getFromLocalStorage("user").uid,x=t.dir()[0],b=t.cart.total-t.cart.total*(t.porcentaje/100),f=b+(b>=140?0:t.transportFee)+(b<140?5:0),P={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!0,tipo_pago:"Tarjeta",tipo_entrega:"Negocio",total:f,uid_cliente:M,geopoint_entrega:{latitude:x.geopoint._lat,longitude:x.geopoint._long}},w=t.cart.detalle_carrito.map(h=>({cantidad:h.cantidad,subtotal:h.subtotal,uid_producto:h.uid_producto,uid_opcion:h.uid_opcion,tamano_tortilla:h.tamano_tortilla}));t.utilsSvc.setElementInLocalstorage("pedido",P),t.utilsSvc.setElementInLocalstorage("detalle_pedido",w);const R=t.cart.id;if(R)try{for(let h of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${M}/carrito_negocio/${R}/detalle_carrito/${h.id}`)}catch(h){console.error("Error deleting cart items:",h)}else console.warn("Cart ID is missing, skipping cart item deletion");const D=yield t.firebaseSvc.addDocument("pedidos",P);for(let h of t.cart.detalle_carrito)h.tamano_tortilla>10?yield t.firebaseSvc.addDocument(`pedidos/${D.id}/detalle_pedido`,{cantidad:h.cantidad,subtotal:h.subtotal,uid_producto:h.uid_producto,uid_opcion:h.uid_opcion,tamano_tortilla:h.tamano_tortilla}):yield t.firebaseSvc.addDocument(`pedidos/${D.id}/detalle_pedido`,{cantidad:h.cantidad,subtotal:h.subtotal,uid_producto:h.uid_producto,uid_opcion:h.uid_opcion});yield t.sendOrderConfirmationEmail(D.id,"Tarjeta"),yield t.firebaseSvc.updateDocumet(`users/${M}/carrito_negocio/${R}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito",[t.cart]),localStorage.removeItem("selectedMethod"),m.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)});return function(u){return d.apply(this,arguments)}}())}),function(l,d){return a.apply(this,arguments)}),onError:a=>{console.error("Error en el pago:",a),alert("Hubo un problema con el pago. Por favor, int\xe9ntalo de nuevo.")}}).render("#paypal-button-container"):console.error("Contenedor #paypal-button-container no encontrado.")}onPaymentChange(t){var e=this;return(0,v.A)(function*(){if(e.selectedPayment=t,"paypal"===t){const a=yield e.utilsSvc.loading();yield a.present(),setTimeout(()=>{e.renderPayPalButton(),a.dismiss()},1500)}})()}confirmPayment(){var t=this;return(0,v.A)(function*(){const e=yield t.utilsSvc.loading();yield e.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,v.A)(function*(){const a=document.querySelector(".confirm-button");a&&a.classList.add("complete");const r=t.utilsSvc.getFromLocalStorage("user").uid,l=t.dir()[0],d=t.cart.total-t.cart.total*(t.porcentaje/100),p=d+(d>=140?0:t.transportFee)+(d<140?5:0),M={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!1,tipo_pago:"Efectivo",tipo_entrega:"Negocio",total:p,uid_cliente:r,geopoint_entrega:{latitude:l.geopoint._lat,longitude:l.geopoint._long}},x=t.cart.detalle_carrito.map(g=>({cantidad:g.cantidad,subtotal:g.subtotal,uid_producto:g.uid_producto,uid_opcion:g.uid_opcion,tamano_tortilla:g.tamano_tortilla}));t.utilsSvc.setElementInLocalstorage("pedido",M),t.utilsSvc.setElementInLocalstorage("detalle_pedido",x);const b=t.cart.id;if(b)try{for(let g of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${r}/carrito_negocio/${b}/detalle_carrito/${g.id}`)}catch(g){console.error("Error deleting cart items:",g)}else console.warn("Cart ID is missing, skipping cart item deletion");const _=yield t.firebaseSvc.addDocument("pedidos",M);for(let g of t.cart.detalle_carrito)g.tamano_tortilla?yield t.firebaseSvc.addDocument(`pedidos/${_.id}/detalle_pedido`,{cantidad:g.cantidad,subtotal:g.subtotal,uid_producto:g.uid_producto,uid_opcion:g.uid_opcion,tamano_tortilla:g.tamano_tortilla}):yield t.firebaseSvc.addDocument(`pedidos/${_.id}/detalle_pedido`,{cantidad:g.cantidad,subtotal:g.subtotal,uid_producto:g.uid_producto,uid_opcion:g.uid_opcion});yield t.sendOrderConfirmationEmail(_.id,"Efectivo"),b&&(yield t.firebaseSvc.updateDocumet(`users/${r}/carrito_negocio/${b}`,{total:0})),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_negocio",[t.cart]),localStorage.removeItem("selectedMethod"),e.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)})()}getCartDetails(){var t=this;return(0,v.A)(function*(){const e=yield t.utilsSvc.loading();yield e.present();const a=t.utilsSvc.getFromLocalStorage("carrito_negocio");t.cart=a[0];for(let r of t.cart.detalle_carrito){const l=yield t.firebaseSvc.getDocument(`productos/${r.uid_producto}`),d=yield t.firebaseSvc.getDocument(`productos/${r.uid_producto}/opciones/${r.uid_opcion}`);r.producto=l||{},r.opcion=d||{}}console.log("Carrito:",t.cart),e.dismiss()})()}applyStoredCoupon(){if(this.cart=this.utilsSvc.getFromLocalStorage("carrito_negocio")[0],this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje,this.cart.total-=this.discountAmount)}}calcularDistancia(t,e,a,r){const d=(a-t)*Math.PI/180,u=(r-e)*Math.PI/180,m=Math.sin(d/2)*Math.sin(d/2)+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return 2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m))*6371}dir(){return this.utilsSvc.getFromLocalStorage("direccion")||{}}}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.VBU({type:n,selectors:[["app-entrega-domicilio-negocio"]],decls:54,vars:31,consts:[["title","Pago",3,"isModal"],[3,"fullscreen"],[1,"payment-card"],[1,"title"],[3,"ionChange"],["button","",1,"option-card",3,"click"],["name","cash-outline","slot","start",1,"option-icon"],["slot","end","value","efectivo"],["name","card-outline","slot","start",1,"option-icon"],["slot","end","value","tarjeta"],[1,"summary-card"],[1,"summary-title"],[1,"summary-item"],["class","summary-item",4,"ngFor","ngForOf"],[1,"divider"],["class","summary-item",4,"ngIf"],["class","free-shipping-message",4,"ngIf"],[4,"ngIf"],["class","motivational-message",4,"ngIf"],[1,"summary-item","total-item"],["class","confirm-button-container-paypal",4,"ngIf"],["class","confirm-button-container",4,"ngIf"],[1,"original-price"],[1,"descuento"],[1,"discounted-price"],[1,"free-shipping-message"],["name","gift-outline","color","success"],[1,"success-text"],[1,"motivational-message"],["name","information-circle-outline","color","primary"],[1,"info-text"],[1,"confirm-button-container-paypal"],["id","paypal-button-container"],[1,"confirm-button-container"],["expand","block","mode","ios",3,"click","disabled"],["name","checkmark-outline","slot","start",4,"ngIf"],["name","checkmark-outline","slot","start"]],template:function(t,e){1&t&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"h2",3),o.EFF(5,"M\xe9todo de Pago"),o.k0s()(),o.j41(6,"ion-card-content")(7,"ion-radio-group",4),o.bIt("ionChange",function(r){return e.onPaymentChange(r.detail.value)}),o.j41(8,"ion-card",5),o.bIt("click",function(){return e.onPaymentChange("efectivo")}),o.j41(9,"ion-item"),o.nrm(10,"ion-icon",6),o.j41(11,"ion-label"),o.EFF(12,"Efectivo en domicilio"),o.k0s(),o.nrm(13,"ion-radio",7),o.k0s()(),o.j41(14,"ion-card",5),o.bIt("click",function(){return e.onPaymentChange("paypal")}),o.j41(15,"ion-item"),o.nrm(16,"ion-icon",8),o.j41(17,"ion-label"),o.EFF(18,"Tarjeta"),o.k0s(),o.nrm(19,"ion-radio",9),o.k0s()()()()(),o.j41(20,"ion-card",10)(21,"ion-card-header")(22,"h3",11),o.EFF(23,"Resumen de compra"),o.k0s()(),o.j41(24,"ion-card-content")(25,"div",12)(26,"span"),o.EFF(27),o.k0s(),o.j41(28,"span"),o.EFF(29),o.nI1(30,"currency"),o.k0s()(),o.DNE(31,z,6,11,"div",13),o.nrm(32,"div",14),o.DNE(33,X,6,9,"div",15)(34,Y,6,4,"div",15)(35,L,6,9,"div",15)(36,H,6,9,"div",15)(37,J,4,0,"div",16),o.j41(38,"div",12)(39,"span"),o.EFF(40),o.k0s(),o.DNE(41,B,3,8,"span",17)(42,q,3,9,"span",17),o.k0s(),o.DNE(43,U,6,8,"div",15)(44,V,5,9,"div",18),o.nrm(45,"div",14),o.j41(46,"div",19)(47,"span")(48,"strong"),o.EFF(49,"Total a pagar:"),o.k0s()(),o.DNE(50,W,4,9,"span",17)(51,Q,4,9,"span",17),o.k0s()()(),o.DNE(52,Z,2,0,"div",20)(53,oo,4,5,"div",21),o.k0s()),2&t&&(o.Y8G("isModal",!0),o.R7$(),o.Y8G("fullscreen",!0),o.R7$(7),o.AVh("selected","efectivo"===e.selectedPayment),o.R7$(6),o.AVh("selected","paypal"===e.selectedPayment),o.R7$(13),o.SpI("Productos (",(null==e.cart||null==e.cart.detalle_carrito?null:e.cart.detalle_carrito.length)||0,")"),o.R7$(2),o.SpI("",o.iJd(30,23,o.eq3(29,O,null==e.cart?null:e.cart.total))," MXN"),o.R7$(2),o.Y8G("ngForOf",null==e.cart?null:e.cart.detalle_carrito),o.R7$(2),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",0===e.discountAmount),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)>=140),o.R7$(3),o.SpI("Tarifa de transporte (",e.distanciaKm," km):"),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)>=140),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)<140),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)<140),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)<140),o.R7$(6),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)>=140),o.R7$(),o.Y8G("ngIf",(null==e.cart?null:e.cart.total)-(null==e.cart?null:e.cart.total)*(e.porcentaje/100)<140),o.R7$(),o.Y8G("ngIf","tarjeta"===e.selectedPayment),o.R7$(),o.Y8G("ngIf","efectivo"===e.selectedPayment))},dependencies:[y.Sq,y.bT,s.Jm,s.b_,s.I9,s.ME,s.W9,s.iq,s.uz,s.he,s.KO,s.f0,s.uR,s.Je,N.l,y.QX,y.oe],styles:['@charset "UTF-8";.payment-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{margin:16px;border-radius:16px;box-shadow:0 4px 8px #0000001a}.title[_ngcontent-%COMP%], .summary-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center;color:var(--ion-color-primary)}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;transition:transform .2s ease,background-color .3s ease}.option-card.selected[_ngcontent-%COMP%]{transform:scale(1.05);background-color:var(--ion-color-primary-tint)}.option-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-primary);margin-right:8px}.summary-card[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#343a40}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:1rem}.divider[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;margin:8px 0}.confirm-button-container[_ngcontent-%COMP%], .confirm-button-container-paypal[_ngcontent-%COMP%]{margin:16px}.confirm-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden;transition:background-color .3s ease-in-out}.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden}.confirm-button.animated[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:0%;background:linear-gradient(to right,var(--ion-color-primary),var(--ion-color-secondary),var(--ion-color-tertiary));z-index:1;animation:_ngcontent-%COMP%_slideIn 3s forwards}.confirm-button.animated[_ngcontent-%COMP%]{color:transparent}.confirm-button.animated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.confirm-button.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}@keyframes _ngcontent-%COMP%_slideIn{0%{width:0%}50%{width:100%}to{width:0%}}.total-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.total-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:4px 0}.discounted-price[_ngcontent-%COMP%]{color:green;font-weight:700}.original-price[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;font-size:17px}.descuento[_ngcontent-%COMP%]{font-weight:700;font-size:17px}.free-shipping-message[_ngcontent-%COMP%], .motivational-message[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;margin:8px 0;border-radius:8px;font-size:.9rem}.free-shipping-message[_ngcontent-%COMP%]{background-color:#28a7451a;border:1px solid rgba(40,167,69,.3)}.motivational-message[_ngcontent-%COMP%]{background-color:#007bff1a;border:1px solid rgba(0,123,255,.3)}.success-text[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:500;margin-left:8px}.info-text[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500;margin-left:8px}.total-item[_ngcontent-%COMP%]{font-size:1.1rem;border-top:2px solid var(--ion-color-primary);padding-top:12px;margin-top:8px}']}),c})();const E=n=>[n,"MXN","symbol-narrow","1.2-2","en-US"];function eo(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span"),o.EFF(2),o.k0s(),o.j41(3,"span"),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=c.$implicit;o.R7$(2),o.Lme("",(null==i.producto?null:i.producto.nombre)||""," x",i.cantidad,""),o.R7$(2),o.SpI("",o.iJd(5,3,o.eq3(9,E,i.subtotal))," MXN")}}function no(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",18),o.EFF(2,"Total: "),o.k0s(),o.j41(3,"span",18),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,E,null==i.cart?null:i.cart.total))," MXN")}}function io(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",19),o.EFF(2,"Descuento: "),o.k0s(),o.j41(3,"span",19),o.EFF(4),o.nI1(5,"number"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("-",o.i5U(5,1,i.porcentaje,"1.0-0"),"%")}}function ao(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span",20),o.EFF(2,"Total con descuento:"),o.k0s(),o.j41(3,"span",20),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,E,(null==i.cart?null:i.cart.total)-(null==i.cart?null:i.cart.total)*(i.porcentaje/100)))," MXN")}}function ro(n,c){if(1&n&&(o.j41(0,"div",12)(1,"span"),o.EFF(2,"Pagas"),o.k0s(),o.j41(3,"span"),o.EFF(4),o.nI1(5,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(4),o.SpI("",o.iJd(5,1,o.eq3(7,E,null==i.cart?null:i.cart.total))," MXN")}}function co(n,c){1&n&&(o.j41(0,"div",21),o.nrm(1,"div",22),o.k0s())}function lo(n,c){1&n&&o.nrm(0,"ion-icon",26)}function so(n,c){if(1&n){const i=o.RV6();o.j41(0,"div",23)(1,"ion-button",24),o.bIt("click",function(){o.eBV(i);const e=o.XpG();return o.Njj(e.confirmPayment())}),o.DNE(2,lo,1,0,"ion-icon",25),o.EFF(3),o.k0s()()}if(2&n){const i=o.XpG();o.R7$(),o.AVh("animated",i.confirming),o.Y8G("disabled",i.confirming||i.paymentConfirmed),o.R7$(),o.Y8G("ngIf",i.paymentConfirmed),o.R7$(),o.SpI(" ",i.paymentConfirmed?"Pedido Confirmado":"Confirmar Pago"," ")}}let po=(()=>{var n;class c{constructor(){this.selectedPayment=null,this.confirming=!1,this.paymentConfirmed=!1,this.utilsSvc=(0,o.WQX)(j.T),this.firebaseSvc=(0,o.WQX)(I.f),this.emailSvc=(0,o.WQX)(T._),this.discountAmount=0,this.porcentaje=0}ngOnInit(){this.getCartDetails(),console.log(this.cart)}sendOrderConfirmationEmail(t,e){var a=this;return(0,v.A)(function*(){try{const r=a.utilsSvc.getFromLocalStorage("user"),l={orderId:t,customerEmail:r.email,customerName:r.name||r.email,fecha:new Date,estatus:"Pedido confirmado",tipo_pago:e,items:a.cart.detalle_carrito,subtotal:a.cart.total,discountAmount:a.cart.total*(a.porcentaje/100),discountPercent:a.porcentaje,transportFee:0,total:a.cart.total-a.cart.total*(a.porcentaje/100)};yield a.emailSvc.sendOrderConfirmationEmail(l),console.log("Email de confirmaci\xf3n enviado exitosamente")}catch(r){console.error("Error al enviar email de confirmaci\xf3n:",r)}})()}renderPayPalButton(){var a,t=this;document.getElementById("paypal-button-container")?window.paypal.Buttons({createOrder:(a,r)=>r.order.create({purchase_units:[{amount:{value:this.cart.total-this.cart.total*(this.porcentaje/100)},shipping_address:{country_code:"MX"}}],shipping_preference:"SET_PROVIDED_ADDRESS"}),onApprove:(a=(0,v.A)(function*(r,l){return l.order.capture().then(function(){var d=(0,v.A)(function*(u){console.log("Pago completado:",u);const m=yield t.utilsSvc.loading();yield m.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,v.A)(function*(){const p=document.querySelector(".confirm-button");p&&p.classList.add("complete");const M=t.utilsSvc.getFromLocalStorage("user").uid,x={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!0,tipo_pago:"Tarjeta",tipo_entrega:"Negocio",total:t.cart.total-t.cart.total*(t.porcentaje/100),uid_cliente:M},b=t.cart.detalle_carrito.map(f=>({cantidad:f.cantidad,subtotal:f.subtotal,uid_producto:f.uid_producto,uid_opcion:f.uid_opcion,tamano_tortilla:f.tamano_tortilla}));t.utilsSvc.setElementInLocalstorage("pedido",x),t.utilsSvc.setElementInLocalstorage("detalle_pedido",b);const _=t.cart.id;for(let f of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${M}/carrito_negocio/${_}/detalle_carrito/${f.id}`);const g=yield t.firebaseSvc.addDocument("pedidos",x);for(let f of t.cart.detalle_carrito)f.tamano_tortilla?yield t.firebaseSvc.addDocument(`pedidos/${g.id}/detalle_pedido`,{cantidad:f.cantidad,subtotal:f.subtotal,uid_producto:f.uid_producto,uid_opcion:f.uid_opcion,tamano_tortilla:f.tamano_tortilla}):yield t.firebaseSvc.addDocument(`pedidos/${g.id}/detalle_pedido`,{cantidad:f.cantidad,subtotal:f.subtotal,uid_producto:f.uid_producto,uid_opcion:f.uid_opcion});yield t.sendOrderConfirmationEmail(g.id,"Tarjeta"),yield t.firebaseSvc.updateDocumet(`users/${M}/carrito_negocio/${_}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_negocio",[t.cart]),localStorage.removeItem("selectedMethod"),m.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)});return function(u){return d.apply(this,arguments)}}())}),function(l,d){return a.apply(this,arguments)}),onError:a=>{console.error("Error en el pago:",a),alert("Hubo un problema con el pago. Por favor, int\xe9ntalo de nuevo.")}}).render("#paypal-button-container"):console.error("Contenedor #paypal-button-container no encontrado.")}onPaymentChange(t){var e=this;return(0,v.A)(function*(){if(e.selectedPayment=t,"paypal"===t){const a=yield e.utilsSvc.loading();yield a.present(),setTimeout(()=>{e.renderPayPalButton(),a.dismiss()},1500)}})()}confirmPayment(){var t=this;return(0,v.A)(function*(){const e=yield t.utilsSvc.loading();yield e.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,v.A)(function*(){const a=document.querySelector(".confirm-button");a&&a.classList.add("complete");const r=t.utilsSvc.getFromLocalStorage("user").uid,l={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!1,tipo_pago:"Efectivo",total:t.cart.total-t.cart.total*(t.porcentaje/100),uid_cliente:r},d=t.cart.detalle_carrito.map(p=>({cantidad:p.cantidad,subtotal:p.subtotal,uid_producto:p.uid_producto,uid_opcion:p.uid_opcion,tamano_tortilla:p.tamano_tortilla}));t.utilsSvc.setElementInLocalstorage("pedido",l),t.utilsSvc.setElementInLocalstorage("detalle_pedido",d);const u=t.cart.id;for(let p of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${r}/carrito_negocio/${u}/detalle_carrito/${p.id}`);const m=yield t.firebaseSvc.addDocument("pedidos",l);for(let p of t.cart.detalle_carrito)p.tamano_tortilla?yield t.firebaseSvc.addDocument(`pedidos/${m.id}/detalle_pedido`,{cantidad:p.cantidad,subtotal:p.subtotal,uid_producto:p.uid_producto,uid_opcion:p.uid_opcion,tamano_tortilla:p.tamano_tortilla}):yield t.firebaseSvc.addDocument(`pedidos/${m.id}/detalle_pedido`,{cantidad:p.cantidad,subtotal:p.subtotal,uid_producto:p.uid_producto,uid_opcion:p.uid_opcion});yield t.sendOrderConfirmationEmail(m.id,"Efectivo"),yield t.firebaseSvc.updateDocumet(`users/${r}/carrito_negocio/${u}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_negocio",[t.cart]),localStorage.removeItem("selectedMethod"),e.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)})()}getCartDetails(){var t=this;return(0,v.A)(function*(){const e=yield t.utilsSvc.loading();yield e.present(),t.cart=t.utilsSvc.getFromLocalStorage("carrito_negocio")[0];for(let a of t.cart.detalle_carrito){const r=yield t.firebaseSvc.getDocument(`productos/${a.uid_producto}`),l=yield t.firebaseSvc.getDocument(`productos/${a.uid_producto}/opciones/${a.uid_opcion}`);a.producto=r||{},a.opcion=l||{}}e.dismiss()})()}applyStoredCoupon(){if(this.cart=this.utilsSvc.getFromLocalStorage("carrito_negocio")[0],this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje,this.cart.total-=this.discountAmount)}}}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.VBU({type:n,selectors:[["app-entrega-negocio-negocio"]],decls:39,vars:23,consts:[["title","Pago",3,"isModal"],[3,"fullscreen"],[1,"payment-card"],[1,"title"],[3,"ionChange"],["button","",1,"option-card",3,"click"],["name","cash-outline","slot","start",1,"option-icon"],["slot","end","value","efectivo"],["name","card-outline","slot","start",1,"option-icon"],["slot","end","value","tarjeta"],[1,"summary-card"],[1,"summary-title"],[1,"summary-item"],["class","summary-item",4,"ngFor","ngForOf"],[1,"divider"],["class","summary-item",4,"ngIf"],["class","confirm-button-container-paypal",4,"ngIf"],["class","confirm-button-container",4,"ngIf"],[1,"original-price"],[1,"descuento"],[1,"discounted-price"],[1,"confirm-button-container-paypal"],["id","paypal-button-container"],[1,"confirm-button-container"],["expand","block","mode","ios",3,"click","disabled"],["name","checkmark-outline","slot","start",4,"ngIf"],["name","checkmark-outline","slot","start"]],template:function(t,e){1&t&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"h2",3),o.EFF(5,"M\xe9todo de Pago"),o.k0s()(),o.j41(6,"ion-card-content")(7,"ion-radio-group",4),o.bIt("ionChange",function(r){return e.onPaymentChange(r.detail.value)}),o.j41(8,"ion-card",5),o.bIt("click",function(){return e.onPaymentChange("efectivo")}),o.j41(9,"ion-item"),o.nrm(10,"ion-icon",6),o.j41(11,"ion-label"),o.EFF(12,"Efectivo en Negocio"),o.k0s(),o.nrm(13,"ion-radio",7),o.k0s()(),o.j41(14,"ion-card",5),o.bIt("click",function(){return e.onPaymentChange("paypal")}),o.j41(15,"ion-item"),o.nrm(16,"ion-icon",8),o.j41(17,"ion-label"),o.EFF(18,"Tarjeta"),o.k0s(),o.nrm(19,"ion-radio",9),o.k0s()()()()(),o.j41(20,"ion-card",10)(21,"ion-card-header")(22,"h3",11),o.EFF(23,"Resumen de compra"),o.k0s()(),o.j41(24,"ion-card-content")(25,"div",12)(26,"span"),o.EFF(27),o.k0s(),o.j41(28,"span"),o.EFF(29),o.nI1(30,"currency"),o.k0s()(),o.DNE(31,eo,6,11,"div",13),o.nrm(32,"div",14),o.DNE(33,no,6,9,"div",15)(34,io,6,4,"div",15)(35,ao,6,9,"div",15)(36,ro,6,9,"div",15),o.k0s()(),o.DNE(37,co,2,0,"div",16)(38,so,4,5,"div",17),o.k0s()),2&t&&(o.Y8G("isModal",!0),o.R7$(),o.Y8G("fullscreen",!0),o.R7$(7),o.AVh("selected","efectivo"===e.selectedPayment),o.R7$(6),o.AVh("selected","paypal"===e.selectedPayment),o.R7$(13),o.SpI("Productos (",(null==e.cart||null==e.cart.detalle_carrito?null:e.cart.detalle_carrito.length)||0,")"),o.R7$(2),o.SpI("",o.iJd(30,15,o.eq3(21,E,null==e.cart?null:e.cart.total))," MXN"),o.R7$(2),o.Y8G("ngForOf",null==e.cart?null:e.cart.detalle_carrito),o.R7$(2),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",e.discountAmount>0),o.R7$(),o.Y8G("ngIf",0===e.discountAmount),o.R7$(),o.Y8G("ngIf","tarjeta"===e.selectedPayment),o.R7$(),o.Y8G("ngIf","efectivo"===e.selectedPayment))},dependencies:[y.Sq,y.bT,s.Jm,s.b_,s.I9,s.ME,s.W9,s.iq,s.uz,s.he,s.KO,s.f0,s.uR,s.Je,N.l,y.QX,y.oe],styles:['@charset "UTF-8";.payment-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{margin:16px;border-radius:16px;box-shadow:0 4px 8px #0000001a}.title[_ngcontent-%COMP%], .summary-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center;color:var(--ion-color-primary)}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;transition:transform .2s ease,background-color .3s ease}.option-card.selected[_ngcontent-%COMP%]{transform:scale(1.05);background-color:var(--ion-color-primary-tint)}.option-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-primary);margin-right:8px}.summary-card[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#343a40}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:1rem}.divider[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;margin:8px 0}.confirm-button-container[_ngcontent-%COMP%], .confirm-button-container-paypal[_ngcontent-%COMP%]{margin:16px}.confirm-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden;transition:background-color .3s ease-in-out}.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden}.confirm-button.animated[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:0%;background:linear-gradient(to right,var(--ion-color-primary),var(--ion-color-secondary),var(--ion-color-tertiary));z-index:1;animation:_ngcontent-%COMP%_slideIn 3s forwards}.confirm-button.animated[_ngcontent-%COMP%]{color:transparent}.confirm-button.animated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.confirm-button.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}@keyframes _ngcontent-%COMP%_slideIn{0%{width:0%}50%{width:100%}to{width:0%}}.total-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.total-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:4px 0}.discounted-price[_ngcontent-%COMP%]{color:green;font-weight:700}.original-price[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;font-size:17px}.descuento[_ngcontent-%COMP%]{font-weight:700;font-size:17px}']}),c})();var go=C(9365);const F=n=>[n,"MXN","symbol-narrow","1.2-2","en-US"];function uo(n,c){1&n&&(o.j41(0,"div",60),o.nrm(1,"ion-icon",61),o.k0s())}function mo(n,c){1&n&&(o.j41(0,"div",60),o.nrm(1,"ion-icon",61),o.k0s())}function fo(n,c){if(1&n&&(o.j41(0,"ion-select-option",62),o.EFF(1),o.k0s()),2&n){const i=c.$implicit;o.Y8G("value",i.value)("disabled",!i.enabled),o.R7$(),o.SpI(" ",i.label," ")}}function _o(n,c){if(1&n&&(o.j41(0,"div",63)(1,"div",64),o.nrm(2,"ion-icon",29),o.j41(3,"span"),o.EFF(4),o.k0s()()()),2&n){const i=o.XpG();o.R7$(4),o.JRh(i.getFormattedDateTime())}}function ho(n,c){if(1&n&&(o.j41(0,"div",45)(1,"span",65),o.nrm(2,"ion-icon",66),o.EFF(3),o.k0s(),o.j41(4,"span",67),o.EFF(5),o.nI1(6,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(3),o.SpI(" Descuento (",i.porcentaje,"%) "),o.R7$(2),o.SpI("-",o.iJd(6,2,o.eq3(8,F,i.discountAmount))," MXN")}}function vo(n,c){if(1&n&&(o.j41(0,"div",68),o.nrm(1,"ion-icon",69),o.j41(2,"span"),o.EFF(3),o.nI1(4,"currency"),o.k0s()()),2&n){const i=o.XpG();o.R7$(3),o.SpI("\xa1Ahorras ",o.iJd(4,1,o.eq3(7,F,i.discountAmount))," MXN!")}}function Mo(n,c){if(1&n&&(o.j41(0,"div",70),o.nrm(1,"ion-icon",71),o.j41(2,"span"),o.EFF(3),o.k0s()()),2&n){const i=o.XpG();o.R7$(),o.Y8G("name","negocio"===i.selectedMethod?"storefront-outline":"bicycle-outline"),o.R7$(2),o.JRh("negocio"===i.selectedMethod?"Recoger en tienda":"Entrega a domicilio")}}const Co=[{path:"",component:(()=>{var n;class c{constructor(t,e){this.router=t,this.utilsSvc=e,this.selectedMethod="",this.discountAmount=0,this.porcentaje=0,this.minDate="",this.fechaRecoleccion="",this.horaRecoleccion="",this.horaEntrada="09:00",this.horaSalida="20:00",this.horaMinimaInput="09:00",this.horaOpciones=[],this.firebaseSvc=(0,o.WQX)(I.f)}ngOnInit(){this.getCartDetails(),this.applyStoredCoupon(),this.setDefaultDate(),this.getHorarioTrabajo().then(()=>{this.generarOpcionesHora()})}getHorarioTrabajo(){var t=this;return(0,v.A)(function*(){try{const e=yield t.firebaseSvc.getDocument("horario/waeYL5UAeC3YyZ8BW3KT");e&&(t.horaEntrada=e.hora_entrada||"09:00",t.horaSalida=e.hora_salida||"20:00")}catch{t.horaEntrada="09:00",t.horaSalida="20:00"}})()}setDefaultDate(){const t=new Date;t.setHours(0,0,0,0),this.minDate=t.toISOString().slice(0,10),this.fechaRecoleccion=this.minDate,this.horaRecoleccion=""}onMethodChange(t){this.selectedMethod=t}onDateOrTimeChange(){if(this.updateHoraMinimaInput(),this.generarOpcionesHora(),this.fechaRecoleccion&&this.horaRecoleccion&&!this.isHoraDentroHorario(this.horaRecoleccion))return this.utilsSvc.presentToast({message:`La hora debe estar entre ${this.horaMinimaInput} y ${this.horaSalida}`,duration:2500,color:"warning",position:"bottom",icon:"time-outline"}),void(this.horaRecoleccion="")}continue(){var t=this;return(0,v.A)(function*(){t.selectedMethod&&t.fechaRecoleccion&&t.horaRecoleccion&&(console.log("Fecha seleccionada por el usuario:",t.fechaRecoleccion),console.log("Hora seleccionada por el usuario:",t.horaRecoleccion),t.cart.fecha_entrega=`${t.fechaRecoleccion}T${t.horaRecoleccion}:00`,t.cart.hora_entrega&&delete t.cart.hora_entrega,t.utilsSvc.saveInLocalStorage("selectedMethod",t.selectedMethod),t.utilsSvc.saveInLocalStorage("carrito_negocio",[t.cart]),console.log("M\xe9todo seleccionado:",t.selectedMethod),"negocio"===t.selectedMethod?(yield t.utilsSvc.presentModal({component:po,componentProps:{}}))&&t.utilsSvc.dismissModal(!0):"domicilio"===t.selectedMethod&&(yield t.utilsSvc.presentModal({component:go.H,componentProps:{}}))&&(yield t.utilsSvc.presentModal({component:to,componentProps:{}}))&&t.utilsSvc.dismissModal(!0))})()}getCartDetails(){this.cart=this.utilsSvc.getFromLocalStorage("carrito_negocio")[0]}applyStoredCoupon(){if(this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje)}}getTotalAmount(){return this.cart?this.discountAmount>0?this.cart.total-this.discountAmount:this.cart.total:0}generarOpcionesHora(){let t=[];if(!this.horaEntrada||!this.horaSalida)return void(this.horaOpciones=[]);const[e,a]=this.horaEntrada.split(":").map(Number),[r,l]=this.horaSalida.split(":").map(Number);let d=new Date,u=null;this.fechaRecoleccion&&(u=new Date(this.fechaRecoleccion));let m=u&&u.getFullYear()===d.getFullYear()&&u.getMonth()===d.getMonth()&&u.getDate()+1===d.getDate();if(console.log("esHoy:",m),m&&60*d.getHours()+d.getMinutes()>=60*r+l)return this.horaOpciones=[],void this.utilsSvc.presentToast({message:"El horario de hoy ya termin\xf3. Por favor selecciona otro d\xeda.",duration:3500,color:"danger",position:"top",icon:"time-outline"});let p=e,M=a;if(m){const _=d.getHours(),g=d.getMinutes();let f=15*Math.ceil(g/15),P=_;60===f&&(P++,f=0),P<e||P===e&&f<a?(p=e,M=a):(p=P,M=f)}let x=60*p+M,b=60*r+l;for(let _=60*e+a;_<=b;_+=15){if(m&&_<x)continue;const f=_%60,P=`${Math.floor(_/60).toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`,w=this.formatHoraAMPM(P);t.push({value:P,label:w,enabled:!0})}this.horaOpciones=t,this.horaRecoleccion&&!t.find(_=>_.value===this.horaRecoleccion)&&(this.horaRecoleccion="")}updateHoraMinimaInput(){if(!this.fechaRecoleccion)return void(this.horaMinimaInput=this.horaEntrada);const t=new Date,e=new Date(this.fechaRecoleccion);if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()){const a=t.getHours(),r=t.getMinutes(),[l,d]=this.horaEntrada.split(":").map(Number);let u=Math.max(l,a),m=u===a?r:d;(a<l||a===l&&r<d)&&(u=l,m=d),this.horaMinimaInput=`${u.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}else this.horaMinimaInput=this.horaEntrada}isHoraDentroHorario(t){if(!t)return!1;const[e,a]=t.split(":").map(Number),[r,l]=this.horaEntrada.split(":").map(Number),[d,u]=this.horaSalida.split(":").map(Number),m=60*e+a;return m>=60*r+l&&m<=60*d+u}combineDateTime(){return this.fechaRecoleccion&&this.horaRecoleccion?`${this.fechaRecoleccion}T${this.horaRecoleccion}:00`:""}getFormattedDateTime(){if(!this.fechaRecoleccion||!this.horaRecoleccion)return"";const t=this.combineDateTime();return new Date(t).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}formatHoraAMPM(t){if(!t)return"";const[e,a]=t.split(":").map(Number),r=e>=12?"PM":"AM";return`${e%12||12}:${a.toString().padStart(2,"0")} ${r}`}}return(n=c).\u0275fac=function(t){return new(t||n)(o.rXU(k.Ix),o.rXU(j.T))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-metodo-entrega-negocio"]],decls:116,vars:36,consts:[["title","M\xe9todo de entrega",3,"showMenu"],[3,"fullscreen"],[1,"container"],[1,"hero-section"],["name","fast-food-outline",1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"content-grid"],[1,"delivery-section"],[1,"delivery-options"],[1,"delivery-option",3,"click"],[1,"option-header"],[1,"option-icon-wrapper"],["name","storefront",1,"option-main-icon"],["class","option-badge",4,"ngIf"],[1,"option-content"],[1,"option-features"],[1,"feature"],["name","time-outline"],["name","cash-outline"],["name","bicycle",1,"option-main-icon"],["name","location-outline"],[1,"date-section"],[1,"date-card"],[1,"date-header"],["name","calendar-outline",1,"date-icon"],[1,"datetime-container"],[1,"datetime-field"],[1,"datetime-label"],["name","calendar-outline"],[1,"input-icon-wrapper"],["type","date","placeholder","Selecciona la fecha",1,"custom-datetime",3,"ngModelChange","ionChange","ngModel","min"],["name","calendar-outline",1,"input-suffix-icon"],[1,"datetime-hint"],["name","information-circle-outline"],["placeholder","Selecciona la hora","interface","popover",1,"custom-datetime",3,"ngModelChange","ionChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],["name","time-outline",1,"input-suffix-icon"],["class","selected-datetime",4,"ngIf"],[1,"summary-section"],[1,"summary-card"],[1,"summary-header"],["name","receipt-outline",1,"summary-icon"],[1,"summary-content"],[1,"order-details"],[1,"detail-row"],[1,"detail-label"],["name","bag-outline"],[1,"detail-value"],["class","detail-row",4,"ngIf"],[1,"summary-divider"],[1,"total-section"],[1,"total-row"],[1,"total-label"],[1,"total-amount"],["class","savings",4,"ngIf"],[1,"footer-content"],["class","selected-method",4,"ngIf"],["expand","block","size","large",1,"continue-button",3,"click","disabled"],["name","arrow-forward-outline","slot","end"],[1,"option-badge"],["name","checkmark-circle"],[3,"value","disabled"],[1,"selected-datetime"],[1,"datetime-preview"],[1,"detail-label","discount-label"],["name","pricetag-outline"],[1,"detail-value","discount-value"],[1,"savings"],["name","happy-outline"],[1,"selected-method"],[3,"name"]],template:function(t,e){1&t&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content",1)(2,"div",2)(3,"div",3),o.nrm(4,"ion-icon",4),o.j41(5,"h1",5),o.EFF(6,"\xbfC\xf3mo quieres recibir tu pedido?"),o.k0s(),o.j41(7,"p",6),o.EFF(8,"Elige la opci\xf3n que mejor se adapte a ti"),o.k0s()(),o.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),o.bIt("click",function(){return e.onMethodChange("negocio")}),o.j41(13,"div",11)(14,"div",12),o.nrm(15,"ion-icon",13),o.k0s(),o.DNE(16,uo,2,0,"div",14),o.k0s(),o.j41(17,"div",15)(18,"h3"),o.EFF(19,"Recoger en tienda"),o.k0s(),o.j41(20,"p"),o.EFF(21,"Retira tu pedido directamente en nuestro local"),o.k0s(),o.j41(22,"div",16)(23,"div",17),o.nrm(24,"ion-icon",18),o.j41(25,"span"),o.EFF(26,"15-20 min"),o.k0s()(),o.j41(27,"div",17),o.nrm(28,"ion-icon",19),o.j41(29,"span"),o.EFF(30,"Sin costo"),o.k0s()()()()(),o.j41(31,"div",10),o.bIt("click",function(){return e.onMethodChange("domicilio")}),o.j41(32,"div",11)(33,"div",12),o.nrm(34,"ion-icon",20),o.k0s(),o.DNE(35,mo,2,0,"div",14),o.k0s(),o.j41(36,"div",15)(37,"h3"),o.EFF(38,"Entrega a domicilio"),o.k0s(),o.j41(39,"p"),o.EFF(40,"Recibe tu pedido en la comodidad de tu hogar"),o.k0s(),o.j41(41,"div",16)(42,"div",17),o.nrm(43,"ion-icon",18),o.j41(44,"span"),o.EFF(45,"30-45 min"),o.k0s()(),o.j41(46,"div",17),o.nrm(47,"ion-icon",21),o.j41(48,"span"),o.EFF(49,"A tu puerta"),o.k0s()()()()()(),o.j41(50,"div",22)(51,"div",23)(52,"div",24),o.nrm(53,"ion-icon",25),o.j41(54,"h3"),o.EFF(55,"Fecha y hora de entrega"),o.k0s()(),o.j41(56,"div",26)(57,"div",27)(58,"label",28),o.nrm(59,"ion-icon",29),o.EFF(60," Fecha "),o.k0s(),o.j41(61,"div",30)(62,"ion-input",31),o.mxI("ngModelChange",function(r){return o.DH7(e.fechaRecoleccion,r)||(e.fechaRecoleccion=r),r}),o.bIt("ionChange",function(){return e.onDateOrTimeChange()}),o.k0s(),o.nrm(63,"ion-icon",32),o.k0s(),o.j41(64,"small",33),o.nrm(65,"ion-icon",34),o.EFF(66," Disponible desde hoy hasta 1 mes "),o.k0s()(),o.j41(67,"div",27)(68,"label",28),o.nrm(69,"ion-icon",18),o.EFF(70," Hora "),o.k0s(),o.j41(71,"div",30)(72,"ion-select",35),o.mxI("ngModelChange",function(r){return o.DH7(e.horaRecoleccion,r)||(e.horaRecoleccion=r),r}),o.bIt("ionChange",function(){return e.onDateOrTimeChange()}),o.DNE(73,fo,2,3,"ion-select-option",36),o.k0s(),o.nrm(74,"ion-icon",37),o.k0s(),o.j41(75,"small",33),o.nrm(76,"ion-icon",34),o.EFF(77," M\xednimo 2 horas de anticipaci\xf3n (9:00 AM - 8:00 PM) "),o.k0s()()(),o.DNE(78,_o,5,1,"div",38),o.k0s()()(),o.j41(79,"div",39)(80,"div",40)(81,"div",41),o.nrm(82,"ion-icon",42),o.j41(83,"h3"),o.EFF(84,"Resumen del pedido"),o.k0s()(),o.j41(85,"div",43)(86,"div",44)(87,"div",45)(88,"span",46),o.nrm(89,"ion-icon",47),o.EFF(90," Productos "),o.k0s(),o.j41(91,"span",48),o.EFF(92),o.k0s()(),o.j41(93,"div",45)(94,"span",46),o.EFF(95,"Subtotal"),o.k0s(),o.j41(96,"span",48),o.EFF(97),o.nI1(98,"currency"),o.k0s()(),o.DNE(99,ho,7,10,"div",49),o.k0s(),o.nrm(100,"div",50),o.j41(101,"div",51)(102,"div",52)(103,"span",53),o.EFF(104,"Total a pagar"),o.k0s(),o.j41(105,"span",54),o.EFF(106),o.nI1(107,"currency"),o.k0s()(),o.DNE(108,vo,5,9,"div",55),o.k0s()()()()()()(),o.j41(109,"ion-footer")(110,"ion-toolbar")(111,"div",56),o.DNE(112,Mo,4,2,"div",57),o.j41(113,"ion-button",58),o.bIt("click",function(){return e.continue()}),o.nrm(114,"ion-icon",59),o.EFF(115," Continuar con el pedido "),o.k0s()()()()),2&t&&(o.Y8G("showMenu",!0),o.R7$(),o.Y8G("fullscreen",!0),o.R7$(11),o.AVh("selected","negocio"===e.selectedMethod),o.R7$(4),o.Y8G("ngIf","negocio"===e.selectedMethod),o.R7$(15),o.AVh("selected","domicilio"===e.selectedMethod),o.R7$(4),o.Y8G("ngIf","domicilio"===e.selectedMethod),o.R7$(27),o.R50("ngModel",e.fechaRecoleccion),o.Y8G("min",e.minDate),o.R7$(10),o.R50("ngModel",e.horaRecoleccion),o.R7$(),o.Y8G("ngForOf",e.horaOpciones),o.R7$(5),o.Y8G("ngIf",e.fechaRecoleccion&&e.horaRecoleccion),o.R7$(14),o.SpI("",(null==e.cart||null==e.cart.detalle_carrito?null:e.cart.detalle_carrito.length)||0," items"),o.R7$(5),o.SpI("",o.iJd(98,20,o.eq3(32,F,null==e.cart?null:e.cart.total))," MXN"),o.R7$(2),o.Y8G("ngIf",e.discountAmount>0),o.R7$(7),o.SpI("",o.iJd(107,26,o.eq3(34,F,e.getTotalAmount()))," MXN"),o.R7$(2),o.Y8G("ngIf",e.discountAmount>0),o.R7$(4),o.Y8G("ngIf",e.selectedMethod),o.R7$(),o.Y8G("disabled",!e.selectedMethod||!e.fechaRecoleccion||!e.horaRecoleccion))},dependencies:[y.Sq,y.bT,S.BC,S.vS,s.Jm,s.W9,s.M0,s.iq,s.$w,s.Nm,s.Ip,s.ai,s.Je,s.Gw,N.l,y.oe],styles:['ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #a3a3a3 0%, #e2e2e2 100%);--padding-start: 0;--padding-end: 0}.container[_ngcontent-%COMP%]{min-height:100vh;padding:0 16px 100px}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#fff}.hero-section[_ngcontent-%COMP%]   .hero-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:16px;opacity:.9}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.hero-section[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0;font-weight:400}.content-grid[_ngcontent-%COMP%]{display:grid;gap:24px;max-width:1200px;margin:0 auto}@media (min-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr;gap:32px}}.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{display:grid;gap:20px;margin-bottom:24px}@media (min-width: 480px){.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:16px}}@media (min-width: 768px){.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}.delivery-option[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:3px solid transparent;box-shadow:0 8px 32px #0000001a;position:relative;overflow:hidden}.delivery-option[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#667eea0d,#764ba20d);opacity:0;transition:opacity .3s ease}.delivery-option[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 16px 48px #00000026}.delivery-option[_ngcontent-%COMP%]:hover:before{opacity:1}.delivery-option[_ngcontent-%COMP%]:hover   .option-main-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.delivery-option.selected[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);transform:translateY(-2px);box-shadow:0 12px 40px rgba(var(--ion-color-primary-rgb),.3)}.delivery-option.selected[_ngcontent-%COMP%]:before{opacity:1;background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-secondary-rgb),.1))}.delivery-option.selected[_ngcontent-%COMP%]   .option-main-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);transform:scale(1.05)}.delivery-option.selected[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.option-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative;z-index:1}.option-icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#f8f9fa,#e9ecef);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0000001a}.option-main-icon[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--ion-color-medium);transition:all .3s ease}.option-badge[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--ion-color-success);border-radius:50%;display:flex;align-items:center;justify-content:center}.option-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem}.option-content[_ngcontent-%COMP%]{position:relative;z-index:1}.option-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin:0 0 8px;color:var(--ion-color-dark);transition:color .3s ease}.option-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.95rem;margin:0 0 16px;line-height:1.4}.option-features[_ngcontent-%COMP%]{display:flex;gap:16px}.option-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:var(--ion-color-medium)}.option-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.date-section[_ngcontent-%COMP%]{margin-top:24px}.date-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 8px 32px #0000001a}.date-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.date-header[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-primary)}.date-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:var(--ion-color-dark)}.time-section[_ngcontent-%COMP%]{margin-top:24px}.time-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 8px 32px #0000001a}.time-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.time-header[_ngcontent-%COMP%]   .time-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-secondary)}.time-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:var(--ion-color-dark)}.custom-datetime[_ngcontent-%COMP%]{width:100%;--background: var(--ion-color-light);color:#000;--border-radius: 12px;--padding: 16px;--box-shadow: 0px 4px 8px rgba(0, 0, 0, .1);border:2px solid #f0f0f0;transition:border-color .3s ease}@media (max-width: 767px){.summary-section[_ngcontent-%COMP%]{order:-1}}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 8px 32px #0000001a;position:sticky;top:20px}.summary-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding:20px 24px;display:flex;align-items:center;gap:12px}.summary-header[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{font-size:1.5rem}.summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.summary-content[_ngcontent-%COMP%]{padding:24px}.order-details[_ngcontent-%COMP%]{margin-bottom:20px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ion-color-medium);font-size:.95rem}.detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.detail-row[_ngcontent-%COMP%]   .detail-label.discount-label[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:600}.detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-dark)}.detail-row[_ngcontent-%COMP%]   .detail-value.discount-value[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.summary-divider[_ngcontent-%COMP%]{height:2px;background:linear-gradient(to right,transparent,var(--ion-color-primary),transparent);margin:16px 0;border-radius:2px}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--ion-color-dark)}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:var(--ion-color-primary)}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,rgba(var(--ion-color-success-rgb),.1),rgba(var(--ion-color-success-rgb),.05));border-radius:12px;margin-top:12px}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-success);font-size:1.2rem}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600;font-size:.9rem}ion-footer[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #f0f0f0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--padding-start: 16px;--padding-end: 16px;--padding-top: 16px;--padding-bottom: 16px}.footer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.selected-method[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(var(--ion-color-primary-rgb),.1);border-radius:8px;font-size:.9rem;color:var(--ion-color-primary);font-weight:600}.selected-method[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.continue-button[_ngcontent-%COMP%]{--border-radius: 16px;--padding-start: 24px;--padding-end: 24px;height:56px;font-size:1.1rem;font-weight:600;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.4);transition:all .3s ease}.continue-button[_ngcontent-%COMP%]:not([disabled]):hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(var(--ion-color-primary-rgb),.5)}.continue-button[disabled][_ngcontent-%COMP%]{opacity:.5;background:var(--ion-color-medium);box-shadow:none}.continue-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.delivery-option[_ngcontent-%COMP%], .date-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease-out}.delivery-option[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.delivery-option[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.date-card[_ngcontent-%COMP%]{animation-delay:.3s}.time-card[_ngcontent-%COMP%]{animation-delay:.4s}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0 12px 100px}.hero-section[_ngcontent-%COMP%]{padding:30px 16px}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem}.hero-section[_ngcontent-%COMP%]   .hero-icon[_ngcontent-%COMP%]{font-size:3rem}.delivery-option[_ngcontent-%COMP%], .date-card[_ngcontent-%COMP%], .time-card[_ngcontent-%COMP%]{padding:20px}.option-features[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.summary-content[_ngcontent-%COMP%]{padding:20px}}.datetime-container[_ngcontent-%COMP%]{display:grid;gap:20px}@media (min-width: 480px){.datetime-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:16px}}.datetime-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.datetime-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem;font-weight:600;color:var(--ion-color-medium)}.datetime-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.datetime-label[_ngcontent-%COMP%]   ion-icon[name=calendar-outline][_ngcontent-%COMP%]{color:var(--ion-color-primary)!important}.custom-datetime[_ngcontent-%COMP%]{width:100%;--background: var(--ion-color-light);--color: var(--ion-color-primary);--border-radius: 12px;--padding: 16px;--box-shadow: 0px 4px 8px rgba(0, 0, 0, .1);border:2px solid #f0f0f0;transition:border-color .3s ease}.custom-datetime[_ngcontent-%COMP%]:focus-within{border-color:var(--ion-color-primary)}.datetime-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.8rem;color:var(--ion-color-medium);margin-top:4px}.datetime-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-primary)}.selected-datetime[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-secondary-rgb),.05));border-radius:12px;border:2px solid rgba(var(--ion-color-primary-rgb),.2)}.datetime-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:600;color:var(--ion-color-primary)}.datetime-preview[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.datetime-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;text-transform:capitalize}ion-item.date-time-item[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date]), ion-item[_ngcontent-%COMP%]:has(ion-select){background:linear-gradient(90deg,#f8fafc 0%,var(--ion-color-primary-tint) 100%);border-radius:14px;margin-bottom:18px;box-shadow:0 4px 16px #28a74517;border:1.5px solid var(--ion-color-primary-tint);position:relative;transition:box-shadow .2s,border-color .2s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-label[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-primary);font-size:1.08rem;letter-spacing:.5px;margin-bottom:4px;display:flex;align-items:center;gap:6px}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-input[type=date][_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary-tint);border-radius:8px;padding:12px 16px;font-size:1.15rem;background:#fff;color:var(--ion-color-dark);font-weight:600;box-shadow:0 2px 8px #28a74512;transition:border-color .2s,box-shadow .2s,background .2s;outline:none;margin-top:6px}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-input[type=date][_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);background:linear-gradient(90deg,#e9f5e1,#fff);box-shadow:0 0 0 3px #28a74526;animation:inputFocusPulse .3s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-input[type=date][_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary-shade);background:#f4fff4}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-input[type=date][_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium);font-weight:400;opacity:.8}ion-item.date-time-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-select[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary-tint);border-radius:8px;padding:12px 16px;font-size:1.15rem;background:#fff;color:var(--ion-color-dark);font-weight:600;box-shadow:0 2px 8px #28a74512;transition:border-color .2s,box-shadow .2s,background .2s;outline:none;margin-top:6px}ion-item.date-time-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-select[_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);background:linear-gradient(90deg,#e9f5e1,#fff);box-shadow:0 0 0 3px #28a74526;animation:inputFocusPulse .3s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-select[_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary-shade);background:#f4fff4}ion-item.date-time-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-select[_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium);font-weight:400;opacity:.8}ion-item.date-time-item[_ngcontent-%COMP%]   ion-select-option[disabled][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-select-option[disabled][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select-option[disabled][_ngcontent-%COMP%]{color:var(--ion-color-medium);background:#f5f5f5;opacity:.7;cursor:not-allowed}.input-icon-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon-wrapper[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .input-icon-wrapper[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{flex:1 1 auto}.input-suffix-icon[_ngcontent-%COMP%]{position:absolute;right:12px;font-size:1.3rem;color:var(--ion-color-primary);pointer-events:none;opacity:.8;z-index:2}']}),c})()}];let yo=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[k.iI.forChild(Co),k.iI]}),c})();var bo=C(7383);let Po=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[y.MD,S.YN,s.bv,yo,bo.G]}),c})()}}]);