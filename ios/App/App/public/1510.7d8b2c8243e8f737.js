"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1510],{1510:(di,$e,w)=>{w.r($e),w.d($e,{HorarioPageModule:()=>Zr});var u=w(177),O=w(9417),_=w(5933),Ce=w(8265),U=w(467),o=w(4438),pe=w(7852),ht=w(1362),ge=w(8041),I=w(1076);class b{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}b.UNAUTHENTICATED=new b(null),b.GOOGLE_CREDENTIALS=new b("google-credentials-uid"),b.FIRST_PARTY=new b("first-party-uid"),b.MOCK_USER=new b("mock-user");let F="10.14.0";const E=new ge.Vy("@firebase/firestore");function mt(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function P(i="Unexpected state"){const e=`FIRESTORE (${F}) INTERNAL ASSERTION FAILED: `+i;throw function M(i,...e){if(E.logLevel<=ge.$b.ERROR){const t=e.map(mt);E.error(`Firestore (${F}): ${i}`,...t)}}(e),new Error(e)}function $(i,e){i||P()}const p="invalid-argument",J="failed-precondition";class f extends I.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class an{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(b.UNAUTHENTICATED))}shutdown(){}}class gi{constructor(e){this.auth=null,e.onInit(t=>{this.auth=t})}getToken(){return this.auth?this.auth.getToken().then(e=>e?($("string"==typeof e.accessToken),new an(e.accessToken,new b(this.auth.getUid()))):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class _i{constructor(e,t,n){this.t=e,this.i=t,this.o=n,this.type="FirstParty",this.user=b.FIRST_PARTY,this.u=new Map}l(){return this.o?this.o():null}get headers(){this.u.set("X-Goog-AuthUser",this.t);const e=this.l();return e&&this.u.set("Authorization",e),this.i&&this.u.set("X-Goog-Iam-Authorization-Token",this.i),this.u}}class yi{constructor(e,t,n){this.t=e,this.i=t,this.o=n}getToken(){return Promise.resolve(new _i(this.t,this.i,this.o))}start(e,t){e.enqueueRetryable(()=>t(b.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pi{constructor(e){this.h=e,this.appCheck=null,e.onInit(t=>{this.appCheck=t})}getToken(){return this.appCheck?this.appCheck.getToken().then(e=>e?($("string"==typeof e.token),new vi(e.token)):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class Ee{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ee("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ee&&e.projectId===this.projectId&&e.database===this.database}}class Me{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(),void 0===n?n=e.length-t:n>e.length-t&&P(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Me.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Me?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.get(r),a=t.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class A extends Me{construct(e,t,n){return new A(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new f(p,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new A(t)}static emptyPath(){return new A([])}}const Ti=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class H extends Me{construct(e,t,n){return new H(e,t,n)}static isValidIdentifier(e){return Ti.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),H.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new H(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new f(p,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const c=e[r];if("\\"===c){if(r+1===e.length)throw new f(p,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new f(p,"Path has invalid escape sequence: "+e);n+=l,r+=2}else"`"===c?(a=!a,r++):"."!==c||a?(n+=c,r++):(s(),r++)}if(s(),a)throw new f(p,"Unterminated ` in path: "+e);return new H(t)}static emptyPath(){return new H([])}}class k{constructor(e){this.path=e}static fromPath(e){return new k(A.fromString(e))}static fromName(e){return new k(A.fromString(e).popFirst(5))}static empty(){return new k(A.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===A.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return A.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new k(new A(e.slice()))}}function qe(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":P()}function Ge(i){return 0===i&&1/i==-1/0}var mn,y;function D(i,e){return i<e?-1:i>e?1:0}function pn(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}(y=mn||(mn={}))[y.OK=0]="OK",y[y.CANCELLED=1]="CANCELLED",y[y.UNKNOWN=2]="UNKNOWN",y[y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",y[y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",y[y.NOT_FOUND=5]="NOT_FOUND",y[y.ALREADY_EXISTS=6]="ALREADY_EXISTS",y[y.PERMISSION_DENIED=7]="PERMISSION_DENIED",y[y.UNAUTHENTICATED=16]="UNAUTHENTICATED",y[y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",y[y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",y[y.ABORTED=10]="ABORTED",y[y.OUT_OF_RANGE=11]="OUT_OF_RANGE",y[y.UNIMPLEMENTED=12]="UNIMPLEMENTED",y[y.INTERNAL=13]="INTERNAL",y[y.UNAVAILABLE=14]="UNAVAILABLE",y[y.DATA_LOSS=15]="DATA_LOSS";class Oi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Z{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Oi("Invalid base64 string: "+s):s}}(e);return new Z(t)}static fromUint8Array(e){const t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Z(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return D(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Z.EMPTY_BYTE_STRING=new Z("");const Ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oe(i){if($(!!i),"string"==typeof i){let e=0;const t=Ri.exec(i);if($(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:x(i.seconds),nanos:x(i.nanos)}}function x(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ie(i){return"string"==typeof i?Z.fromBase64String(i):Z.fromUint8Array(i)}class G{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new f(p,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new f(p,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new f(p,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new f(p,"Timestamp seconds out of range: "+e)}static now(){return G.fromMillis(Date.now())}static fromDate(e){return G.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new G(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?D(this.nanoseconds,e.nanoseconds):D(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}function be(i){const e=oe(i.mapValue.fields.__local_write_time__.timestampValue);return new G(e.seconds,e.nanos)}const ze={fields:{__type__:{stringValue:"__max__"}}};function se(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?function wt(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}(i)?4:"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue?9007199254740991:"__vector__"===(null===(r=((null===(n=null==(t=i)?void 0:t.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)?10:11:P();var t,n,r}function ye(i,e){if(i===e)return!0;const t=se(i);if(t!==se(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return be(i).isEqual(be(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=oe(r.timestampValue),c=oe(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return s=e,Ie(i.bytesValue).isEqual(Ie(s.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return x(r.geoPointValue.latitude)===x(s.geoPointValue.latitude)&&x(r.geoPointValue.longitude)===x(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return x(r.integerValue)===x(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=x(r.doubleValue),c=x(s.doubleValue);return a===c?Ge(a)===Ge(c):isNaN(a)&&isNaN(c)}return!1}(i,e);case 9:return function Pt(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}(i.arrayValue.values||[],e.arrayValue.values||[],ye);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},c=s.mapValue.fields||{};if(pn(a)!==pn(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(void 0===c[l]||!ye(a[l],c[l])))return!1;return!0}(i,e);default:return P()}var s}function Oe(i,e){return void 0!==(i.values||[]).find(t=>ye(t,e))}function Be(i,e){if(i===e)return 0;const t=se(i),n=se(e);if(t!==n)return D(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return D(i.booleanValue,e.booleanValue);case 2:return function(s,a){const c=x(s.integerValue||s.doubleValue),l=x(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(i,e);case 3:return _n(i.timestampValue,e.timestampValue);case 4:return _n(be(i),be(e));case 5:return D(i.stringValue,e.stringValue);case 6:return function(s,a){const c=Ie(s),l=Ie(a);return c.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){const h=D(c[d],l[d]);if(0!==h)return h}return D(c.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,a){const c=D(x(s.latitude),x(a.latitude));return 0!==c?c:D(x(s.longitude),x(a.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return yn(i.arrayValue,e.arrayValue);case 10:return function(s,a){var c,l,d,h;const v=null===(c=(s.fields||{}).value)||void 0===c?void 0:c.arrayValue,C=null===(l=(a.fields||{}).value)||void 0===l?void 0:l.arrayValue,j=D((null===(d=null==v?void 0:v.values)||void 0===d?void 0:d.length)||0,(null===(h=null==C?void 0:C.values)||void 0===h?void 0:h.length)||0);return 0!==j?j:yn(v,C)}(i.mapValue,e.mapValue);case 11:return function(s,a){if(s===ze&&a===ze)return 0;if(s===ze)return 1;if(a===ze)return-1;const c=s.fields||{},l=Object.keys(c),d=a.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const m=D(l[g],h[g]);if(0!==m)return m;const v=Be(c[l[g]],d[h[g]]);if(0!==v)return v}return D(l.length,h.length)}(i.mapValue,e.mapValue);default:throw P()}}function _n(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return D(i,e);const t=oe(i),n=oe(e),r=D(t.seconds,n.seconds);return 0!==r?r:D(t.nanos,n.nanos)}function yn(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const s=Be(t[r],n[r]);if(s)return s}return D(t.length,n.length)}function Qe(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function vn(i){return!!i&&"arrayValue"in i}class Cn{}class z extends Cn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ki(e,t,n):"array-contains"===t?new Fi(e,n):"in"===t?new Di(e,n):"not-in"===t?new Si(e,n):"array-contains-any"===t?new Ni(e,n):new z(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xi(e,n):new Vi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Be(t,this.value)):null!==t&&se(this.value)===se(t)&&this.matchesComparison(Be(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends z{constructor(e,t,n){super(e,t,n),this.key=k.fromName(n.referenceValue)}matches(e){const t=k.comparator(e.key,this.key);return this.matchesComparison(t)}}class xi extends z{constructor(e,t){super(e,"in",t),this.keys=Mn(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vi extends z{constructor(e,t){super(e,"not-in",t),this.keys=Mn(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mn(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(n=>k.fromName(n.referenceValue))}class Fi extends z{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vn(t)&&Oe(t.arrayValue,this.value)}}class Di extends z{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Oe(this.value.arrayValue,t)}}class Si extends z{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Oe(this.value.arrayValue,t)}}class Ni extends z{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Oe(this.value.arrayValue,n))}}class N{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:N.RED,this.left=null!=r?r:N.EMPTY,this.right=null!=s?s:N.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new N(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return N.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return N.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,N.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,N.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();const e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}}N.EMPTY=null,N.RED=!0,N.BLACK=!1,N.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(e,t,n,r,s){return this}insert(e,t,n){return new N(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class le{constructor(e,t=null,n=[],r=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.S=null,this.N=null,this.O=null}}function kn(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ge(e)?"-0":e}}class Gi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function It(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zi(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function bt(i,e){return function Ot(i,e){const t=(r=i,new A(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===e?t:t.child(e)}(i,e).canonicalString()}function kt(i){return new Gi(i,!0)}const Ve=new Map;class zn{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new f(p,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new f(p,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(s,a,c,l){if(!0===a&&!0===l)throw new f(p,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=function dn(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new f(p,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new f(p,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new f(p,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class te{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zn({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new f(J,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new f(J,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zn(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new fi;switch(n.type){case"firstParty":return new yi(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new f(p,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,U.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Ve.get(t);n&&(function R(i,...e){if(E.logLevel<=ge.$b.DEBUG){const t=e.map(mt);E.debug(`Firestore (${F}): ${i}`,...t)}}("ComponentProvider","Removing Datastore"),Ve.delete(t),n.terminate())}(this),Promise.resolve()}}class Q{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Q(this.firestore,e,this._query)}}class S{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new K(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new S(this.firestore,e,this._key)}}class K extends Q{constructor(e,t,n){super(e,t,new le(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new S(this.firestore,null,new k(e))}withConverter(e){return new K(this.firestore,e,this._path)}}class Pe{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pe(Z.fromBase64String(e))}catch(t){throw new f(p,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pe(Z.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ue{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new f(p,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new H(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class De{constructor(e){this._methodName=e}}class St{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new f(p,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new f(p,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return D(this._lat,e._lat)||D(this._long,e._long)}}class nt{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}}const or=/^__.*__$/;function Yn(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}class it{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.tt(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get et(){return this.settings.et}rt(e){return new it(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}nt(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.rt({path:n,it:!1});return r.st(e),r}ot(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.rt({path:n,it:!1});return r.tt(),r}ut(e){return this.rt({path:void 0,it:!0})}_t(e){return ot(e,this.settings.methodName,this.settings.ct||!1,this.path,this.settings.lt)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tt(){if(this.path)for(let e=0;e<this.path.length;e++)this.st(this.path.get(e))}st(e){if(0===e.length)throw this._t("Document fields must not be empty");if(Yn(this.et)&&or.test(e))throw this._t('Document fields cannot begin and end with "__"')}}class ar{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kt(e)}ht(e,t,n,r=!1){return new it({et:e,methodName:t,lt:n,path:H.emptyPath(),it:!1,ct:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function he(i,e){if(Jn(i=(0,I.Ku)(i)))return function Ut(i,e,t){if(!Jn(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const n=qe(t);throw e._t("an object"===n?i+" a custom object":i+" "+n)}var r}("Unsupported field value:",e,i),function Xn(i,e){const t={};return function(r){for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s))return!1;return!0}(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):function Ae(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}(i,(n,r)=>{const s=he(r,e.nt(n));null!=s&&(t[n]=s)}),{mapValue:{fields:t}}}(i,e);if(i instanceof De)return function(n,r){if(!Yn(r.et))throw r._t(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._t(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.it&&4!==e.et)throw e._t("Nested arrays are not supported");return function(n,r){const s=[];let a=0;for(const c of n){let l=he(c,r.ut(a));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if(null===(n=(0,I.Ku)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return function xn(i,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!Ge(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?function(n){return{integerValue:""+n}}(e):kn(i,e);var n}(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const s=G.fromDate(n);return{timestampValue:It(r.serializer,s)}}if(n instanceof G){const s=new G(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:It(r.serializer,s)}}if(n instanceof St)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pe)return{bytesValue:zi(r.serializer,n._byteString)};if(n instanceof S){const s=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw r._t(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bt(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof nt)return c=r,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:n.toArray().map(l=>{if("number"!=typeof l)throw c._t("VectorValues must only contain numeric values.");return kn(c.serializer,l)})}}}}};var c;throw r._t(`Unsupported field value: ${qe(n)}`)}(i,e)}function Jn(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof G||i instanceof St||i instanceof Pe||i instanceof S||i instanceof De||i instanceof nt)}const cr=new RegExp("[~\\*/\\[\\]]");function ot(i,e,t,n,r){const s=n&&!n.isEmpty(),a=void 0!==r;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${r}`),l+=")"),new f(p,c+i+l)}function Bt(i,e){return"string"==typeof e?function Gt(i,e,t){if(e.search(cr)>=0)throw ot(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ue(...e.split("."))._internalPath}catch{throw ot(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}(i,e):e instanceof ue?e._internalPath:e._delegate._internalPath}class Qt{}class je extends Qt{}class Le extends je{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Le(e,t,n)}_apply(e){const t=this._parse(e);return function ri(i,e){const t=function(r,s){for(const a of r)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new f(p,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}(e._query,t),new Q(e.firestore,e.converter,function Et(i,e){const t=i.filters.concat([e]);return new le(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}_parse(e){const t=function de(i){const e=i._freezeSettings(),t=kt(i._databaseId);return new ar(i._databaseId,!!e.ignoreUndefinedProperties,t)}(e.firestore);return function(s,a,c,l,d,h,g){let m;if(d.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new f(p,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){ii(g,h);const v=[];for(const C of g)v.push(ni(l,s,C));m={arrayValue:{values:v}}}else m=ni(l,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||ii(g,h),m=function Wn(i,e,t,n=!1){return he(t,i.ht(n?4:3,e))}(c,"where",g,"in"===h||"not-in"===h);return z.create(d,h,m)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function ur(i,e,t){const n=e,r=Bt("where",i);return Le._create(r,n,t)}function ni(i,e,t){if("string"==typeof(t=(0,I.Ku)(t))){if(""===t)throw new f(p,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!function bn(i){return null!==i.collectionGroup}(e)&&-1!==t.indexOf("/"))throw new f(p,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(A.fromString(t));if(!k.isDocumentKey(n))throw new f(p,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Qe(i,new k(n))}if(t instanceof S)return Qe(i,t._key);throw new f(p,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qe(t)}.`)}function ii(i,e){if(!Array.isArray(i)||0===i.length)throw new f(p,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}F=`${pe.SDK_VERSION}_lite`,(0,pe._registerComponent)(new ht.uA("firestore/lite",(e,{instanceIdentifier:t,options:n})=>{const r=e.getProvider("app").getImmediate(),s=new te(new gi(e.getProvider("auth-internal")),new Pi(e.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new f(p,'"projectId" not provided in firebase.initializeApp.');return new Ee(c.options.projectId,l)}(r,t),r);return n&&s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)("firestore-lite","4.7.3",""),(0,pe.registerVersion)("firestore-lite","4.7.3","esm2017");var si=w(7517),ai=w(2723),vr=w(2784),ci=w(3236),Pr=w(1985),wr=w(9470);function li(i=0,e=ci.E){return i<0&&(i=0),function Cr(i=0,e,t=ci.b){let n=-1;return null!=e&&((0,wr.m)(e)?t=e:n=e),new Pr.c(r=>{let s=function Tr(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(i,i,e)}var ui=w(8461);const Er=["sliderButton"];function Mr(i,e){if(1&i&&(o.j41(0,"ion-item")(1,"ion-label",31)(2,"h3"),o.EFF(3,"Horario seleccionado:"),o.k0s(),o.j41(4,"p"),o.EFF(5),o.nI1(6,"date"),o.k0s(),o.j41(7,"p",32),o.EFF(8),o.nI1(9,"date"),o.k0s()()()),2&i){const t=o.XpG();o.R7$(5),o.JRh(o.brH(6,2,t.fechaHoraRecoleccion,"EEEE, dd 'de' MMMM 'de' yyyy 'a las' HH:mm","es-ES")),o.R7$(3),o.SpI(" Hora actual: ",o.brH(9,6,t.currentTime,"HH:mm","es-ES")," ")}}function Ar(i,e){if(1&i){const t=o.RV6();o.j41(0,"div",33)(1,"div",34),o.nrm(2,"ion-icon",35),o.j41(3,"h2"),o.EFF(4,"Asignaci\xf3n autom\xe1tica en:"),o.k0s(),o.j41(5,"div",36),o.EFF(6),o.k0s(),o.j41(7,"div",37)(8,"p")(9,"strong"),o.EFF(10,"Se asignar\xe1:"),o.k0s(),o.EFF(11),o.k0s(),o.j41(12,"p")(13,"strong"),o.EFF(14,"Tiempo:"),o.k0s(),o.EFF(15),o.k0s()(),o.nrm(16,"ion-progress-bar",38),o.j41(17,"p",39),o.EFF(18," Se asignar\xe1 autom\xe1ticamente seg\xfan la demanda actual "),o.k0s()(),o.j41(19,"ion-button",40),o.bIt("click",function(){o.eBV(t);const r=o.XpG();return o.Njj(r.cancelCountdown())}),o.nrm(20,"ion-icon",41),o.EFF(21," CANCELAR ASIGNACI\xd3N "),o.k0s()()}if(2&i){const t=o.XpG();o.R7$(),o.HbH("countdown-"+(null==t.currentDemandLevel?null:t.currentDemandLevel.level)),o.R7$(5),o.JRh(t.countdown),o.R7$(5),o.SpI(" ",t.getDemandDescription(),""),o.R7$(4),o.SpI(" ",t.estimatedTime,""),o.R7$(),o.Y8G("value",t.getProgressPercentage()/100)("color",null==t.currentDemandLevel?null:t.currentDemandLevel.color)}}function Ir(i,e){if(1&i){const t=o.RV6();o.j41(0,"ion-button",42),o.bIt("click",function(){o.eBV(t);const r=o.XpG();return o.Njj(r.restartCountdown())}),o.nrm(1,"ion-icon",43),o.EFF(2," REINICIAR ASIGNACI\xd3N AUTOM\xc1TICA "),o.k0s()}}function br(i,e){1&i&&(o.j41(0,"ion-button",44),o.nrm(1,"ion-spinner",45),o.EFF(2," Asignando... "),o.k0s())}function Or(i,e){1&i&&(o.j41(0,"p",51),o.nrm(1,"ion-icon",52),o.EFF(2," Selecciona una fecha y hora antes de asignar "),o.k0s())}function Rr(i,e){if(1&i){const t=o.RV6();o.j41(0,"div",46)(1,"ion-label"),o.EFF(2,"Desliza para asignar manualmente"),o.k0s(),o.DNE(3,Or,3,0,"p",47),o.j41(4,"ion-range",48),o.mxI("ngModelChange",function(r){o.eBV(t);const s=o.XpG();return o.DH7(s.sliderValue,r)||(s.sliderValue=r),o.Njj(r)}),o.bIt("ionChange",function(){o.eBV(t);const r=o.XpG();return o.Njj(r.onSliderChange())}),o.nrm(5,"ion-icon",49)(6,"ion-icon",50),o.k0s()()}if(2&i){const t=o.XpG();o.R7$(3),o.Y8G("ngIf",!t.fechaHoraRecoleccion),o.R7$(),o.R50("ngModel",t.sliderValue),o.Y8G("disabled",!t.fechaHoraRecoleccion)}}function kr(i,e){1&i&&(o.j41(0,"div",53),o.nrm(1,"ion-icon",54),o.j41(2,"p"),o.EFF(3,"Pedido en espera de recolecci\xf3n"),o.k0s()())}let xr=(()=>{var i;class e{constructor(){this.fechaHoraRecoleccion="",this.fechaMinima="",this.fechaMaxima="",this.currentTime=new Date,this.estimatedTime="1-3 min",this.autoAssignedTime="",this.countdown=5,this.isCountdownActive=!1,this.isAssigned=!1,this.firebaseSvc=(0,o.WQX)(si.f),this.utilSvc=(0,o.WQX)(ai.T),this.demandLevels={baja:{level:"baja",minTime:1,maxTime:3,color:"success",description:"\xa1S\xfaper r\xe1pido!"},normal:{level:"normal",minTime:2,maxTime:4,color:"success",description:"Entrega express"},moderada:{level:"moderada",minTime:3,maxTime:5,color:"primary",description:"Preparando tu pedido"},media:{level:"media",minTime:4,maxTime:6,color:"primary",description:"Flujo activo"},alta:{level:"alta",minTime:6,maxTime:8,color:"warning",description:"Hora pico"},mediaalta:{level:"mediaalta",minTime:8,maxTime:10,color:"warning",description:"Muy ocupados"},irregular:{level:"irregular",minTime:10,maxTime:15,color:"danger",description:"Demanda impredecible"}},this.sliderValue=0,this.showAnimation=!1}ngOnInit(){this.setFechaMinima(),this.initializeDatetime(),this.initializeTimeSystem(),this.startAutoAssignment()}ngOnDestroy(){this.timeSubscription&&this.timeSubscription.unsubscribe(),this.countdownSubscription&&this.countdownSubscription.unsubscribe()}setFechaMinima(){const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate());this.fechaMinima=r.toISOString();const s=new Date;s.setDate(n.getDate()+7),this.fechaMaxima=s.toISOString()}initializeDatetime(){this.fechaHoraRecoleccion=(new Date).toISOString()}initializeTimeSystem(){this.timeSubscription=li(6e4).subscribe(()=>{this.currentTime=new Date,this.updateDemandLevel(),this.updateAutoAssignedTime()}),this.updateDemandLevel(),this.updateAutoAssignedTime()}updateDemandLevel(){const s=this.currentTime.getHours()+this.currentTime.getMinutes()/60;let a;a=s>=6&&s<7?"media":s>=7&&s<8.5?"alta":s>=8.5&&s<10.5?"moderada":s>=10.5&&s<11.5?"normal":s>=11.5&&s<14?"mediaalta":s>=14&&s<16.5?"baja":s>=16.5&&s<17.5?"moderada":s>=17.5&&s<19?"alta":s>=19&&s<20?"irregular":"baja",this.currentDemandLevel=this.demandLevels[a],this.estimatedTime=`${this.currentDemandLevel.minTime}-${this.currentDemandLevel.maxTime} min`}updateAutoAssignedTime(){if(this.currentDemandLevel){const r=new Date((new Date).getTime()+6e4*this.currentDemandLevel.maxTime),s=r.getHours(),a=r.getMinutes(),c=s>=12?"p.m.":"a.m.";this.autoAssignedTime=`${s%12||12}:${a.toString().padStart(2,"0")} ${c}`}}getDemandMessage(){const n=this.currentTime.getHours();return n>=6&&n<7?"Primeros pedidos \u{1f305}":n>=7&&n<8.5?"Hora pico: Desayuno \u{1f373}":n>=8.5&&n<10.5?"Flujo constante \u26a1":n>=10.5&&n<11.5?"Flujo estable \u{1f4c8}":n>=11.5&&n<14?"Hora pico: Comida \u{1f37d}\ufe0f":n>=14&&n<16.5?"Flujo tranquilo \u{1f60c}":n>=16.5&&n<17.5?"Preparativos vespertinos \u{1f306}":n>=17.5&&n<19?"Hora pico: Cena \u{1f319}":n>=19&&n<20?"Pedidos urgentes \u26a0\ufe0f":"Fuera de horario \u{1f512}"}isPeakHour(){return this.currentDemandLevel&&("alta"===this.currentDemandLevel.level||"mediaalta"===this.currentDemandLevel.level||"irregular"===this.currentDemandLevel.level)}formatCurrentTime(){const n=this.currentTime.getHours(),s=n>=12?"p.m.":"a.m.";return`${n%12||12}:${this.currentTime.getMinutes().toString().padStart(2,"0")} ${s}`}hasValidAssignedTime(){return!(!(this.fechaHoraRecoleccion&&this.fechaHoraRecoleccion.length>0)||isNaN(new Date(this.fechaHoraRecoleccion).getTime()))}formatAssignedTime(){if(this.fechaHoraRecoleccion&&this.fechaHoraRecoleccion.length>0)try{const n=new Date(this.fechaHoraRecoleccion);if(isNaN(n.getTime()))return this.autoAssignedTime||"No asignada";const r=n.getHours(),s=n.getMinutes(),a=r>=12?"p.m.":"a.m.";return`${r%12||12}:${s.toString().padStart(2,"0")} ${a}`}catch(n){return console.error("Error formatting assigned time:",n),this.autoAssignedTime||"No asignada"}return this.autoAssignedTime||"Calculando..."}getDemandDescription(){var n;return(null===(n=this.currentDemandLevel)||void 0===n?void 0:n.description)||"Calculando..."}onDateTimeChange(){console.log("Fecha/hora cambiada:",this.fechaHoraRecoleccion),this.fechaHoraRecoleccion&&new Date(this.fechaHoraRecoleccion)<new Date?this.utilSvc.presentToast({message:"No puedes seleccionar una fecha y hora en el pasado",duration:2500,color:"warning",position:"bottom",icon:"calendar-outline"}):(console.log("Fecha v\xe1lida:",this.validarFechaHora()),console.log("Hora formateada:",this.formatAssignedTime()))}startAutoAssignment(){this.isCountdownActive=!0,this.countdown=5,this.countdownSubscription=li(1e3).subscribe(()=>{this.isCountdownActive&&this.countdown>0?this.countdown--:this.isCountdownActive&&0===this.countdown&&this.performAutoAssignment()})}performAutoAssignment(){var n=this;return(0,U.A)(function*(){n.isCountdownActive=!1;const s=n.currentDemandLevel.maxTime,a=new Date((new Date).getTime()+6e4*s);n.fechaHoraRecoleccion=a.toISOString(),yield n.executeAssignment()})()}executeAssignment(){var n=this;return(0,U.A)(function*(){const r=yield n.utilSvc.loading();yield r.present(),n.isAssigned=!0,n.showAnimation=!0;let s=`pedidos/${n.pedido.id}`;try{const a=new Date(n.fechaHoraRecoleccion);if(isNaN(a.getTime()))throw new Error("Fecha inv\xe1lida seleccionada");const c=vr.Dc.fromDate(a);yield n.firebaseSvc.updateDocumet(s,{estatus:"En espera de recolecci\xf3n",fecha_recoger:c,hora_recoleccion:c}),setTimeout(()=>{n.showAnimation=!1,n.isAssigned=!1,n.pedido.estatus="En espera de recolecci\xf3n",n.utilSvc.dismissModal({success:!0})},3e3)}catch(a){console.error("Error al asignar horario:",a),n.utilSvc.presentToast({message:"Error al asignar horario. Por favor intenta de nuevo.",duration:2500,color:"danger",position:"middle",icon:"alert-circle-outline"}),n.isAssigned=!1,n.showAnimation=!1}finally{r.dismiss()}})()}restartCountdown(){this.isCountdownActive=!0,this.countdown=5,this.startAutoAssignment()}cancelCountdown(){this.isCountdownActive=!1,this.countdown=5,this.countdownSubscription&&this.countdownSubscription.unsubscribe()}getProgressPercentage(){return(5-this.countdown)/5*100}validarFechaHora(){if(!this.fechaHoraRecoleccion)return!1;try{const n=new Date(this.fechaHoraRecoleccion),r=new Date;if(isNaN(n.getTime())||n<r)return!1;const s=new Date;return s.setDate(s.getDate()+7),!(n>s)}catch(n){return console.error("Error validating date:",n),!1}}onSliderChange(){var n=this;return(0,U.A)(function*(){if(100===n.sliderValue)if(n.fechaHoraRecoleccion){if(!n.validarFechaHora())return n.sliderValue=0,void n.utilSvc.presentToast({message:"No se puede seleccionar una fecha y hora anterior a la actual",duration:3e3,color:"danger",position:"bottom",icon:"alert-circle-outline"});yield n.executeAssignment()}else n.sliderValue=0,n.utilSvc.presentToast({message:"Por favor, selecciona una fecha y hora",duration:2500,color:"danger",position:"bottom",icon:"refresh-circle-outline"})})()}}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=o.VBU({type:i,selectors:[["app-assign-horary"]],viewQuery:function(n,r){if(1&n&&o.GBs(Er,5),2&n){let s;o.mGM(s=o.lsd())&&(r.sliderButton=s.first)}},inputs:{pedido:"pedido"},decls:72,vars:31,consts:[["title","Asignar Horario",3,"isModal","showNombre","showLogo"],[1,"status-bar"],[1,"status-info"],[3,"name","color"],[1,"demand-info"],[1,"demand-subtitle"],[1,"time-info"],["name","time","color","medium"],[1,"current-time"],[1,"demand-info-card"],[1,"demand-display"],[1,"demand-icon"],[1,"demand-text"],["placeholder","Selecciona fecha y hora","locale","es-ES","preferWheel","false",3,"ngModelChange","ionChange","ngModel","min","max","showDefaultButtons","showClearButton"],[4,"ngIf"],["name","information-circle-outline","slot","start","color","success"],[1,"ion-text-wrap"],[1,"time-assignment-card"],[1,"time-row"],[1,"time-label"],[1,"time-value","success"],[1,"time-value","primary"],[1,"auto-assignment-section"],["class","countdown-container",4,"ngIf"],["expand","block","color","tertiary","class","restart-button",3,"click",4,"ngIf"],["expand","block","color","medium","disabled","true","class","assigning-button",4,"ngIf"],[1,"system-info-card"],["name","information-circle","color","primary"],[1,"info-text"],["class","assign-slider-container",4,"ngIf"],["class","success-animation",4,"ngIf"],[1,"selected-date-display"],[2,"font-size","0.9rem","color","var(--ion-color-medium)"],[1,"countdown-container"],[1,"countdown-display"],["name","timer",1,"countdown-icon"],[1,"countdown-number"],[1,"auto-assignment-info"],[1,"countdown-progress",3,"value","color"],[1,"countdown-text"],["expand","block","color","danger",1,"cancel-button",3,"click"],["name","close","slot","start"],["expand","block","color","tertiary",1,"restart-button",3,"click"],["name","calendar","slot","start"],["expand","block","color","medium","disabled","true",1,"assigning-button"],["name","crescent","slot","start"],[1,"assign-slider-container"],["class","warning-text",4,"ngIf"],["min","0","max","100","step","1","pin","false","color","primary",1,"assign-slider",3,"ngModelChange","ionChange","ngModel","disabled"],["slot","start","name","arrow-forward","color","primary"],["slot","end","name","checkmark-circle","color","primary"],[1,"warning-text"],["name","warning","color","warning"],[1,"success-animation"],["name","checkmark-circle","color","primary"]],template:function(n,r){1&n&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"ion-card")(3,"ion-card-content",1)(4,"div",2),o.nrm(5,"ion-icon",3),o.j41(6,"div",4)(7,"span"),o.EFF(8),o.k0s(),o.j41(9,"div",5),o.EFF(10),o.k0s()()(),o.j41(11,"div",6),o.nrm(12,"ion-icon",7),o.j41(13,"span",8),o.EFF(14),o.k0s()()()(),o.j41(15,"ion-card",9)(16,"ion-card-content")(17,"div",10)(18,"div",11),o.nrm(19,"ion-icon",3),o.k0s(),o.j41(20,"div",12)(21,"h3"),o.EFF(22),o.k0s(),o.j41(23,"p"),o.EFF(24,"Tiempo estimado: "),o.j41(25,"strong"),o.EFF(26),o.k0s()()()()()(),o.j41(27,"ion-card")(28,"ion-card-header")(29,"ion-card-title"),o.EFF(30,"Asignar Horario de Recolecci\xf3n"),o.k0s()(),o.j41(31,"ion-card-content")(32,"ion-item")(33,"ion-label"),o.EFF(34,"Fecha y Hora de Recolecci\xf3n"),o.k0s(),o.j41(35,"ion-datetime",13),o.mxI("ngModelChange",function(a){return o.DH7(r.fechaHoraRecoleccion,a)||(r.fechaHoraRecoleccion=a),a}),o.bIt("ionChange",function(){return r.onDateTimeChange()}),o.k0s()(),o.DNE(36,Mr,10,10,"ion-item",14),o.j41(37,"ion-item"),o.nrm(38,"ion-icon",15),o.j41(39,"ion-label",16)(40,"h3"),o.EFF(41,"Horarios Disponibles"),o.k0s(),o.j41(42,"p"),o.EFF(43,"\u2705 Puedes elegir desde HOY cualquier hora que necesites"),o.k0s(),o.j41(44,"p"),o.EFF(45,"\u{1f4a1} Horario sugerido: 9:00 AM - 8:00 PM"),o.k0s()()(),o.j41(46,"ion-card",17)(47,"ion-card-content")(48,"div",18)(49,"span",19),o.EFF(50,"Tiempo estimado"),o.k0s(),o.j41(51,"span",20),o.EFF(52),o.k0s()(),o.j41(53,"div",18)(54,"span",19),o.EFF(55,"Hora asignada"),o.k0s(),o.j41(56,"span",21),o.EFF(57),o.k0s()()()(),o.j41(58,"div",22),o.DNE(59,Ar,22,7,"div",23)(60,Ir,3,0,"ion-button",24)(61,br,3,0,"ion-button",25),o.k0s(),o.j41(62,"ion-card",26)(63,"ion-card-header")(64,"ion-card-subtitle"),o.nrm(65,"ion-icon",27),o.EFF(66," Sistema Inteligente de Asignaci\xf3n "),o.k0s()(),o.j41(67,"ion-card-content")(68,"p",28),o.EFF(69," El sistema ajusta autom\xe1ticamente los tiempos seg\xfan la demanda actual. "),o.k0s()()(),o.DNE(70,Rr,7,3,"div",29)(71,kr,4,0,"div",30),o.k0s()()()),2&n&&(o.Y8G("isModal",!0)("showNombre",!1)("showLogo",!1),o.R7$(2),o.HbH(r.isPeakHour()?"peak-hour-card":"normal-hour-card"),o.R7$(3),o.Y8G("name","irregular"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"warning":"alta"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)||"mediaalta"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"flame":"checkmark-circle")("color",null==r.currentDemandLevel?null:r.currentDemandLevel.color),o.R7$(2),o.HbH("demand-level-"+(null==r.currentDemandLevel?null:r.currentDemandLevel.level)),o.R7$(),o.SpI(" ",r.getDemandMessage()," "),o.R7$(2),o.SpI(" Nivel: ",(null==r.currentDemandLevel||null==r.currentDemandLevel.level?null:r.currentDemandLevel.level.toUpperCase())||"CALCULANDO"," "),o.R7$(4),o.JRh(r.formatCurrentTime()),o.R7$(),o.HbH("demand-"+(null==r.currentDemandLevel?null:r.currentDemandLevel.level)),o.R7$(4),o.Y8G("name","baja"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"flash":"normal"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"speedometer":"moderada"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"trending-up":"media"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"pulse":"alta"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"flame":"mediaalta"===(null==r.currentDemandLevel?null:r.currentDemandLevel.level)?"warning":"alert-circle")("color",null==r.currentDemandLevel?null:r.currentDemandLevel.color),o.R7$(3),o.JRh(r.getDemandDescription()),o.R7$(4),o.JRh(r.estimatedTime),o.R7$(9),o.R50("ngModel",r.fechaHoraRecoleccion),o.Y8G("min",r.fechaMinima)("max",r.fechaMaxima)("showDefaultButtons",!0)("showClearButton",!1),o.R7$(),o.Y8G("ngIf",r.fechaHoraRecoleccion),o.R7$(16),o.JRh(r.estimatedTime),o.R7$(5),o.JRh(r.formatAssignedTime()),o.R7$(2),o.Y8G("ngIf",r.isCountdownActive),o.R7$(),o.Y8G("ngIf",!r.isCountdownActive&&!r.isAssigned),o.R7$(),o.Y8G("ngIf",r.isAssigned),o.R7$(9),o.Y8G("ngIf","en preparaci\xf3n"===r.pedido.estatus.toLowerCase()&&!r.isCountdownActive),o.R7$(),o.Y8G("ngIf",r.showAnimation))},dependencies:[u.bT,_.Jm,_.b_,_.I9,_.ME,_.HW,_.tN,_.W9,_.A9,_.iq,_.uz,_.he,_.FH,_.Ob,_.w2,_.Je,_.Gw,O.BC,O.vS,ui.l,u.vh],styles:[".assign-slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:50px;text-align:center}.assign-slider[_ngcontent-%COMP%]{width:80%;--knob-size: 36px;--bar-height: 24px;--knob-background: var(--ion-color-primary);--bar-background-active: var(--ion-color-primary);--bar-background: #ddd;--bar-border-radius: 50px}.assign-slider[disabled][_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.success-animation[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px;animation:_ngcontent-%COMP%_fadeInScale .5s ease forwards}.success-animation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:var(--ion-color-primary);animation:_ngcontent-%COMP%_scaleUp .5s ease forwards}.success-animation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-primary);margin-top:8px}.warning-text[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-size:.9rem;margin:8px 0;display:flex;align-items:center;gap:8px}.warning-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-dark);border-radius:8px;padding:8px;width:100%}.selected-date-display[_ngcontent-%COMP%]{background:var(--ion-color-light-tint);border-radius:8px;padding:12px;margin:8px 0;border-left:4px solid var(--ion-color-primary)}.selected-date-display[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;color:var(--ion-color-primary)}.selected-date-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:1.1rem;font-weight:600;color:var(--ion-color-dark)}.selected-date-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:.9rem;font-weight:400;color:var(--ion-color-medium)}ion-item[_ngcontent-%COMP%]:has(ion-icon[name=information-circle-outline]){--background: rgba(var(--ion-color-primary-rgb), .1);--border-radius: 8px;margin:8px 0}ion-item[_ngcontent-%COMP%]:has(ion-icon[name=information-circle-outline])   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600;margin:0 0 4px}ion-item[_ngcontent-%COMP%]:has(ion-icon[name=information-circle-outline])   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade);font-weight:500;margin:0}.time-assignment-card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin:16px 0}.time-assignment-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}.time-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.time-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.time-label[_ngcontent-%COMP%]{font-size:16px;color:#666;font-weight:500}.time-value[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.time-value.success[_ngcontent-%COMP%]{color:var(--ion-color-success)}.time-value.primary[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.time-value.warning[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.time-value.danger[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.status-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}.status-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.demand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.demand-info[_ngcontent-%COMP%]   .demand-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin-top:2px}.time-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.current-time[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}.demand-level-baja[_ngcontent-%COMP%], .demand-level-normal[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600}.demand-level-moderada[_ngcontent-%COMP%], .demand-level-media[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.demand-level-alta[_ngcontent-%COMP%], .demand-level-mediaalta[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:600}.demand-level-irregular[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:600}.peak-hour-card[_ngcontent-%COMP%]{--background: rgba(255, 193, 7, .1);border-left:4px solid var(--ion-color-warning)}.normal-hour-card[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .1);border-left:4px solid var(--ion-color-success)}.demand-info-card[_ngcontent-%COMP%]{margin-top:16px}.demand-info-card.demand-baja[_ngcontent-%COMP%], .demand-info-card.demand-normal[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .05);border-left:4px solid var(--ion-color-success)}.demand-info-card.demand-moderada[_ngcontent-%COMP%], .demand-info-card.demand-media[_ngcontent-%COMP%]{--background: rgba(52, 144, 220, .05);border-left:4px solid var(--ion-color-primary)}.demand-info-card.demand-alta[_ngcontent-%COMP%], .demand-info-card.demand-mediaalta[_ngcontent-%COMP%]{--background: rgba(255, 193, 7, .05);border-left:4px solid var(--ion-color-warning)}.demand-info-card.demand-irregular[_ngcontent-%COMP%]{--background: rgba(245, 61, 61, .05);border-left:4px solid var(--ion-color-danger)}.demand-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.demand-display[_ngcontent-%COMP%]   .demand-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]{flex:1}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.2rem;font-weight:600}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium)}.auto-assignment-section[_ngcontent-%COMP%]{margin-top:24px;padding:16px 0}.countdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.countdown-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc1071a,#ff57331a);border:2px solid var(--ion-color-warning);border-radius:12px;padding:24px;text-align:center;margin-bottom:16px;position:relative;overflow:hidden}.countdown-display.countdown-baja[_ngcontent-%COMP%], .countdown-display.countdown-normal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a7451a,#28a7450d);border-color:var(--ion-color-success)}.countdown-display.countdown-moderada[_ngcontent-%COMP%], .countdown-display.countdown-media[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3490dc1a,#3490dc0d);border-color:var(--ion-color-primary)}.countdown-display.countdown-alta[_ngcontent-%COMP%], .countdown-display.countdown-mediaalta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc1071a,#ffc1070d);border-color:var(--ion-color-warning)}.countdown-display.countdown-irregular[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f53d3d1a,#f53d3d0d);border-color:var(--ion-color-danger)}.countdown-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-warning);animation:_ngcontent-%COMP%_pulse 2s infinite}.countdown-display[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-size:1.1rem;margin:8px 0;font-weight:600}.countdown-number[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;color:var(--ion-color-warning);margin:16px 0;animation:_ngcontent-%COMP%_pulse 1s infinite;text-shadow:0 2px 4px rgba(0,0,0,.1)}.auto-assignment-info[_ngcontent-%COMP%]{margin:16px 0}.auto-assignment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem;color:var(--ion-color-medium)}.countdown-progress[_ngcontent-%COMP%]{margin:16px 0;height:8px;--progress-background: rgba(255, 193, 7, .3);--background: rgba(255, 193, 7, .1);border-radius:4px}.countdown-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-warning);margin:8px 0 0}.cancel-button[_ngcontent-%COMP%]{--background: var(--ion-color-danger);--background-hover: var(--ion-color-danger-shade);--color: white;margin-top:8px;font-weight:600}.cancel-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.restart-button[_ngcontent-%COMP%]{--background: var(--ion-color-tertiary);--background-hover: var(--ion-color-tertiary-shade);--color: white;font-weight:600}.restart-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.assigning-button[_ngcontent-%COMP%]{--background: var(--ion-color-medium);--color: white;cursor:not-allowed}.system-info-card[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .05);border:1px solid rgba(40,167,69,.2);margin-top:16px}.system-info-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ion-color-success);font-weight:600}.system-info-card[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-success);margin:0 0 12px;line-height:1.4}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(.5)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}to{transform:scale(1);opacity:1}}@media (max-width: 768px){.countdown-number[_ngcontent-%COMP%]{font-size:3rem}.countdown-display[_ngcontent-%COMP%]{padding:20px}.status-bar[_ngcontent-%COMP%]{flex-direction:column;gap:8px;text-align:center}.demand-display[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:12px}.time-assignment-card[_ngcontent-%COMP%]{margin:12px 0}.time-assignment-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}.time-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px;padding:16px 0}.time-row[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:14px}.time-row[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:18px;align-self:flex-end}}"]}),e})();var Vr=w(421);const Fr=i=>[i,"MXN","symbol-narrow","1.2-2","en-US"],Dr=()=>[1,1,1,1,1,1,1,1];function Sr(i,e){if(1&i){const t=o.RV6();o.j41(0,"ion-button",8),o.bIt("click",function(){o.eBV(t);const r=o.XpG();return o.Njj(r.clearFilters())}),o.EFF(1," Quitar Filtros "),o.nrm(2,"ion-icon",4),o.k0s()}}function Nr(i,e){if(1&i&&(o.j41(0,"div",17)(1,"strong"),o.nrm(2,"ion-icon",21),o.EFF(3),o.nI1(4,"date"),o.k0s()()),2&i){const t=o.XpG(2).$implicit,n=o.XpG(2);o.R7$(2),o.Y8G("name","negocio"===n.getEffectiveDeliveryType(t)?"time-outline":"truck-outline")("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),o.R7$(),o.Lme(" ",n.getScheduledLabel(t),": ",o.i5U(4,4,n.getScheduledDate(t),"dd/MM/yyyy HH:mm")," ")}}function jr(i,e){if(1&i&&(o.j41(0,"div",42),o.nrm(1,"ion-icon",43),o.j41(2,"span",44),o.EFF(3),o.nI1(4,"date"),o.k0s()()),2&i){const t=o.XpG(3).$implicit,n=o.XpG(2);o.R7$(3),o.SpI(" Horario programado: ",o.brH(4,1,n.getScheduledDate(t),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES")," ")}}function Lr(i,e){if(1&i&&(o.j41(0,"div",34)(1,"div",35),o.nrm(2,"ion-icon",36),o.j41(3,"span",37),o.EFF(4,"Recolecci\xf3n en Tortiller\xeda Plata Jaimes"),o.k0s()(),o.DNE(5,jr,5,5,"div",38),o.j41(6,"div",39),o.nrm(7,"ion-icon",40),o.j41(8,"span",41),o.EFF(9,"Cliente debe presentar ID o n\xfamero de pedido"),o.k0s()()()),2&i){const t=o.XpG(2).$implicit,n=o.XpG(2);o.R7$(5),o.Y8G("ngIf",n.getScheduledDate(t))}}function $r(i,e){if(1&i&&(o.j41(0,"div",50),o.nrm(1,"ion-icon",51),o.j41(2,"span",44),o.EFF(3),o.nI1(4,"date"),o.k0s()()),2&i){const t=o.XpG(3).$implicit,n=o.XpG(2);o.R7$(3),o.SpI(" Horario de entrega: ",o.brH(4,1,n.getScheduledDate(t),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES")," ")}}function Hr(i,e){if(1&i&&(o.j41(0,"div",45)(1,"div",46),o.nrm(2,"ion-icon",47),o.j41(3,"span",48),o.EFF(4,"Entrega en domicilio programada"),o.k0s()(),o.DNE(5,$r,5,5,"div",49),o.k0s()),2&i){const t=o.XpG(2).$implicit,n=o.XpG(2);o.R7$(5),o.Y8G("ngIf",n.getScheduledDate(t))}}function qr(i,e){1&i&&(o.j41(0,"ion-chip",52),o.nrm(1,"ion-icon",53),o.j41(2,"ion-label"),o.EFF(3,"Pr\xf3ximo"),o.k0s()())}function Ur(i,e){if(1&i){const t=o.RV6();o.j41(0,"ion-item-option",54),o.bIt("click",function(){o.eBV(t);const r=o.XpG(2).$implicit,s=o.XpG(2);return o.Njj(s.cancelarPedido(r))}),o.nrm(1,"ion-icon",55),o.EFF(2," Cancelar "),o.k0s()}}function Gr(i,e){if(1&i){const t=o.RV6();o.j41(0,"ion-item-sliding",11)(1,"ion-item",12)(2,"ion-label",13)(3,"div",14)(4,"h2"),o.nrm(5,"ion-icon",15),o.EFF(6),o.nI1(7,"currency"),o.k0s()(),o.j41(8,"div",16)(9,"div",17)(10,"strong"),o.nrm(11,"ion-icon",18),o.EFF(12),o.k0s(),o.j41(13,"strong",19),o.nrm(14,"ion-icon",20),o.EFF(15),o.k0s()(),o.j41(16,"div",17)(17,"strong"),o.nrm(18,"ion-icon",21),o.EFF(19),o.k0s()(),o.DNE(20,Nr,5,7,"div",22),o.k0s(),o.DNE(21,Lr,10,1,"div",23)(22,Hr,6,1,"div",24),o.j41(23,"div",25)(24,"ion-chip",26),o.nrm(25,"ion-icon",27),o.j41(26,"ion-label"),o.EFF(27),o.k0s()(),o.j41(28,"ion-chip",28),o.nrm(29,"ion-icon",29),o.j41(30,"ion-label"),o.EFF(31),o.k0s()(),o.DNE(32,qr,4,0,"ion-chip",30),o.k0s()()(),o.j41(33,"ion-item-options")(34,"ion-item-option",31),o.bIt("click",function(){o.eBV(t);const r=o.XpG().$implicit,s=o.XpG(2);return o.Njj(s.openAsignarHorario(r))}),o.EFF(35," Asignar horario "),o.nrm(36,"ion-icon",32),o.k0s(),o.DNE(37,Ur,3,0,"ion-item-option",33),o.k0s()()}if(2&i){const t=o.XpG().$implicit,n=o.XpG(2);o.R7$(6),o.SpI(" ",o.iJd(7,15,o.eq3(21,Fr,t.total))," MXN "),o.R7$(6),o.SpI(" Cliente: ",t.nombre_cliente," "),o.R7$(3),o.SpI(" ",t.estatus," "),o.R7$(3),o.Y8G("name",n.getDeliveryTypeIcon(n.getEffectiveDeliveryType(t)))("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),o.R7$(),o.SpI(" ",n.getDeliveryTypeDisplayName(n.getEffectiveDeliveryType(t))," "),o.R7$(),o.Y8G("ngIf",n.getScheduledDate(t)),o.R7$(),o.Y8G("ngIf","negocio"===n.getEffectiveDeliveryType(t)),o.R7$(),o.Y8G("ngIf","domicilio"===n.getEffectiveDeliveryType(t)),o.R7$(5),o.JRh(t.tipo_pago),o.R7$(),o.Y8G("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),o.R7$(),o.Y8G("name",n.getDeliveryTypeIcon(n.getEffectiveDeliveryType(t))),o.R7$(2),o.JRh("negocio"===n.getEffectiveDeliveryType(t)?"Recolecci\xf3n":"Domicilio"),o.R7$(),o.Y8G("ngIf",n.isScheduledSoon(t)),o.R7$(5),o.Y8G("ngIf","cancelado"!==t.estatus.toLowerCase()&&"entregado"!==t.estatus.toLowerCase())}}function zr(i,e){if(1&i&&(o.j41(0,"ion-list"),o.DNE(1,Gr,38,23,"ion-item-sliding",10),o.k0s()),2&i){const t=e.$implicit;o.R7$(),o.Y8G("ngIf","en preparaci\xf3n"===t.estatus.toLowerCase())}}function Br(i,e){if(1&i&&(o.qex(0),o.DNE(1,zr,2,1,"ion-list",9),o.bVm()),2&i){const t=o.XpG();o.R7$(),o.Y8G("ngForOf",t.pedidosFiltrados)}}function Qr(i,e){1&i&&(o.j41(0,"ion-item",11)(1,"ion-avatar",57),o.nrm(2,"ion-skeleton-text",58),o.k0s(),o.j41(3,"ion-label")(4,"div"),o.nrm(5,"ion-skeleton-text",59),o.k0s(),o.j41(6,"div"),o.nrm(7,"ion-skeleton-text",60),o.k0s()()())}function Yr(i,e){1&i&&(o.j41(0,"ion-list"),o.DNE(1,Qr,8,0,"ion-item",56),o.k0s()),2&i&&(o.R7$(),o.Y8G("ngForOf",o.lJ4(1,Dr)))}function Kr(i,e){1&i&&(o.j41(0,"div",61),o.nrm(1,"ion-icon",62),o.j41(2,"h3"),o.EFF(3,"No hay pedidos disponibles"),o.k0s()())}const Wr=[{path:"",component:(()=>{var i;class e{constructor(n,r){this.modalCtrl=n,this.alertController=r,this.showModal=!1,this.isEditing=!1,this.pedidos=[],this.detalle_pedido=[],this.loading=!1,this.searchTerm="",this.filtersApplied=!1,this.pedidosFiltrados=[],this.utilsSvc=(0,o.WQX)(ai.T),this.firebaseSvc=(0,o.WQX)(si.f),this.fecha=(new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}ngOnInit(){this.fecha=this.fecha.charAt(0).toUpperCase()+this.fecha.slice(1),this.getPedidos()}user(){return this.utilsSvc.getFromLocalStorage("user")}doRefresh(n){setTimeout(()=>{this.getPedidos(),n.target.complete()},1e3)}closeModal(){this.showModal=!1}getPedidos(){var n=this;this.loading=!0;let s=[ur("estatus","==","En preparaci\xf3n")],a=new Date;a.setHours(0,0,0,0);let c=new Date(a);c.setDate(a.getDate()+1);let l=this.firebaseSvc.getCollectionData("pedidos",s).subscribe({next:d=>{if(Array.isArray(d)){this.loading=!0,this.pedidos=d;const h=this.pedidos.filter(m=>{let v;if(m.hora_recoleccion&&m.hora_recoleccion.toDate)v=m.hora_recoleccion.toDate();else if(m.fecha_entrega&&m.fecha_entrega.toDate)v=m.fecha_entrega.toDate();else{if(!m.fecha_entrega)return!1;v=new Date(m.fecha_entrega)}return v>=a&&v<c}),g=h.map(m=>this.firebaseSvc.getDocument(`users/${m.uid_cliente}`).then(C=>(m.nombre_cliente=C.name+" "+C.mother_Last_Name+" "+C.father_Last_Name,this.firebaseSvc.getCollectionData(`pedidos/${m.id}/detalle_pedido`,[]).subscribe({next:q=>{m.detalle_pedido=q,m.detalle_pedido.forEach(function(){var Te=(0,U.A)(function*(ie){const Xt=`productos/${ie.uid_producto}`;try{let X=yield n.firebaseSvc.getDocument(Xt);ie.producto=X}catch{}});return function(ie){return Te.apply(this,arguments)}}())},error:q=>console.error("Error al obtener datos:",q)}),m)));Promise.all(g).then(m=>{this.pedidosFiltrados=h,this.loading=!1}).catch(m=>{this.loading=!1})}else this.pedidos=[],this.pedidosFiltrados=[];l.unsubscribe()},error:d=>{this.loading=!1}})}refreshOrders(){}openFilterModal(){var n=this;return(0,U.A)(function*(){const s=yield n.modalCtrl.create({component:Vr.w,componentProps:{estatus:!1}});yield s.present();const{data:a}=yield s.onDidDismiss();a&&n.applyFilter(a)})()}applyFilter(n){this.filtersApplied=!0,this.pedidosFiltrados=this.pedidos.filter(r=>{if(n.selectedStatus&&n.selectedStatus.length&&!n.selectedStatus.includes(r.estatus))return!1;if(n.fechaInicio&&n.fechaFin){const s=new Date(r.fecha),a=new Date(n.fechaInicio),c=new Date(n.fechaFin);if(s<a||s>c)return!1}return!(null!==n.precioMin&&null!==n.precioMax&&(r.total<n.precioMin||r.total>n.precioMax))})}clearFilters(){let n=new Date;n.setHours(0,0,0,0);let r=new Date(n);r.setDate(n.getDate()+1),this.pedidosFiltrados=this.pedidos.filter(s=>{let a;if(s.fecha_entrega&&s.fecha_entrega.toDate)a=s.fecha_entrega.toDate();else{if(!s.fecha_entrega)return!1;a=new Date(s.fecha_entrega)}return a>=n&&a<r}),this.filtersApplied=!1}filterPedidos(){const n=this.searchTerm.toLowerCase();this.pedidosFiltrados=this.pedidos.filter(r=>r.nombre_cliente.toLowerCase().includes(n)||r.total.toFixed(2).includes(n)||r.id.toLowerCase().includes(n)||r.estatus.toLowerCase().includes(n))}getStatusIcon(n){switch(n.toLowerCase()){case"pedido confirmado":return"bag-check-outline";case"en preparaci\xf3n":return"refresh-circle-outline";case"en espera de recolecci\xf3n":return"time-outline";case"entregado":return"checkmark-done-outline";case"cancelado":return"close-circle-outline";default:return"help-circle-outline"}}cancelarPedido(n){var r=this;return(0,U.A)(function*(){var a;yield(yield r.alertController.create({header:"Cancelar Pedido",mode:"ios",message:"\xbfRealmente deseas cancelar el pedido?",cssClass:"custom-alert",buttons:[{text:"Cancelar",role:"cancel",cssClass:"alert-cancel",handler:()=>{}},{text:"Confirmar",cssClass:"alert-confirm",handler:(a=(0,U.A)(function*(){let c=`pedidos/${n.id}`;const l=yield r.utilsSvc.loading();yield l.present(),n.estatus="Cancelado",r.firebaseSvc.updateDocumet(c,{estatus:n.estatus}).then(function(){var d=(0,U.A)(function*(h){r.utilsSvc.presentToast({message:"Pedido cancelado",duration:2500,color:"primary",position:"bottom",icon:"refresh-circle-outline"})});return function(h){return d.apply(this,arguments)}}()).catch(d=>{r.utilsSvc.presentToast({message:d.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{l.dismiss()})}),function(){return a.apply(this,arguments)})}],backdropDismiss:!1})).present()})()}getColorIcon(n){switch(n.toLowerCase()){case"cancelado":return"danger";case"entregado":return"primary";default:return"dark"}}openAsignarHorario(n){var r=this;return(0,U.A)(function*(){(yield r.utilsSvc.presentModal({component:xr,componentProps:{pedido:n}}))&&r.utilsSvc.presentToast({message:"Pedido en espera de entrega",duration:2500,color:"primary",position:"bottom",icon:"refresh-circle-outline"}),r.getPedidos()})()}getEffectiveDeliveryType(n){if(!0===(null==n?void 0:n.es_recoleccion_negocio)||"negocio"===(null==n?void 0:n.metodo_entrega)||"negocio"===(null==n?void 0:n.tipo_entrega)||null!=n&&n.hora_recoleccion)return"negocio";console.log(n);const r=((null==n?void 0:n.tipo_entrega)||"").toLowerCase();return r?"domicilio"===r&&this.hasUbicacion(n)?"domicilio":"negocio":this.hasUbicacion(n)?"domicilio":"negocio"}hasUbicacion(n){var r,s;if(!n)return!1;const a=null==n?void 0:n.geopoint_entrega,c=a&&"number"==typeof a.latitude&&"number"==typeof a.longitude&&!isNaN(a.latitude)&&!isNaN(a.longitude),l="number"==typeof(null==n?void 0:n.lat)&&"number"==typeof(null==n?void 0:n.lng)||"number"==typeof(null==n||null===(r=n.coordenadas)||void 0===r?void 0:r.lat)&&"number"==typeof(null==n||null===(s=n.coordenadas)||void 0===s?void 0:s.lng);return!(!c&&!l)}getDeliveryTypeIcon(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"home-outline";case"negocio":return"storefront-outline";default:return"location-outline"}}getDeliveryTypeColor(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"primary";case"negocio":return"success";default:return"medium"}}getDeliveryTypeDisplayName(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"Entrega a domicilio";case"negocio":return"Recolecci\xf3n en negocio";default:return"Tipo no especificado"}}getScheduledDate(n){return null!=n&&n.hora_recoleccion?this.toDateTime(n.hora_recoleccion):null!=n&&n.fecha_entrega?this.toDateTime(n.fecha_entrega):null!=n&&n.fecha?this.toDateTime(n.fecha):null}getScheduledLabel(n){return"negocio"===this.getEffectiveDeliveryType(n)?null!=n&&n.hora_recoleccion?"Horario de recolecci\xf3n":null!=n&&n.fecha_entrega?"Horario programado":"Fecha del pedido":"Horario de entrega"}toDateTime(n){if(!n)return null;if(null!=n&&n.toDate&&"function"==typeof n.toDate)return n.toDate();if(null!=n&&n.seconds)return new Date(1e3*n.seconds);const r=new Date(n);return isNaN(r.getTime())?null:r}isScheduledSoon(n){const r=this.getScheduledDate(n);if(!r)return!1;const s=new Date;return r<=new Date(s.getTime()+72e5)&&r>s}}return(i=e).\u0275fac=function(n){return new(n||i)(o.rXU(_.W3),o.rXU(_.hG))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-horario"]],decls:12,vars:6,consts:[["title","Horarios de entrega",3,"showMenu"],["slot","fixed",3,"ionRefresh"],["mode","ios","animated","true","placeholder","Cliente, productos, precio o c\xf3digo",3,"ngModelChange","ionInput","ngModel"],["expand","block","color","primary",3,"click"],["name","filter-outline",2,"margin-left","0.5rem"],["expand","block","color","light",3,"click",4,"ngIf"],[4,"ngIf"],["class","empty",4,"ngIf"],["expand","block","color","light",3,"click"],[4,"ngFor","ngForOf"],["class","product-item",4,"ngIf"],[1,"product-item"],[1,"card","horario-item"],[1,"horario-label"],[1,"name"],["slot","start","color","danger","name","cash-outline",2,"margin-right","2rem"],[1,"horario-main-info"],[1,"data"],["slot","start","name","person-outline"],[2,"margin-left","3rem"],["slot","start","name","refresh-circle-outline"],["slot","start",3,"name","color"],["class","data",4,"ngIf"],["class","pickup-info",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"chips-container"],["color","primary","mode","ios","outline","true"],["name","card-outline"],["mode","ios","outline","true",3,"color"],[3,"name"],["color","warning","mode","ios",4,"ngIf"],["color","primary",3,"click"],["name","alarm-outline",1,"option-btn"],["color","danger",3,"click",4,"ngIf"],[1,"pickup-info"],[1,"pickup-details"],["name","storefront-outline","color","success"],[1,"pickup-text"],["class","pickup-schedule",4,"ngIf"],[1,"pickup-instructions"],["name","information-circle-outline","color","medium"],[1,"instructions-text"],[1,"pickup-schedule"],["name","alarm-outline","color","success"],[1,"schedule-text"],[1,"delivery-info"],[1,"delivery-details"],["name","home-outline","color","primary"],[1,"delivery-text"],["class","delivery-schedule",4,"ngIf"],[1,"delivery-schedule"],["name","truck-outline","color","primary"],["color","warning","mode","ios"],["name","warning-outline"],["color","danger",3,"click"],["name","close-circle-outline",1,"option-btn",2,"margin-right","0.5rem"],["class","product-item",4,"ngFor","ngForOf"],["slot","start"],["animated","",2,"width","100%","height","100%"],["animated","",2,"width","50%"],["animated","",2,"width","30%"],[1,"empty"],["name","shield-outline"]],template:function(n,r){1&n&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"ion-refresher",1),o.bIt("ionRefresh",function(a){return r.doRefresh(a)}),o.nrm(3,"ion-refresher-content"),o.k0s(),o.j41(4,"ion-searchbar",2),o.mxI("ngModelChange",function(a){return o.DH7(r.searchTerm,a)||(r.searchTerm=a),a}),o.bIt("ionInput",function(){return r.filterPedidos()}),o.k0s(),o.j41(5,"ion-button",3),o.bIt("click",function(){return r.openFilterModal()}),o.EFF(6," Filtros "),o.nrm(7,"ion-icon",4),o.k0s(),o.DNE(8,Sr,3,0,"ion-button",5)(9,Br,2,1,"ng-container",6)(10,Yr,2,2,"ion-list",6)(11,Kr,4,0,"div",7),o.k0s()),2&n&&(o.Y8G("showMenu",!0),o.R7$(4),o.R50("ngModel",r.searchTerm),o.R7$(4),o.Y8G("ngIf",r.filtersApplied),o.R7$(),o.Y8G("ngIf",r.pedidosFiltrados.length>0),o.R7$(),o.Y8G("ngIf",r.loading),o.R7$(),o.Y8G("ngIf",!r.loading&&!r.pedidosFiltrados.length))},dependencies:[u.Sq,u.bT,O.BC,O.vS,_.mC,_.Jm,_.ZB,_.W9,_.iq,_.uz,_.LU,_.CE,_.A7,_.he,_.nf,_.To,_.Ki,_.S1,_.ds,_.Gw,ui.l,u.oe,u.vh],styles:[".option-btn[_ngcontent-%COMP%]{margin-left:.5rem}.card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin:4px 8px;padding:8px}.pickup-info[_ngcontent-%COMP%]{background:rgba(var(--ion-color-success-rgb),.1);border-radius:8px;padding:12px;margin:8px 0;border-left:4px solid var(--ion-color-success)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:6px 0}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{min-width:20px}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-success)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-success-shade)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%]{font-style:italic;color:var(--ion-color-medium)}.delivery-info[_ngcontent-%COMP%]{background:rgba(var(--ion-color-primary-rgb),.1);border-radius:8px;padding:12px;margin:8px 0;border-left:4px solid var(--ion-color-primary)}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:6px 0}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{min-width:20px}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary)}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-primary-shade)}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:12px;height:28px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.horario-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--inner-padding-end: 8px;margin-bottom:4px}.horario-label[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;gap:12px;padding:8px 0;white-space:normal!important;overflow:visible!important;text-overflow:unset!important}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 6px}.data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:6px 0;flex-wrap:wrap}.data[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (min-width: 768px){.card[_ngcontent-%COMP%]{margin:6px 10px;padding:12px}.horario-item[_ngcontent-%COMP%]{--padding-start: 14px;--padding-end: 14px;margin-bottom:6px}.horario-label[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;align-items:flex-start;gap:16px;padding:12px 0}.name[_ngcontent-%COMP%]{flex:0 0 auto;min-width:180px}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.horario-main-info[_ngcontent-%COMP%]{display:flex;flex:1;gap:20px;align-items:flex-start;min-width:0;flex-wrap:wrap}.data[_ngcontent-%COMP%]{gap:.5rem;margin:4px 0;min-width:200px}.data[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{gap:.35rem}.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{flex:1;min-width:300px;margin:0}.chips-container[_ngcontent-%COMP%]{flex:0 0 auto;margin-top:0;min-width:200px;justify-content:flex-end}}@media (min-width: 1024px){.card[_ngcontent-%COMP%]{margin:8px 12px;padding:16px}.horario-label[_ngcontent-%COMP%]{gap:24px;padding:16px 0}.name[_ngcontent-%COMP%]{min-width:200px}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.horario-main-info[_ngcontent-%COMP%]{gap:30px}.data[_ngcontent-%COMP%]{min-width:220px}.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{min-width:350px}.chips-container[_ngcontent-%COMP%]{min-width:220px}}@media (max-width: 768px){.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{padding:10px;margin:6px 0}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]{font-size:13px}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.chips-container[_ngcontent-%COMP%]{gap:6px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:11px;height:26px}}@media (max-width: 480px){.horario-item[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px}.data[_ngcontent-%COMP%]{gap:.5rem;margin:4px 0}}@media (max-width: 360px){.horario-label[_ngcontent-%COMP%]{gap:8px}.data[_ngcontent-%COMP%]{gap:6px;margin:4px 0}.chips-container[_ngcontent-%COMP%]{gap:4px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:10px;height:24px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.7rem}}"]}),e})()}];let Xr=(()=>{var i;class e{}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[Ce.iI.forChild(Wr),Ce.iI]}),e})();var Jr=w(7383);let Zr=(()=>{var i;class e{}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[u.MD,O.YN,_.bv,Xr,Jr.G]}),e})()},421:(di,$e,w)=>{w.d($e,{w:()=>ge});var u=w(4438),O=w(5933),_=w(177),Ce=w(9417),U=w(8461);function o(I,b){1&I&&(u.j41(0,"ion-item-divider",4)(1,"ion-label")(2,"strong"),u.EFF(3,"Estado"),u.k0s()()())}function pe(I,b){if(1&I){const F=u.RV6();u.j41(0,"ion-item",14),u.bIt("click",function(){const T=u.eBV(F).$implicit,R=u.XpG(2);return u.Njj(R.toggleStatusFilter(T))}),u.nrm(1,"ion-icon",15),u.j41(2,"ion-label"),u.EFF(3),u.nI1(4,"titlecase"),u.k0s(),u.j41(5,"ion-checkbox",16),u.mxI("ngModelChange",function(T){const R=u.eBV(F).$implicit,M=u.XpG(2);return u.DH7(M.selectedStatus[R],T)||(M.selectedStatus[R]=T),u.Njj(T)}),u.bIt("click",function(T){return u.eBV(F),u.Njj(T.stopPropagation())}),u.k0s()()}if(2&I){const F=b.$implicit,E=u.XpG(2);u.R7$(),u.Y8G("name",E.getStatusIcon(F)),u.R7$(2),u.JRh(u.bMT(4,3,F)),u.R7$(2),u.R50("ngModel",E.selectedStatus[F])}}function ht(I,b){if(1&I&&(u.j41(0,"div"),u.DNE(1,pe,6,5,"ion-item",13),u.k0s()),2&I){const F=u.XpG();u.R7$(),u.Y8G("ngForOf",F.estatusOptions)}}let ge=(()=>{var I;class b{constructor(E){this.modalCtrl=E,this.estatusOptions=["Pedido confirmado","En preparaci\xf3n","En espera de recolecci\xf3n","Entregado","Cancelado"],this.selectedStatus={},this.fechaInicio=null,this.fechaFin=null,this.precioMin=null,this.precioMax=null,this.mostrarEstatus=!0}closeModal(){this.modalCtrl.dismiss()}toggleStatusFilter(E){this.selectedStatus[E]=!this.selectedStatus[E]}applyFilter(){const T={selectedStatus:Object.keys(this.selectedStatus).filter(R=>this.selectedStatus[R]),fechaInicio:this.fechaInicio,fechaFin:this.fechaFin,precioMin:this.precioMin,precioMax:this.precioMax};this.modalCtrl.dismiss(T)}clearFilters(){this.selectedStatus={},this.fechaInicio=null,this.fechaFin=null,this.precioMin=null,this.precioMax=null}getStatusIcon(E){switch(E.toLowerCase()){case"pedido confirmado":return"bag-check-outline";case"en preparaci\xf3n":return"refresh-circle-outline";case"en espera de recolecci\xf3n":return"time-outline";case"entregado":return"checkmark-done-outline";case"cancelado":return"close-circle-outline";default:return"help-circle-outline"}}}return(I=b).\u0275fac=function(E){return new(E||I)(u.rXU(O.W3))},I.\u0275cmp=u.VBU({type:I,selectors:[["app-filtros-modal"]],inputs:{estatus:"estatus"},decls:36,vars:9,consts:[["title","Filtros",3,"isModal","showNombre","showLogo"],[1,"filter-content"],["color","light",4,"ngIf"],[4,"ngIf"],["color","light"],["displayFormat","DD MMM YYYY",3,"ngModelChange","ngModel"],["type","number","placeholder","M\xednimo",3,"ngModelChange","ngModel"],["type","number","placeholder","M\xe1ximo",3,"ngModelChange","ngModel"],[1,"filter-buttons"],["expand","block","color","primary",3,"click"],["slot","start","name","checkmark-done-outline"],["expand","block","color","danger","fill","outline",3,"click"],["slot","start","name","close-circle-outline"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start","color","medium",3,"name"],["slot","end",3,"ngModelChange","click","ngModel"]],template:function(E,T){1&E&&(u.nrm(0,"app-header",0),u.j41(1,"ion-content",1)(2,"ion-list"),u.DNE(3,o,4,0,"ion-item-divider",2)(4,ht,2,1,"div",3),u.j41(5,"ion-item-divider",4)(6,"ion-label")(7,"strong"),u.EFF(8,"Fecha"),u.k0s()()(),u.j41(9,"ion-item")(10,"ion-label"),u.EFF(11,"Desde"),u.k0s(),u.j41(12,"ion-datetime",5),u.mxI("ngModelChange",function(M){return u.DH7(T.fechaInicio,M)||(T.fechaInicio=M),M}),u.k0s()(),u.j41(13,"ion-item")(14,"ion-label"),u.EFF(15,"Hasta"),u.k0s(),u.j41(16,"ion-datetime",5),u.mxI("ngModelChange",function(M){return u.DH7(T.fechaFin,M)||(T.fechaFin=M),M}),u.k0s()(),u.j41(17,"ion-item-divider",4)(18,"ion-label")(19,"strong"),u.EFF(20,"Precio"),u.k0s()()(),u.j41(21,"ion-item")(22,"ion-label"),u.EFF(23,"M\xednimo"),u.k0s(),u.j41(24,"ion-input",6),u.mxI("ngModelChange",function(M){return u.DH7(T.precioMin,M)||(T.precioMin=M),M}),u.k0s()(),u.j41(25,"ion-item")(26,"ion-label"),u.EFF(27,"M\xe1ximo"),u.k0s(),u.j41(28,"ion-input",7),u.mxI("ngModelChange",function(M){return u.DH7(T.precioMax,M)||(T.precioMax=M),M}),u.k0s()(),u.j41(29,"div",8)(30,"ion-button",9),u.bIt("click",function(){return T.applyFilter()}),u.nrm(31,"ion-icon",10),u.EFF(32," Aplicar Filtros "),u.k0s(),u.j41(33,"ion-button",11),u.bIt("click",function(){return T.clearFilters()}),u.nrm(34,"ion-icon",12),u.EFF(35," Limpiar Filtros "),u.k0s()()()()),2&E&&(u.Y8G("isModal",!0)("showNombre",!1)("showLogo",!1),u.R7$(3),u.Y8G("ngIf",T.estatus),u.R7$(),u.Y8G("ngIf",T.estatus),u.R7$(8),u.R50("ngModel",T.fechaInicio),u.R7$(4),u.R50("ngModel",T.fechaFin),u.R7$(8),u.R50("ngModel",T.precioMin),u.R7$(4),u.R50("ngModel",T.precioMax))},dependencies:[_.Sq,_.bT,O.Jm,O.eY,O.W9,O.A9,O.iq,O.$w,O.uz,O.Dg,O.he,O.nf,O.hB,O.su,O.Je,Ce.BC,Ce.vS,U.l,_.PV],styles:[".filter-content[_ngcontent-%COMP%]{--ion-background-color: #f5f5f5}ion-item-divider[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;background:#e0e0e0}.filter-buttons[_ngcontent-%COMP%]{padding:1rem}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:.5rem 0;--border-radius: 12px;font-size:1rem}ion-input[_ngcontent-%COMP%], ion-datetime[_ngcontent-%COMP%]{--padding-start: 1rem;--background: #ffffff;border-radius:8px;margin:.5rem 0}"]}),b})()}}]);