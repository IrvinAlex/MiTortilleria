"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7924],{7924:(be,j,_)=>{_.r(j),_.d(j,{MetodoEntregaEventosPageModule:()=>Pe});var h=_(177),O=_(9417),l=_(5933),x=_(8265),g=_(467),e=_(4438),I=_(7517),D=_(2723),w=_(1876),S=_(8461);const y=o=>[o,"MXN","symbol-narrow","1.2-2","en-US"];function R(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=c.$implicit;e.R7$(2),e.Lme("",(null==a.producto?null:a.producto.nombre)||""," x",a.cantidad,""),e.R7$(2),e.SpI("",e.iJd(5,3,e.eq3(9,y,a.subtotal))," MXN")}}function $(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",21),e.EFF(2,"Subtotal: "),e.k0s(),e.j41(3,"span",21),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,y,null==a.cart?null:a.cart.total))," MXN")}}function N(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",22),e.EFF(2,"Descuento: "),e.k0s(),e.j41(3,"span",22),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("-",e.i5U(5,1,a.porcentaje,"1.0-0"),"%")}}function G(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",23),e.EFF(2,"Subtotal con descuento:"),e.k0s(),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,y,(null==a.cart?null:a.cart.total)-(null==a.cart?null:a.cart.total)*(a.porcentaje/100)))," MXN")}}function A(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span"),e.EFF(2,"Subtotal:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,y,null==a.cart?null:a.cart.total))," MXN")}}function Y(o,c){1&o&&(e.j41(0,"div",24),e.nrm(1,"ion-icon",25),e.j41(2,"span",26),e.EFF(3,"\xa1Tienes env\xedo gratis por eventos!"),e.k0s()())}function L(o,c){if(1&o&&(e.j41(0,"div",27),e.nrm(1,"ion-icon",28),e.j41(2,"span",29),e.EFF(3),e.k0s()()),2&o){const a=e.XpG();e.R7$(3),e.Lme(" Agrega ",a.getRemainingWeightForFreeDelivery(),"kg m\xe1s para env\xedo gratis (m\xednimo ",a.MINIMUM_WEIGHT_FOR_FREE_DELIVERY,"kg) ")}}function z(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span"),e.EFF(2,"Costo de env\xedo:"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,y,a.DELIVERY_FEE_EVENTOS))," MXN")}}function W(o,c){1&o&&(e.j41(0,"div",30),e.nrm(1,"div",31),e.k0s())}function X(o,c){1&o&&e.nrm(0,"ion-icon",35)}function V(o,c){if(1&o){const a=e.RV6();e.j41(0,"div",32)(1,"ion-button",33),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.confirmPayment())}),e.DNE(2,X,1,0,"ion-icon",34),e.EFF(3),e.k0s()()}if(2&o){const a=e.XpG();e.R7$(),e.AVh("animated",a.confirming),e.Y8G("disabled",a.confirming||a.paymentConfirmed),e.R7$(),e.Y8G("ngIf",a.paymentConfirmed),e.R7$(),e.SpI(" ",a.paymentConfirmed?"Pedido Confirmado":"Confirmar Pago"," ")}}let H=(()=>{var o;class c{constructor(){this.selectedPayment=null,this.confirming=!1,this.paymentConfirmed=!1,this.utilsSvc=(0,e.WQX)(D.T),this.firebaseSvc=(0,e.WQX)(I.f),this.emailSvc=(0,e.WQX)(w._),this.discountAmount=0,this.porcentaje=0,this.distanciaKm=0,this.transportFee=0,this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY=60,this.DELIVERY_FEE_EVENTOS=50,this.totalWeight=0}ngOnInit(){this.getCartDetails(),this.applyStoredCoupon(),this.calculateTotalWeight()}calculateTotalWeight(){this.totalWeight=0,this.cart&&this.cart.detalle_carrito&&(this.totalWeight=this.cart.detalle_carrito.reduce((t,n)=>t+(n.cantidad||0),0))}isEligibleForFreeDelivery(){return this.totalWeight>=this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY}getRemainingWeightForFreeDelivery(){return Math.max(0,this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY-this.totalWeight)}getDeliveryFee(){return this.isEligibleForFreeDelivery()?0:this.DELIVERY_FEE_EVENTOS}getTotalAmount(){return this.cart?this.cart.total-this.discountAmount+this.getDeliveryFee():0}sendOrderConfirmationEmail(t,n){var i=this;return(0,g.A)(function*(){try{const r=i.utilsSvc.getFromLocalStorage("user"),s={orderId:t,customerEmail:r.email,customerName:r.name||r.email,fecha:new Date,estatus:"Pedido confirmado",tipo_pago:n,items:i.cart.detalle_carrito,subtotal:i.cart.total,discountAmount:i.cart.total*(i.porcentaje/100),discountPercent:i.porcentaje,transportFee:i.transportFee,total:i.cart.total-i.cart.total*(i.porcentaje/100)+i.transportFee};yield i.emailSvc.sendOrderConfirmationEmail(s),console.log("Email de confirmaci\xf3n enviado exitosamente")}catch(r){console.error("Error al enviar email de confirmaci\xf3n:",r)}})()}renderPayPalButton(){var i,t=this;document.getElementById("paypal-button-container")?window.paypal.Buttons({createOrder:(i,r)=>{const s=this.getTotalAmount();return r.order.create({purchase_units:[{amount:{value:s.toFixed(2)},shipping_address:{country_code:"MX"}}],shipping_preference:"SET_PROVIDED_ADDRESS"})},onApprove:(i=(0,g.A)(function*(r,s){return s.order.capture().then(function(){var m=(0,g.A)(function*(p){console.log("Pago completado:",p);const f=yield t.utilsSvc.loading();yield f.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,g.A)(function*(){const d=document.querySelector(".confirm-button");d&&d.classList.add("complete");const M=t.utilsSvc.getFromLocalStorage("user").uid,u=t.dir()[0],k=t.getTotalAmount(),b={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!0,tipo_pago:"Tarjeta",tipo_entrega:"Eventos",total:k,uid_cliente:M,geopoint_entrega:{latitude:u.geopoint.latitude,longitude:u.geopoint.longitude}},F=t.cart.detalle_carrito.map(E=>({cantidad:E.cantidad,subtotal:E.subtotal,uid_producto:E.uid_producto,uid_opcion:E.uid_opcion}));t.utilsSvc.setElementInLocalstorage("pedido",b),t.utilsSvc.setElementInLocalstorage("detalle_pedido",F);const v=t.cart.id;for(let E of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${M}/carrito_eventos/${v}/detalle_carrito/${E.id}`);const T=yield t.firebaseSvc.addDocument("pedidos",b);for(let E of t.cart.detalle_carrito)yield t.firebaseSvc.addDocument(`pedidos/${T.id}/detalle_pedido`,{cantidad:E.cantidad,subtotal:E.subtotal,uid_producto:E.uid_producto,uid_opcion:E.uid_opcion});yield t.sendOrderConfirmationEmail(T.id,"Tarjeta"),yield t.firebaseSvc.updateDocumet(`users/${M}/carrito_eventos/${v}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito",[t.cart]),localStorage.removeItem("selectedMethod"),f.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)});return function(p){return m.apply(this,arguments)}}())}),function(s,m){return i.apply(this,arguments)}),onError:i=>{console.error("Error en el pago:",i),alert("Hubo un problema con el pago. Por favor, int\xe9ntalo de nuevo.")}}).render("#paypal-button-container"):console.error("Contenedor #paypal-button-container no encontrado.")}onPaymentChange(t){var n=this;return(0,g.A)(function*(){if(n.selectedPayment=t,"paypal"===t){const i=yield n.utilsSvc.loading();yield i.present(),setTimeout(()=>{n.renderPayPalButton(),i.dismiss()},1500)}})()}confirmPayment(){var t=this;return(0,g.A)(function*(){const n=yield t.utilsSvc.loading();yield n.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,g.A)(function*(){const i=document.querySelector(".confirm-button");i&&i.classList.add("complete");const r=t.utilsSvc.getFromLocalStorage("user").uid,s=t.dir()[0],m=t.getTotalAmount(),p={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,pago_confirmado:!1,tipo_pago:"Efectivo",tipo_entrega:"Eventos",total:m,uid_cliente:r,geopoint_entrega:{latitude:s.geopoint.latitude,longitude:s.geopoint.longitude}},f=t.cart.detalle_carrito.map(u=>({cantidad:u.cantidad,subtotal:u.subtotal,uid_producto:u.uid_producto,uid_opcion:u.uid_opcion}));t.utilsSvc.setElementInLocalstorage("pedido",p),t.utilsSvc.setElementInLocalstorage("detalle_pedido",f);const d=t.cart.id;for(let u of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${r}/carrito_eventos/${d}/detalle_carrito/${u.id}`);const M=yield t.firebaseSvc.addDocument("pedidos",p);for(let u of t.cart.detalle_carrito)yield t.firebaseSvc.addDocument(`pedidos/${M.id}/detalle_pedido`,{cantidad:u.cantidad,subtotal:u.subtotal,uid_producto:u.uid_producto,uid_opcion:u.uid_opcion});yield t.sendOrderConfirmationEmail(M.id,"Efectivo"),yield t.firebaseSvc.updateDocumet(`users/${r}/carrito_eventos/${d}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_eventos",[t.cart]),localStorage.removeItem("selectedMethod"),n.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)})()}getCartDetails(){var t=this;return(0,g.A)(function*(){const n=yield t.utilsSvc.loading();yield n.present(),t.cart=t.utilsSvc.getFromLocalStorage("carrito_eventos")[0];for(let i of t.cart.detalle_carrito){const r=yield t.firebaseSvc.getDocument(`productos/${i.uid_producto}`),s=yield t.firebaseSvc.getDocument(`productos/${i.uid_producto}/opciones/${i.uid_opcion}`);i.producto=r||{},i.opcion=s||{}}n.dismiss()})()}applyStoredCoupon(){if(this.cart=this.utilsSvc.getFromLocalStorage("carrito_eventos")[0],this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje,this.cart.total-=this.discountAmount)}}calcularDistancia(t,n,i,r){const m=(i-t)*Math.PI/180,p=(r-n)*Math.PI/180,f=Math.sin(m/2)*Math.sin(m/2)+Math.cos(t*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(p/2)*Math.sin(p/2);return 2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))*6371}dir(){return this.utilsSvc.getFromLocalStorage("direccion")||{}}}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-entrega-domicilio-eventos"]],decls:56,vars:36,consts:[["title","Pago",3,"isModal"],[3,"fullscreen"],[1,"payment-card"],[1,"title"],[3,"ionChange"],["button","",1,"option-card",3,"click"],["name","cash-outline","slot","start",1,"option-icon"],["slot","end","value","efectivo"],["name","card-outline","slot","start",1,"option-icon"],["slot","end","value","tarjeta"],[1,"summary-card"],[1,"summary-title"],[1,"summary-item"],["class","summary-item",4,"ngFor","ngForOf"],[1,"divider"],["class","summary-item",4,"ngIf"],["class","free-shipping-message",4,"ngIf"],["class","delivery-fee-message",4,"ngIf"],[1,"summary-item","total-item"],["class","confirm-button-container-paypal",4,"ngIf"],["class","confirm-button-container",4,"ngIf"],[1,"original-price"],[1,"descuento"],[1,"discounted-price"],[1,"free-shipping-message"],["name","gift-outline","color","success"],[1,"success-text"],[1,"delivery-fee-message"],["name","information-circle-outline","color","warning"],[1,"warning-text"],[1,"confirm-button-container-paypal"],["id","paypal-button-container"],[1,"confirm-button-container"],["expand","block","mode","ios",3,"click","disabled"],["name","checkmark-outline","slot","start",4,"ngIf"],["name","checkmark-outline","slot","start"]],template:function(t,n){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"h2",3),e.EFF(5,"M\xe9todo de Pago"),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-radio-group",4),e.bIt("ionChange",function(r){return n.onPaymentChange(r.detail.value)}),e.j41(8,"ion-card",5),e.bIt("click",function(){return n.onPaymentChange("efectivo")}),e.j41(9,"ion-item"),e.nrm(10,"ion-icon",6),e.j41(11,"ion-label"),e.EFF(12,"Efectivo en domicilio"),e.k0s(),e.nrm(13,"ion-radio",7),e.k0s()(),e.j41(14,"ion-card",5),e.bIt("click",function(){return n.onPaymentChange("paypal")}),e.j41(15,"ion-item"),e.nrm(16,"ion-icon",8),e.j41(17,"ion-label"),e.EFF(18,"Tarjeta"),e.k0s(),e.nrm(19,"ion-radio",9),e.k0s()()()()(),e.j41(20,"ion-card",10)(21,"ion-card-header")(22,"h3",11),e.EFF(23,"Resumen de compra"),e.k0s()(),e.j41(24,"ion-card-content")(25,"div",12)(26,"span"),e.EFF(27),e.k0s(),e.j41(28,"span"),e.EFF(29),e.nI1(30,"currency"),e.k0s()(),e.DNE(31,R,6,11,"div",13),e.nrm(32,"div",14),e.DNE(33,$,6,9,"div",15)(34,N,6,4,"div",15)(35,G,6,9,"div",15)(36,A,6,9,"div",15),e.j41(37,"div",12)(38,"span"),e.EFF(39,"Peso total:"),e.k0s(),e.j41(40,"span"),e.EFF(41),e.k0s()(),e.DNE(42,Y,4,0,"div",16)(43,L,4,2,"div",17)(44,z,6,9,"div",15),e.nrm(45,"div",14),e.j41(46,"div",18)(47,"span")(48,"strong"),e.EFF(49,"Total a pagar:"),e.k0s()(),e.j41(50,"span")(51,"strong"),e.EFF(52),e.nI1(53,"currency"),e.k0s()()()()(),e.DNE(54,W,2,0,"div",19)(55,V,4,5,"div",20),e.k0s()),2&t&&(e.Y8G("isModal",!0),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(7),e.AVh("selected","efectivo"===n.selectedPayment),e.R7$(6),e.AVh("selected","paypal"===n.selectedPayment),e.R7$(13),e.SpI("Productos (",(null==n.cart||null==n.cart.detalle_carrito?null:n.cart.detalle_carrito.length)||0,")"),e.R7$(2),e.SpI("",e.iJd(30,20,e.eq3(32,y,null==n.cart?null:n.cart.total))," MXN"),e.R7$(2),e.Y8G("ngForOf",null==n.cart?null:n.cart.detalle_carrito),e.R7$(2),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",0===n.discountAmount),e.R7$(5),e.SpI("",n.totalWeight,"kg"),e.R7$(),e.Y8G("ngIf",n.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!n.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!n.isEligibleForFreeDelivery()),e.R7$(8),e.SpI("",e.iJd(53,26,e.eq3(34,y,n.getTotalAmount()))," MXN"),e.R7$(2),e.Y8G("ngIf","tarjeta"===n.selectedPayment),e.R7$(),e.Y8G("ngIf","efectivo"===n.selectedPayment))},dependencies:[h.Sq,h.bT,l.Jm,l.b_,l.I9,l.ME,l.W9,l.iq,l.uz,l.he,l.KO,l.f0,l.uR,l.Je,S.l,h.QX,h.oe],styles:['@charset "UTF-8";.payment-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{margin:16px;border-radius:16px;box-shadow:0 4px 8px #0000001a}.title[_ngcontent-%COMP%], .summary-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center;color:var(--ion-color-primary)}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;transition:transform .2s ease,background-color .3s ease}.option-card.selected[_ngcontent-%COMP%]{transform:scale(1.05);background-color:var(--ion-color-primary-tint)}.option-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-primary);margin-right:8px}.summary-card[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#343a40}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:1rem}.divider[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;margin:8px 0}.confirm-button-container[_ngcontent-%COMP%], .confirm-button-container-paypal[_ngcontent-%COMP%]{margin:16px}.confirm-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden;transition:background-color .3s ease-in-out}.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden}.confirm-button.animated[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:0%;background:linear-gradient(to right,var(--ion-color-primary),var(--ion-color-secondary),var(--ion-color-tertiary));z-index:1;animation:_ngcontent-%COMP%_slideIn 3s forwards}.confirm-button.animated[_ngcontent-%COMP%]{color:transparent}.confirm-button.animated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.confirm-button.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}@keyframes _ngcontent-%COMP%_slideIn{0%{width:0%}50%{width:100%}to{width:0%}}.total-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.total-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:4px 0}.discounted-price[_ngcontent-%COMP%]{color:green;font-weight:700}.original-price[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;font-size:17px}.descuento[_ngcontent-%COMP%]{font-weight:700;font-size:17px}.free-shipping-message[_ngcontent-%COMP%], .motivational-message[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;margin:8px 0;border-radius:8px;font-size:.9rem}.free-shipping-message[_ngcontent-%COMP%]{background-color:#28a7451a;border:1px solid rgba(40,167,69,.3)}.motivational-message[_ngcontent-%COMP%]{background-color:#007bff1a;border:1px solid rgba(0,123,255,.3)}.success-text[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:500;margin-left:8px}.info-text[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500;margin-left:8px}.total-item[_ngcontent-%COMP%]{font-size:1.1rem;border-top:2px solid var(--ion-color-primary);padding-top:12px;margin-top:8px}']}),c})();const P=o=>[o,"MXN","symbol-narrow","1.2-2","en-US"];function U(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=c.$implicit;e.R7$(2),e.Lme("",(null==a.producto?null:a.producto.nombre)||""," x",a.cantidad,""),e.R7$(2),e.SpI("",e.iJd(5,3,e.eq3(9,P,a.subtotal))," MXN")}}function B(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",20),e.EFF(2,"Total: "),e.k0s(),e.j41(3,"span",20),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,P,null==a.cart?null:a.cart.total))," MXN")}}function J(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",21),e.EFF(2,"Descuento: "),e.k0s(),e.j41(3,"span",21),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("-",e.i5U(5,1,a.porcentaje,"1.0-0"),"%")}}function q(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span",22),e.EFF(2,"Total con descuento:"),e.k0s(),e.j41(3,"span",22),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,P,(null==a.cart?null:a.cart.total)-(null==a.cart?null:a.cart.total)*(a.porcentaje/100)))," MXN")}}function Q(o,c){if(1&o&&(e.j41(0,"div",12)(1,"span"),e.EFF(2,"Pagas"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(4),e.SpI("",e.iJd(5,1,e.eq3(7,P,null==a.cart?null:a.cart.total))," MXN")}}function K(o,c){1&o&&(e.j41(0,"div",23),e.nrm(1,"ion-icon",24),e.j41(2,"span",25),e.EFF(3,"\xa1Calificas para promoci\xf3n de eventos!"),e.k0s()())}function Z(o,c){if(1&o&&(e.j41(0,"div",26),e.nrm(1,"ion-icon",27),e.j41(2,"span",28),e.EFF(3),e.k0s()()),2&o){const a=e.XpG();e.R7$(3),e.Lme(" Agrega ",a.getRemainingWeightForFreeDelivery(),"kg m\xe1s para promoci\xf3n de eventos (m\xednimo ",a.MINIMUM_WEIGHT_FOR_FREE_DELIVERY,"kg) ")}}function ee(o,c){1&o&&(e.j41(0,"div",29),e.nrm(1,"div",30),e.k0s())}function te(o,c){1&o&&e.nrm(0,"ion-icon",34)}function ne(o,c){if(1&o){const a=e.RV6();e.j41(0,"div",31)(1,"ion-button",32),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.confirmPayment())}),e.DNE(2,te,1,0,"ion-icon",33),e.EFF(3),e.k0s()()}if(2&o){const a=e.XpG();e.R7$(),e.AVh("animated",a.confirming),e.Y8G("disabled",a.confirming||a.paymentConfirmed),e.R7$(),e.Y8G("ngIf",a.paymentConfirmed),e.R7$(),e.SpI(" ",a.paymentConfirmed?"Pedido Confirmado":"Confirmar Pago"," ")}}let oe=(()=>{var o;class c{constructor(){this.selectedPayment=null,this.confirming=!1,this.paymentConfirmed=!1,this.utilsSvc=(0,e.WQX)(D.T),this.firebaseSvc=(0,e.WQX)(I.f),this.emailSvc=(0,e.WQX)(w._),this.discountAmount=0,this.porcentaje=0,this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY=60,this.totalWeight=0}ngOnInit(){this.getCartDetails(),this.calculateTotalWeight()}calculateTotalWeight(){this.totalWeight=0,this.cart&&this.cart.detalle_carrito&&(this.totalWeight=this.cart.detalle_carrito.reduce((t,n)=>t+(n.cantidad||0),0))}isEligibleForFreeDelivery(){return this.totalWeight>=this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY}getRemainingWeightForFreeDelivery(){return Math.max(0,this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY-this.totalWeight)}sendOrderConfirmationEmail(t,n){var i=this;return(0,g.A)(function*(){try{const r=i.utilsSvc.getFromLocalStorage("user"),s={orderId:t,customerEmail:r.email,customerName:r.name||r.email,fecha:new Date,fechaRecoleccion:new Date(i.cart.fecha_entrega),estatus:"Pedido confirmado",tipo_pago:n,metodo_entrega:"negocio",es_recoleccion_negocio:!0,items:i.cart.detalle_carrito,subtotal:i.cart.total,discountAmount:i.cart.total*(i.porcentaje/100),discountPercent:i.porcentaje,transportFee:0,total:i.cart.total-i.cart.total*(i.porcentaje/100)};yield i.emailSvc.sendPickupScheduleEmail(s),console.log("Email de confirmaci\xf3n de recolecci\xf3n enviado exitosamente")}catch(r){console.error("Error al enviar email de confirmaci\xf3n:",r)}})()}renderPayPalButton(){var i,t=this;document.getElementById("paypal-button-container")?window.paypal.Buttons({createOrder:(i,r)=>r.order.create({purchase_units:[{amount:{value:this.cart.total-this.cart.total*(this.porcentaje/100)},shipping_address:{country_code:"MX"}}],shipping_preference:"SET_PROVIDED_ADDRESS"}),onApprove:(i=(0,g.A)(function*(r,s){return s.order.capture().then(function(){var m=(0,g.A)(function*(p){console.log("Pago completado:",p);const f=yield t.utilsSvc.loading();yield f.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,g.A)(function*(){const d=document.querySelector(".confirm-button");d&&d.classList.add("complete");const M=t.utilsSvc.getFromLocalStorage("user").uid,u={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,hora_recoleccion:t.cart.fecha_entrega,metodo_entrega:"negocio",es_recoleccion_negocio:!0,pago_confirmado:!0,tipo_pago:"Tarjeta",total:t.cart.total-t.cart.total*(t.porcentaje/100),uid_cliente:M},k=t.cart.detalle_carrito.map(v=>({cantidad:v.cantidad,subtotal:v.subtotal,uid_producto:v.uid_producto,uid_opcion:v.uid_opcion}));t.utilsSvc.setElementInLocalstorage("pedido",u),t.utilsSvc.setElementInLocalstorage("detalle_pedido",k);const b=t.cart.id;for(let v of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${M}/carrito_eventos/${b}/detalle_carrito/${v.id}`);const F=yield t.firebaseSvc.addDocument("pedidos",u);for(let v of t.cart.detalle_carrito)yield t.firebaseSvc.addDocument(`pedidos/${F.id}/detalle_pedido`,{cantidad:v.cantidad,subtotal:v.subtotal,uid_producto:v.uid_producto,uid_opcion:v.uid_opcion});yield t.sendOrderConfirmationEmail(F.id,"Tarjeta"),yield t.firebaseSvc.updateDocumet(`users/${M}/carrito_eventos/${b}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_eventos",[t.cart]),localStorage.removeItem("selectedMethod"),f.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)});return function(p){return m.apply(this,arguments)}}())}),function(s,m){return i.apply(this,arguments)}),onError:i=>{console.error("Error en el pago:",i),alert("Hubo un problema con el pago. Por favor, int\xe9ntalo de nuevo.")}}).render("#paypal-button-container"):console.error("Contenedor #paypal-button-container no encontrado.")}onPaymentChange(t){var n=this;return(0,g.A)(function*(){if(n.selectedPayment=t,"paypal"===t){const i=yield n.utilsSvc.loading();yield i.present(),setTimeout(()=>{n.renderPayPalButton(),i.dismiss()},1500)}})()}confirmPayment(){var t=this;return(0,g.A)(function*(){const n=yield t.utilsSvc.loading();yield n.present(),t.confirming=!0,setTimeout(()=>{t.confirming=!1,t.paymentConfirmed=!0},3e3),setTimeout((0,g.A)(function*(){const i=document.querySelector(".confirm-button");i&&i.classList.add("complete");const r=t.utilsSvc.getFromLocalStorage("user").uid,s={estatus:"Pedido confirmado",fecha:new Date,fecha_entrega:t.cart.fecha_entrega,hora_recoleccion:t.cart.fecha_entrega,metodo_entrega:"negocio",es_recoleccion_negocio:!0,pago_confirmado:!1,tipo_pago:"Efectivo",total:t.cart.total-t.cart.total*(t.porcentaje/100),uid_cliente:r},m=t.cart.detalle_carrito.map(d=>({cantidad:d.cantidad,subtotal:d.subtotal,uid_producto:d.uid_producto,uid_opcion:d.uid_opcion}));t.utilsSvc.setElementInLocalstorage("pedido",s),t.utilsSvc.setElementInLocalstorage("detalle_pedido",m);const p=t.cart.id;for(let d of t.cart.detalle_carrito)yield t.firebaseSvc.deleteDocumet(`users/${r}/carrito_eventos/${p}/detalle_carrito/${d.id}`);const f=yield t.firebaseSvc.addDocument("pedidos",s);for(let d of t.cart.detalle_carrito)yield t.firebaseSvc.addDocument(`pedidos/${f.id}/detalle_pedido`,{cantidad:d.cantidad,subtotal:d.subtotal,uid_producto:d.uid_producto,uid_opcion:d.uid_opcion});yield t.sendOrderConfirmationEmail(f.id,"Efectivo"),yield t.firebaseSvc.updateDocumet(`users/${r}/carrito_eventos/${p}`,{total:0}),t.cart.detalle_carrito=[],t.cart.total=0,t.utilsSvc.setElementInLocalstorage("carrito_eventos",[t.cart]),localStorage.removeItem("selectedMethod"),n.dismiss(),t.utilsSvc.presentToast({message:"Pedido confirmado",duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}),t.paymentConfirmed=!1,t.utilsSvc.dismissModal(!0),t.utilsSvc.routerLink("/main/confirmacion-pago")}),3e3)})()}getCartDetails(){var t=this;return(0,g.A)(function*(){const n=yield t.utilsSvc.loading();yield n.present(),t.cart=t.utilsSvc.getFromLocalStorage("carrito_eventos")[0];for(let i of t.cart.detalle_carrito){const r=yield t.firebaseSvc.getDocument(`productos/${i.uid_producto}`),s=yield t.firebaseSvc.getDocument(`productos/${i.uid_producto}/opciones/${i.uid_opcion}`);i.producto=r||{},i.opcion=s||{}}n.dismiss()})()}applyStoredCoupon(){if(this.cart=this.utilsSvc.getFromLocalStorage("carrito_eventos")[0],this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje,this.cart.total-=this.discountAmount)}}}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-entrega-negocio-eventos"]],decls:46,vars:26,consts:[["title","Pago",3,"isModal"],[3,"fullscreen"],[1,"payment-card"],[1,"title"],[3,"ionChange"],["button","",1,"option-card",3,"click"],["name","cash-outline","slot","start",1,"option-icon"],["slot","end","value","efectivo"],["name","card-outline","slot","start",1,"option-icon"],["slot","end","value","tarjeta"],[1,"summary-card"],[1,"summary-title"],[1,"summary-item"],["class","summary-item",4,"ngFor","ngForOf"],[1,"divider"],["class","summary-item",4,"ngIf"],["class","free-shipping-message",4,"ngIf"],["class","delivery-fee-message",4,"ngIf"],["class","confirm-button-container-paypal",4,"ngIf"],["class","confirm-button-container",4,"ngIf"],[1,"original-price"],[1,"descuento"],[1,"discounted-price"],[1,"free-shipping-message"],["name","gift-outline","color","success"],[1,"success-text"],[1,"delivery-fee-message"],["name","information-circle-outline","color","warning"],[1,"warning-text"],[1,"confirm-button-container-paypal"],["id","paypal-button-container"],[1,"confirm-button-container"],["expand","block","mode","ios",3,"click","disabled"],["name","checkmark-outline","slot","start",4,"ngIf"],["name","checkmark-outline","slot","start"]],template:function(t,n){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"h2",3),e.EFF(5,"M\xe9todo de Pago"),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-radio-group",4),e.bIt("ionChange",function(r){return n.onPaymentChange(r.detail.value)}),e.j41(8,"ion-card",5),e.bIt("click",function(){return n.onPaymentChange("efectivo")}),e.j41(9,"ion-item"),e.nrm(10,"ion-icon",6),e.j41(11,"ion-label"),e.EFF(12,"Efectivo en Negocio"),e.k0s(),e.nrm(13,"ion-radio",7),e.k0s()(),e.j41(14,"ion-card",5),e.bIt("click",function(){return n.onPaymentChange("paypal")}),e.j41(15,"ion-item"),e.nrm(16,"ion-icon",8),e.j41(17,"ion-label"),e.EFF(18,"Tarjeta"),e.k0s(),e.nrm(19,"ion-radio",9),e.k0s()()()()(),e.j41(20,"ion-card",10)(21,"ion-card-header")(22,"h3",11),e.EFF(23,"Resumen de compra"),e.k0s()(),e.j41(24,"ion-card-content")(25,"div",12)(26,"span"),e.EFF(27),e.k0s(),e.j41(28,"span"),e.EFF(29),e.nI1(30,"currency"),e.k0s()(),e.DNE(31,U,6,11,"div",13),e.nrm(32,"div",14),e.DNE(33,B,6,9,"div",15)(34,J,6,4,"div",15)(35,q,6,9,"div",15)(36,Q,6,9,"div",15),e.j41(37,"div",12)(38,"span"),e.EFF(39,"Peso total:"),e.k0s(),e.j41(40,"span"),e.EFF(41),e.k0s()(),e.DNE(42,K,4,0,"div",16)(43,Z,4,2,"div",17),e.k0s()(),e.DNE(44,ee,2,0,"div",18)(45,ne,4,5,"div",19),e.k0s()),2&t&&(e.Y8G("isModal",!0),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(7),e.AVh("selected","efectivo"===n.selectedPayment),e.R7$(6),e.AVh("selected","paypal"===n.selectedPayment),e.R7$(13),e.SpI("Productos (",(null==n.cart||null==n.cart.detalle_carrito?null:n.cart.detalle_carrito.length)||0,")"),e.R7$(2),e.SpI("",e.iJd(30,18,e.eq3(24,P,null==n.cart?null:n.cart.total))," MXN"),e.R7$(2),e.Y8G("ngForOf",null==n.cart?null:n.cart.detalle_carrito),e.R7$(2),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",0===n.discountAmount),e.R7$(5),e.SpI("",n.totalWeight,"kg"),e.R7$(),e.Y8G("ngIf",n.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!n.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf","tarjeta"===n.selectedPayment),e.R7$(),e.Y8G("ngIf","efectivo"===n.selectedPayment))},dependencies:[h.Sq,h.bT,l.Jm,l.b_,l.I9,l.ME,l.W9,l.iq,l.uz,l.he,l.KO,l.f0,l.uR,l.Je,S.l,h.QX,h.oe],styles:['@charset "UTF-8";.payment-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{margin:16px;border-radius:16px;box-shadow:0 4px 8px #0000001a}.title[_ngcontent-%COMP%], .summary-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center;color:var(--ion-color-primary)}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;transition:transform .2s ease,background-color .3s ease}.option-card.selected[_ngcontent-%COMP%]{transform:scale(1.05);background-color:var(--ion-color-primary-tint)}.option-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--ion-color-primary);margin-right:8px}.summary-card[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#343a40}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;font-size:1rem}.divider[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;margin:8px 0}.confirm-button-container[_ngcontent-%COMP%], .confirm-button-container-paypal[_ngcontent-%COMP%]{margin:16px}.confirm-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden;transition:background-color .3s ease-in-out}.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:#fff;font-weight:700;border-radius:24px;text-align:center;position:relative;overflow:hidden}.confirm-button.animated[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:0%;background:linear-gradient(to right,var(--ion-color-primary),var(--ion-color-secondary),var(--ion-color-tertiary));z-index:1;animation:_ngcontent-%COMP%_slideIn 3s forwards}.confirm-button.animated[_ngcontent-%COMP%]{color:transparent}.confirm-button.animated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.confirm-button.complete[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}@keyframes _ngcontent-%COMP%_slideIn{0%{width:0%}50%{width:100%}to{width:0%}}.total-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.total-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:4px 0}.discounted-price[_ngcontent-%COMP%]{color:green;font-weight:700}.original-price[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;font-size:17px}.descuento[_ngcontent-%COMP%]{font-weight:700;font-size:17px}']}),c})();var ie=_(9365);const C=o=>[o,"MXN","symbol-narrow","1.2-2","en-US"];function ae(o,c){1&o&&(e.j41(0,"div",60),e.nrm(1,"ion-icon",61),e.k0s())}function re(o,c){1&o&&(e.j41(0,"div",60),e.nrm(1,"ion-icon",61),e.k0s())}function ce(o,c){1&o&&(e.j41(0,"span",73),e.EFF(1,"\xa1Env\xedo gratis!"),e.k0s())}function se(o,c){1&o&&(e.j41(0,"span",74),e.EFF(1,"Compra m\xednima para env\xedo gratis"),e.k0s())}function le(o,c){1&o&&(e.j41(0,"p"),e.EFF(1," Tu pedido califica para env\xedo gratuito a domicilio "),e.k0s())}function de(o,c){if(1&o&&(e.j41(0,"p"),e.EFF(1," Necesitas "),e.j41(2,"strong"),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const a=e.XpG(2);e.R7$(3),e.SpI("",a.getRemainingWeightForFreeDelivery(),"kg m\xe1s"),e.R7$(),e.SpI(" para env\xedo gratis (m\xednimo ",a.MINIMUM_WEIGHT_FOR_FREE_DELIVERY,"kg) ")}}function ge(o,c){if(1&o&&(e.j41(0,"p",75),e.nrm(1,"ion-icon",20),e.EFF(2),e.nI1(3,"currency"),e.k0s()),2&o){const a=e.XpG(2);e.R7$(2),e.SpI(" Costo de env\xedo: ",e.iJd(3,1,e.eq3(7,C,a.DELIVERY_FEE))," MXN ")}}function me(o,c){if(1&o&&(e.j41(0,"div",62)(1,"div",63)(2,"div",64),e.nrm(3,"ion-icon",48),e.j41(4,"span"),e.EFF(5),e.k0s()(),e.j41(6,"div",65)(7,"div",66),e.nrm(8,"ion-icon",67),e.DNE(9,ce,2,0,"span",68)(10,se,2,0,"span",69),e.k0s(),e.j41(11,"div",70),e.DNE(12,le,2,0,"p",71)(13,de,5,2,"p",71)(14,ge,4,9,"p",72),e.k0s()()()()),2&o){const a=e.XpG();e.R7$(5),e.SpI("Peso actual: ",a.totalWeight,"kg"),e.R7$(),e.AVh("eligible",a.isEligibleForFreeDelivery())("not-eligible",!a.isEligibleForFreeDelivery()),e.R7$(2),e.Y8G("name",a.isEligibleForFreeDelivery()?"checkmark-circle":"information-circle"),e.R7$(),e.Y8G("ngIf",a.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!a.isEligibleForFreeDelivery()),e.R7$(2),e.Y8G("ngIf",a.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!a.isEligibleForFreeDelivery()),e.R7$(),e.Y8G("ngIf",!a.isEligibleForFreeDelivery())}}function ue(o,c){1&o&&(e.qex(0),e.EFF(1," M\xednimo 2 horas de anticipaci\xf3n (9:00 AM - 8:00 PM) "),e.bVm())}function pe(o,c){1&o&&e.EFF(0," Horario: 9:00 AM - 8:00 PM ")}function fe(o,c){if(1&o&&(e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ion-icon",31),e.j41(3,"span"),e.EFF(4),e.k0s()()()),2&o){const a=e.XpG();e.R7$(4),e.JRh(a.getFormattedDateTime())}}function _e(o,c){if(1&o&&(e.j41(0,"div",44)(1,"span",78),e.nrm(2,"ion-icon",79),e.EFF(3),e.k0s(),e.j41(4,"span",80),e.EFF(5),e.nI1(6,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(3),e.SpI(" Descuento (",a.porcentaje,"%) "),e.R7$(2),e.SpI("-",e.iJd(6,2,e.eq3(8,C,a.discountAmount))," MXN")}}function ve(o,c){if(1&o&&(e.j41(0,"div",44)(1,"span",81),e.nrm(2,"ion-icon",82),e.EFF(3," Costo de env\xedo "),e.k0s(),e.j41(4,"span",83),e.EFF(5),e.nI1(6,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(5),e.SpI("",e.iJd(6,1,e.eq3(7,C,a.deliveryFee))," MXN")}}function he(o,c){if(1&o&&(e.j41(0,"div",84),e.nrm(1,"ion-icon",85),e.j41(2,"span"),e.EFF(3),e.nI1(4,"currency"),e.k0s()()),2&o){const a=e.XpG();e.R7$(3),e.SpI("\xa1Ahorras ",e.iJd(4,1,e.eq3(7,C,a.discountAmount))," MXN!")}}function Me(o,c){if(1&o&&(e.j41(0,"div",86),e.nrm(1,"ion-icon",67),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&o){const a=e.XpG();e.R7$(),e.Y8G("name","negocio"===a.selectedMethod?"storefront-outline":"bicycle-outline"),e.R7$(2),e.JRh("negocio"===a.selectedMethod?"Recoger en tienda":"Entrega a domicilio")}}const Ee=[{path:"",component:(()=>{var o;class c{constructor(t,n,i){this.router=t,this.utilsSvc=n,this.firebaseSvc=i,this.selectedMethod="",this.selectedDate="",this.selectedTime="",this.discountAmount=0,this.porcentaje=0,this.minDate="",this.maxDate="",this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY=60,this.DELIVERY_FEE=50,this.totalWeight=0,this.deliveryFee=0,this.showMinimumOrderMessage=!1}ngOnInit(){this.setDateLimits(),this.setDefaultDate(),this.getCartDetails(),this.applyStoredCoupon(),this.calculateTotalWeight()}setDateLimits(){const t=new Date;t.setHours(0,0,0,0),this.minDate=t.toISOString();const n=new Date;n.setMonth(t.getMonth()+1),n.setHours(23,59,59,999),this.maxDate=n.toISOString()}getMinTimeForToday(){const t=new Date;if(new Date(this.selectedDate).toDateString()===t.toDateString()){const i=new Date(t);return i.setHours(i.getHours()+2),i.getHours()<9&&i.setHours(9,0,0,0),`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`}}setDefaultDate(){const t=new Date;this.selectedDate=t.toISOString();const n=new Date;if(n.setHours(n.getHours()+2),n.getHours()>=20){const r=new Date(t);r.setDate(r.getDate()+1),r.setHours(9,0,0,0),this.selectedDate=r.toISOString(),this.selectedTime=r.toISOString()}else{n.getHours()<9&&n.setHours(9,0,0,0);const r=n.toISOString();this.selectedTime=r}}onMethodChange(t){this.selectedMethod=t,this.updateDeliveryFee(),this.showMinimumOrderMessage="domicilio"===t&&this.totalWeight<this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY}calculateTotalWeight(){this.totalWeight=0,this.cart&&this.cart.detalle_carrito&&(this.totalWeight=this.cart.detalle_carrito.reduce((t,n)=>t+(n.cantidad||0),0))}updateDeliveryFee(){this.deliveryFee="domicilio"===this.selectedMethod&&this.totalWeight<this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY?this.DELIVERY_FEE:0}getRemainingWeightForFreeDelivery(){return Math.max(0,this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY-this.totalWeight)}isEligibleForFreeDelivery(){return this.totalWeight>=this.MINIMUM_WEIGHT_FOR_FREE_DELIVERY}continue(){var t=this;return(0,g.A)(function*(){if(t.selectedMethod&&t.selectedDate&&t.selectedTime){if(!t.isValidDate())return void t.utilsSvc.presentToast({message:"Por favor selecciona una fecha v\xe1lida (desde hoy hasta 1 mes)",duration:3e3,color:"warning",position:"top"});if(!t.isWithinBusinessHours())return void t.utilsSvc.presentToast({message:"Horario de atenci\xf3n: Lunes a Domingo de 9:00 AM a 8:00 PM",duration:4e3,color:"warning",position:"top"});if(!t.isValidTime()){const i=new Date(t.selectedDate),r=new Date;return void(i.toDateString()===r.toDateString()?t.utilsSvc.presentToast({message:"Para hoy, la hora debe ser al menos 2 horas despu\xe9s de la hora actual",duration:4e3,color:"warning",position:"top"}):t.utilsSvc.presentToast({message:"Por favor selecciona una hora v\xe1lida",duration:3e3,color:"warning",position:"top"}))}const n=t.combineDateTime();t.utilsSvc.saveInLocalStorage("selectedMethod",t.selectedMethod),t.cart.fecha_entrega=n,t.utilsSvc.saveInLocalStorage("carrito_eventos",[t.cart]),"negocio"===t.selectedMethod?(yield t.savePickupInfoToFirebase(n),(yield t.utilsSvc.presentModal({component:oe,componentProps:{}}))&&t.utilsSvc.dismissModal(!0)):"domicilio"===t.selectedMethod&&(yield t.utilsSvc.presentModal({component:ie.H,componentProps:{}}))&&(yield t.utilsSvc.presentModal({component:H,componentProps:{}}))&&t.utilsSvc.dismissModal(!0)}})()}savePickupInfoToFirebase(t){var n=this;return(0,g.A)(function*(){try{const i=n.utilsSvc.getFromLocalStorage("user").uid,r=n.cart.id;yield n.firebaseSvc.updateDocumet(`users/${i}/carrito_eventos/${r}`,{metodo_entrega:"negocio",fecha_entrega:t,hora_recoleccion:t,es_recoleccion_negocio:!0,updated_at:new Date}),console.log("Informaci\xf3n de recolecci\xf3n guardada en Firebase")}catch(i){console.error("Error al guardar informaci\xf3n de recolecci\xf3n:",i)}})()}isValidDate(){if(!this.selectedDate)return!1;const t=new Date(this.selectedDate),n=new Date;n.setHours(0,0,0,0);const i=new Date;return i.setMonth(n.getMonth()+1),i.setHours(23,59,59,999),t>=n&&t<=i}isValidTime(){if(!this.selectedTime||!this.selectedDate)return!1;const t=new Date(this.selectedDate),n=new Date(this.selectedTime),i=new Date,r=new Date(t);if(r.setHours(n.getHours(),n.getMinutes(),0,0),t.toDateString()===i.toDateString()){const s=new Date(i);s.setHours(s.getHours()+2);const m=new Date(i);return r>=s&&r>m}return!0}isWithinBusinessHours(){if(!this.selectedTime)return!1;const t=new Date(this.selectedTime),m=60*t.getHours()+t.getMinutes();return m>=540&&m<=1320}combineDateTime(){const t=new Date(this.selectedDate),n=new Date(this.selectedTime),i=new Date(t);return i.setHours(n.getHours(),n.getMinutes(),0,0),i.toISOString()}isSelectedDateToday(){return!!this.selectedDate&&new Date(this.selectedDate).toDateString()===(new Date).toDateString()}getFormattedDateTime(){if(!this.selectedDate||!this.selectedTime)return"";const t=this.combineDateTime();return new Date(t).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getCartDetails(){this.cart=this.utilsSvc.getFromLocalStorage("carrito_eventos")[0]}applyStoredCoupon(){if(this.cart){const t=this.utilsSvc.getFromLocalStorage("appliedCoupon");t&&(this.discountAmount=this.cart.total*t.porcentaje/100,this.porcentaje=t.porcentaje)}}getTotalAmount(){if(!this.cart)return 0;let t=this.cart.total;return this.discountAmount>0&&(t-=this.discountAmount),t+=this.deliveryFee,t}onTimeChange(t){if(this.selectedTime=t.detail.value,this.isSelectedDateToday()&&this.selectedTime){const n=this.isValidTime(),i=this.isWithinBusinessHours();(!n||!i)&&console.log("Time validation:",{isValid:n,isWithinHours:i})}}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(x.Ix),e.rXU(D.T),e.rXU(I.f))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-metodo-entrega-eventos"]],decls:121,vars:41,consts:[["futureDate",""],["title","M\xe9todo de entrega",3,"showMenu"],[3,"fullscreen"],[1,"container"],[1,"hero-section"],["name","fast-food-outline",1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"content-grid"],[1,"delivery-section"],[1,"delivery-options"],[1,"delivery-option",3,"click"],[1,"option-header"],[1,"option-icon-wrapper"],["name","storefront",1,"option-main-icon"],["class","option-badge",4,"ngIf"],[1,"option-content"],[1,"option-features"],[1,"feature"],["name","time-outline"],["name","cash-outline"],["name","bicycle",1,"option-main-icon"],["name","location-outline"],["class","delivery-info",4,"ngIf"],[1,"date-section"],[1,"date-card"],[1,"date-header"],["name","calendar-outline",1,"date-icon"],[1,"datetime-container"],[1,"datetime-field"],[1,"datetime-label"],["name","calendar-outline"],["presentation","date","locale","es-ES",1,"custom-datetime",3,"ngModelChange","ngModel","min","max"],[1,"datetime-hint"],["name","information-circle-outline"],["presentation","time","locale","es-ES","hourCycle","h23",1,"custom-datetime",3,"ngModelChange","ionChange","ngModel"],[4,"ngIf","ngIfElse"],["class","selected-datetime",4,"ngIf"],[1,"summary-section"],[1,"summary-card"],[1,"summary-header"],["name","receipt-outline",1,"summary-icon"],[1,"summary-content"],[1,"order-details"],[1,"detail-row"],[1,"detail-label"],["name","bag-outline"],[1,"detail-value"],["name","cube-outline"],["class","detail-row",4,"ngIf"],[1,"summary-divider"],[1,"total-section"],[1,"total-row"],[1,"total-label"],[1,"total-amount"],["class","savings",4,"ngIf"],[1,"footer-content"],["class","selected-method",4,"ngIf"],["expand","block","size","large",1,"continue-button",3,"click","disabled"],["name","arrow-forward-outline","slot","end"],[1,"option-badge"],["name","checkmark-circle"],[1,"delivery-info"],[1,"weight-info"],[1,"current-weight"],[1,"minimum-order-message"],[1,"message-header"],[3,"name"],["class","success-text",4,"ngIf"],["class","warning-text",4,"ngIf"],[1,"message-content"],[4,"ngIf"],["class","delivery-fee-info",4,"ngIf"],[1,"success-text"],[1,"warning-text"],[1,"delivery-fee-info"],[1,"selected-datetime"],[1,"datetime-preview"],[1,"detail-label","discount-label"],["name","pricetag-outline"],[1,"detail-value","discount-value"],[1,"detail-label","delivery-fee-label"],["name","bicycle-outline"],[1,"detail-value","delivery-fee-value"],[1,"savings"],["name","happy-outline"],[1,"selected-method"]],template:function(t,n){if(1&t){const i=e.RV6();e.nrm(0,"app-header",1),e.j41(1,"ion-content",2)(2,"div",3)(3,"div",4),e.nrm(4,"ion-icon",5),e.j41(5,"h1",6),e.EFF(6,"\xbfC\xf3mo quieres recibir tu pedido?"),e.k0s(),e.j41(7,"p",7),e.EFF(8,"Elige la opci\xf3n que mejor se adapte a ti"),e.k0s()(),e.j41(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),e.bIt("click",function(){return e.eBV(i),e.Njj(n.onMethodChange("negocio"))}),e.j41(13,"div",12)(14,"div",13),e.nrm(15,"ion-icon",14),e.k0s(),e.DNE(16,ae,2,0,"div",15),e.k0s(),e.j41(17,"div",16)(18,"h3"),e.EFF(19,"Recoger en tienda"),e.k0s(),e.j41(20,"p"),e.EFF(21,"Retira tu pedido directamente en nuestro local"),e.k0s(),e.j41(22,"div",17)(23,"div",18),e.nrm(24,"ion-icon",19),e.j41(25,"span"),e.EFF(26,"15-20 min"),e.k0s()(),e.j41(27,"div",18),e.nrm(28,"ion-icon",20),e.j41(29,"span"),e.EFF(30,"Sin costo"),e.k0s()()()()(),e.j41(31,"div",11),e.bIt("click",function(){return e.eBV(i),e.Njj(n.onMethodChange("domicilio"))}),e.j41(32,"div",12)(33,"div",13),e.nrm(34,"ion-icon",21),e.k0s(),e.DNE(35,re,2,0,"div",15),e.k0s(),e.j41(36,"div",16)(37,"h3"),e.EFF(38,"Entrega a domicilio"),e.k0s(),e.j41(39,"p"),e.EFF(40,"Recibe tu pedido en la comodidad de tu hogar"),e.k0s(),e.j41(41,"div",17)(42,"div",18),e.nrm(43,"ion-icon",19),e.j41(44,"span"),e.EFF(45,"30-45 min"),e.k0s()(),e.j41(46,"div",18),e.nrm(47,"ion-icon",22),e.j41(48,"span"),e.EFF(49,"A tu puerta"),e.k0s()()(),e.DNE(50,me,15,11,"div",23),e.k0s()()(),e.j41(51,"div",24)(52,"div",25)(53,"div",26),e.nrm(54,"ion-icon",27),e.j41(55,"h3"),e.EFF(56,"Fecha y hora de entrega"),e.k0s()(),e.j41(57,"div",28)(58,"div",29)(59,"label",30),e.nrm(60,"ion-icon",31),e.EFF(61," Fecha "),e.k0s(),e.j41(62,"ion-datetime",32),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.selectedDate,s)||(n.selectedDate=s),e.Njj(s)}),e.k0s(),e.j41(63,"small",33),e.nrm(64,"ion-icon",34),e.EFF(65," Disponible desde hoy hasta 1 mes "),e.k0s()(),e.j41(66,"div",29)(67,"label",30),e.nrm(68,"ion-icon",19),e.EFF(69," Hora "),e.k0s(),e.j41(70,"ion-datetime",35),e.mxI("ngModelChange",function(s){return e.eBV(i),e.DH7(n.selectedTime,s)||(n.selectedTime=s),e.Njj(s)}),e.bIt("ionChange",function(s){return e.eBV(i),e.Njj(n.onTimeChange(s))}),e.k0s(),e.j41(71,"small",33),e.nrm(72,"ion-icon",34),e.DNE(73,ue,2,0,"ng-container",36)(74,pe,1,0,"ng-template",null,0,e.C5r),e.k0s()()(),e.DNE(76,fe,5,1,"div",37),e.k0s()()(),e.j41(77,"div",38)(78,"div",39)(79,"div",40),e.nrm(80,"ion-icon",41),e.j41(81,"h3"),e.EFF(82,"Resumen del pedido"),e.k0s()(),e.j41(83,"div",42)(84,"div",43)(85,"div",44)(86,"span",45),e.nrm(87,"ion-icon",46),e.EFF(88," Productos "),e.k0s(),e.j41(89,"span",47),e.EFF(90),e.k0s()(),e.j41(91,"div",44)(92,"span",45),e.nrm(93,"ion-icon",48),e.EFF(94," Peso total "),e.k0s(),e.j41(95,"span",47),e.EFF(96),e.k0s()(),e.j41(97,"div",44)(98,"span",45),e.EFF(99,"Subtotal"),e.k0s(),e.j41(100,"span",47),e.EFF(101),e.nI1(102,"currency"),e.k0s()(),e.DNE(103,_e,7,10,"div",49)(104,ve,7,9,"div",49),e.k0s(),e.nrm(105,"div",50),e.j41(106,"div",51)(107,"div",52)(108,"span",53),e.EFF(109,"Total a pagar"),e.k0s(),e.j41(110,"span",54),e.EFF(111),e.nI1(112,"currency"),e.k0s()(),e.DNE(113,he,5,9,"div",55),e.k0s()()()()()()(),e.j41(114,"ion-footer")(115,"ion-toolbar")(116,"div",56),e.DNE(117,Me,4,2,"div",57),e.j41(118,"ion-button",58),e.bIt("click",function(){return e.eBV(i),e.Njj(n.continue())}),e.nrm(119,"ion-icon",59),e.EFF(120," Continuar con el pedido "),e.k0s()()()()}if(2&t){const i=e.sdS(75);e.Y8G("showMenu",!0),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(11),e.AVh("selected","negocio"===n.selectedMethod),e.R7$(4),e.Y8G("ngIf","negocio"===n.selectedMethod),e.R7$(15),e.AVh("selected","domicilio"===n.selectedMethod),e.R7$(4),e.Y8G("ngIf","domicilio"===n.selectedMethod),e.R7$(15),e.Y8G("ngIf","domicilio"===n.selectedMethod),e.R7$(12),e.R50("ngModel",n.selectedDate),e.Y8G("min",n.minDate)("max",n.maxDate),e.R7$(8),e.R50("ngModel",n.selectedTime),e.R7$(3),e.Y8G("ngIf",n.isSelectedDateToday())("ngIfElse",i),e.R7$(3),e.Y8G("ngIf",n.selectedDate&&n.selectedTime),e.R7$(14),e.SpI("",(null==n.cart||null==n.cart.detalle_carrito?null:n.cart.detalle_carrito.length)||0," items"),e.R7$(6),e.SpI("",n.totalWeight,"kg"),e.R7$(5),e.SpI("",e.iJd(102,25,e.eq3(37,C,null==n.cart?null:n.cart.total))," MXN"),e.R7$(2),e.Y8G("ngIf",n.discountAmount>0),e.R7$(),e.Y8G("ngIf",n.deliveryFee>0),e.R7$(7),e.SpI("",e.iJd(112,31,e.eq3(39,C,n.getTotalAmount()))," MXN"),e.R7$(2),e.Y8G("ngIf",n.discountAmount>0),e.R7$(4),e.Y8G("ngIf",n.selectedMethod),e.R7$(),e.Y8G("disabled",!n.selectedMethod||!n.selectedDate||!n.selectedTime)}},dependencies:[h.bT,O.BC,O.vS,l.Jm,l.W9,l.A9,l.M0,l.iq,l.ai,l.Je,S.l,h.oe],styles:['ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #a3a3a3 0%, #e2e2e2 100%);--padding-start: 0;--padding-end: 0}.container[_ngcontent-%COMP%]{min-height:100vh;padding:0 16px 100px}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#fff}.hero-section[_ngcontent-%COMP%]   .hero-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:16px;opacity:.9}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.hero-section[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0;font-weight:400}.content-grid[_ngcontent-%COMP%]{display:grid;gap:24px;max-width:1200px;margin:0 auto}@media (min-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr;gap:32px}}.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{display:grid;gap:20px;margin-bottom:24px}@media (min-width: 480px){.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:16px}}@media (min-width: 768px){.delivery-section[_ngcontent-%COMP%]   .delivery-options[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}.delivery-option[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:3px solid transparent;box-shadow:0 8px 32px #0000001a;position:relative;overflow:hidden}.delivery-option[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,#667eea0d,#764ba20d);opacity:0;transition:opacity .3s ease}.delivery-option[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 16px 48px #00000026}.delivery-option[_ngcontent-%COMP%]:hover:before{opacity:1}.delivery-option[_ngcontent-%COMP%]:hover   .option-main-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.delivery-option.selected[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);transform:translateY(-2px);box-shadow:0 12px 40px rgba(var(--ion-color-primary-rgb),.3)}.delivery-option.selected[_ngcontent-%COMP%]:before{opacity:1;background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-secondary-rgb),.1))}.delivery-option.selected[_ngcontent-%COMP%]   .option-main-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);transform:scale(1.05)}.delivery-option.selected[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.option-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative;z-index:1}.option-icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#f8f9fa,#e9ecef);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0000001a}.option-main-icon[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--ion-color-medium);transition:all .3s ease}.option-badge[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--ion-color-success);border-radius:50%;display:flex;align-items:center;justify-content:center}.option-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem}.option-content[_ngcontent-%COMP%]{position:relative;z-index:1}.option-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin:0 0 8px;color:var(--ion-color-dark);transition:color .3s ease}.option-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.95rem;margin:0 0 16px;line-height:1.4}.option-features[_ngcontent-%COMP%]{display:flex;gap:16px}.option-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.85rem;color:var(--ion-color-medium)}.option-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.date-section[_ngcontent-%COMP%]{margin-top:24px}.date-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 8px 32px #0000001a}.date-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.date-header[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-primary)}.date-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:var(--ion-color-dark)}.datetime-container[_ngcontent-%COMP%]{display:grid;gap:20px}@media (min-width: 480px){.datetime-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:16px}}.datetime-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.datetime-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem;font-weight:600;color:var(--ion-color-medium)}.datetime-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.custom-datetime[_ngcontent-%COMP%]{width:100%;--background: var(--ion-color-light);--color: var(--ion-color-primary);--border-radius: 12px;--padding: 16px;--box-shadow: 0px 4px 8px rgba(0, 0, 0, .1);border:2px solid #f0f0f0;transition:border-color .3s ease}.custom-datetime[_ngcontent-%COMP%]:focus-within{border-color:var(--ion-color-primary)}.datetime-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.8rem;color:var(--ion-color-medium);margin-top:4px}.datetime-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-primary)}.selected-datetime[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-secondary-rgb),.05));border-radius:12px;border:2px solid rgba(var(--ion-color-primary-rgb),.2)}.datetime-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:600;color:var(--ion-color-primary)}.datetime-preview[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.datetime-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;text-transform:capitalize}@media (max-width: 767px){.summary-section[_ngcontent-%COMP%]{order:-1}}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 8px 32px #0000001a;position:sticky;top:20px}.summary-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;padding:20px 24px;display:flex;align-items:center;gap:12px}.summary-header[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{font-size:1.5rem}.summary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.summary-content[_ngcontent-%COMP%]{padding:24px}.order-details[_ngcontent-%COMP%]{margin-bottom:20px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ion-color-medium);font-size:.95rem}.detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.detail-row[_ngcontent-%COMP%]   .detail-label.discount-label[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:600}.detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-dark)}.detail-row[_ngcontent-%COMP%]   .detail-value.discount-value[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.summary-divider[_ngcontent-%COMP%]{height:2px;background:linear-gradient(to right,transparent,var(--ion-color-primary),transparent);margin:16px 0;border-radius:2px}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--ion-color-dark)}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:var(--ion-color-primary)}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,rgba(var(--ion-color-success-rgb),.1),rgba(var(--ion-color-success-rgb),.05));border-radius:12px;margin-top:12px}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-success);font-size:1.2rem}.total-section[_ngcontent-%COMP%]   .savings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600;font-size:.9rem}ion-footer[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #f0f0f0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--padding-start: 16px;--padding-end: 16px;--padding-top: 16px;--padding-bottom: 16px}.footer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.selected-method[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(var(--ion-color-primary-rgb),.1);border-radius:8px;font-size:.9rem;color:var(--ion-color-primary);font-weight:600}.selected-method[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.continue-button[_ngcontent-%COMP%]{--border-radius: 16px;--padding-start: 24px;--padding-end: 24px;height:56px;font-size:1.1rem;font-weight:600;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);box-shadow:0 4px 16px rgba(var(--ion-color-primary-rgb),.4);transition:all .3s ease}.continue-button[_ngcontent-%COMP%]:not([disabled]):hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(var(--ion-color-primary-rgb),.5)}.continue-button[disabled][_ngcontent-%COMP%]{opacity:.5;background:var(--ion-color-medium);box-shadow:none}.continue-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.delivery-option[_ngcontent-%COMP%], .date-card[_ngcontent-%COMP%], .summary-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease-out}.delivery-option[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.delivery-option[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.date-card[_ngcontent-%COMP%]{animation-delay:.3s}.summary-card[_ngcontent-%COMP%]{animation-delay:.4s}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0 12px 100px}.hero-section[_ngcontent-%COMP%]{padding:30px 16px}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem}.hero-section[_ngcontent-%COMP%]   .hero-icon[_ngcontent-%COMP%]{font-size:3rem}.delivery-option[_ngcontent-%COMP%], .date-card[_ngcontent-%COMP%]{padding:20px}.option-features[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.summary-content[_ngcontent-%COMP%]{padding:20px}}.delivery-info[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0}.weight-info[_ngcontent-%COMP%]   .current-weight[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-size:.9rem;color:var(--ion-color-medium);font-weight:500}.weight-info[_ngcontent-%COMP%]   .current-weight[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-primary)}.minimum-order-message[_ngcontent-%COMP%]{padding:16px;border-radius:12px;border:2px solid;transition:all .3s ease}.minimum-order-message.eligible[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(var(--ion-color-success-rgb),.1),rgba(var(--ion-color-success-rgb),.05));border-color:var(--ion-color-success)}.minimum-order-message.eligible[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{color:var(--ion-color-success)}.minimum-order-message.not-eligible[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(var(--ion-color-warning-rgb),.1),rgba(var(--ion-color-warning-rgb),.05));border-color:var(--ion-color-warning)}.minimum-order-message.not-eligible[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.minimum-order-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-weight:600;font-size:.9rem}.minimum-order-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem}.minimum-order-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .success-text[_ngcontent-%COMP%]{color:var(--ion-color-success)}.minimum-order-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.85rem;line-height:1.4;color:var(--ion-color-medium)}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:600}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p.delivery-fee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:8px;padding-top:8px;border-top:1px solid rgba(var(--ion-color-warning-rgb),.2);color:var(--ion-color-warning);font-weight:500}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p.delivery-fee-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.detail-row[_ngcontent-%COMP%]   .delivery-fee-label[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:500}.detail-row[_ngcontent-%COMP%]   .delivery-fee-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.detail-row[_ngcontent-%COMP%]   .delivery-fee-value[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:600}@media (max-width: 480px){.delivery-info[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px}.minimum-order-message[_ngcontent-%COMP%]{padding:12px}.minimum-order-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{font-size:.85rem}.minimum-order-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.current-weight[_ngcontent-%COMP%]{font-size:.85rem!important}}']}),c})()}];let ye=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[x.iI.forChild(Ee),x.iI]}),c})();var Ce=_(7383);let Pe=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,O.YN,l.bv,ye,Ce.G]}),c})()}}]);