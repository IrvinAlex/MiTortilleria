"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8018],{5637:(F,P,p)=>{p.r(P),p.d(P,{CuponesPageModule:()=>W});var c=p(177),l=p(9417),a=p(5933),C=p(8265),m=p(467),o=p(4438),b=p(7517),u=p(2723),_=p(8461),f=p(8827);function h(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"Este campo es requerido"),o.k0s())}function g(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"El nombre debe tener al menos 4 caracteres"),o.k0s())}function y(t,s){if(1&t&&(o.j41(0,"div",9),o.DNE(1,h,2,0,"div",10)(2,g,2,0,"div",10),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.descripcion.errors?null:r.form.controls.descripcion.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.descripcion.errors?null:r.form.controls.descripcion.errors.minlength)}}function w(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"Este campo es requerido"),o.k0s())}function j(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"El nombre debe tener al menos 4 caracteres"),o.k0s())}function T(t,s){if(1&t&&(o.j41(0,"div",9),o.DNE(1,w,2,0,"div",10)(2,j,2,0,"div",10),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.codigo.errors?null:r.form.controls.codigo.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.descripcion.errors?null:r.form.controls.descripcion.errors.minlength)}}function E(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"Este campo es requerido"),o.k0s())}function I(t,s){if(1&t&&(o.j41(0,"div",9),o.DNE(1,E,2,0,"div",10),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.numero_compras.errors?null:r.form.controls.numero_compras.errors.required)}}function O(t,s){1&t&&(o.j41(0,"div"),o.EFF(1,"Este campo es requerido"),o.k0s())}function G(t,s){if(1&t&&(o.j41(0,"div",9),o.DNE(1,O,2,0,"div",10),o.k0s()),2&t){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.porcentaje.errors?null:r.form.controls.porcentaje.errors.required)}}let M=(()=>{var t;class s{constructor(){this.cupon=null,this.form=new l.gE({uid:new l.MJ(""),descripcion:new l.MJ("",[l.k0.required,l.k0.minLength(4)]),codigo:new l.MJ("",[l.k0.required,l.k0.minLength(4)]),porcentaje:new l.MJ(null,[l.k0.required]),numero_compras:new l.MJ(null,[l.k0.required])}),this.firebaseSvc=(0,o.WQX)(b.f),this.utilSvc=(0,o.WQX)(u.T)}ngOnInit(){this.cupon&&this.form.patchValue({...this.cupon})}submit(){var e=this;return(0,m.A)(function*(){e.form.valid?e.cupon?yield e.updateCupon():yield e.createCupon():e.utilSvc.presentToast({message:"Por favor, completa todos los campos requeridos.",duration:2e3,color:"warning",position:"top"})})()}createCupon(){var e=this;return(0,m.A)(function*(){const n=yield e.utilSvc.loading();yield n.present();try{const i={...e.form.value};yield e.firebaseSvc.addDocumentWithUid("cupones",i),e.utilSvc.presentToast({message:"Cup\xf3n creado exitosamente.",duration:1500,color:"success"}),e.utilSvc.dismissModal({success:!0})}catch(i){e.utilSvc.presentToast({message:"Error al crear cup\xf3n.",duration:2e3,color:"danger"}),console.error(i)}finally{n.dismiss()}})()}updateCupon(){var e=this;return(0,m.A)(function*(){const n=yield e.utilSvc.loading();yield n.present();try{var i;const k=`cupones/${null===(i=e.form.get("uid"))||void 0===i?void 0:i.value}`,v={...e.form.value};delete v.uid,yield e.firebaseSvc.updateDocumet(k,v),e.utilSvc.presentToast({message:"Cup\xf3n actualizado exitosamente.",duration:1500,color:"success"}),e.utilSvc.dismissModal({success:!0})}catch(d){e.utilSvc.presentToast({message:"Error al actualizar cup\xf3n.",duration:2e3,color:"danger"}),console.error(d)}finally{n.dismiss()}})()}}return(t=s).\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.VBU({type:t,selectors:[["app-add-update-cupon"]],inputs:{cupon:"cupon"},decls:14,vars:13,consts:[[3,"isModal","title"],[1,"ion-padding","ion-text-center",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","descripcion","type","text","label","Descripci\xf3n",3,"control"],["class","validators",4,"ngIf"],["autocomplete","codigo","type","text","label","Cod\xedgo",3,"control"],["autocomplete","numero_compras","type","number","label","N\xfamero de compras minimas",3,"control"],["autocomplete","off","autocorrect","off","type","number","label","Porcentaje",3,"control"],["mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","checkmark-circle-outline"],[1,"validators"],[4,"ngIf"]],template:function(e,n){1&e&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"form",1),o.bIt("ngSubmit",function(){return n.submit()})("keypress.enter",function(){return n.submit()}),o.nrm(3,"app-custom-input",2),o.DNE(4,y,3,2,"div",3),o.nrm(5,"app-custom-input",4),o.DNE(6,T,3,2,"div",3),o.nrm(7,"app-custom-input",5),o.DNE(8,I,2,1,"div",3),o.nrm(9,"app-custom-input",6),o.DNE(10,G,2,1,"div",3),o.j41(11,"ion-button",7),o.EFF(12),o.nrm(13,"ion-icon",8),o.k0s()()()),2&e&&(o.Y8G("isModal",!0)("title",n.cupon?"Actualizar cup\xf3n":"Agregar cup\xf3n"),o.R7$(2),o.Y8G("formGroup",n.form),o.R7$(),o.Y8G("control",n.form.controls.descripcion),o.R7$(),o.Y8G("ngIf",n.form.controls.descripcion.errors&&n.form.controls.descripcion.touched),o.R7$(),o.Y8G("control",n.form.controls.codigo),o.R7$(),o.Y8G("ngIf",n.form.controls.codigo.errors&&n.form.controls.codigo.touched),o.R7$(),o.Y8G("control",n.form.controls.numero_compras),o.R7$(),o.Y8G("ngIf",n.form.controls.numero_compras.errors&&n.form.controls.numero_compras.touched),o.R7$(),o.Y8G("control",n.form.controls.porcentaje),o.R7$(),o.Y8G("ngIf",n.form.controls.porcentaje.errors&&n.form.controls.porcentaje.touched),o.R7$(),o.Y8G("disabled",n.form.invalid),o.R7$(),o.SpI(" ",n.cupon?"Actualizar cup\xf3n":"Agregar cup\xf3n"," "))},dependencies:[c.bT,a.Jm,a.W9,a.iq,l.qT,l.cb,l.j4,_.l,f.H]}),s})();var N=p(6585);function D(t,s){1&t&&(o.j41(0,"span"),o.EFF(1,"Enviar"),o.k0s())}function R(t,s){1&t&&o.nrm(0,"ion-spinner",12)}let x=(()=>{var t;class s{constructor(e,n,i){this.modalCtrl=e,this.notificationsPushSvc=n,this.utilsSvc=i,this.loading=!1}ngOnInit(){}sendNotification(){var e=this;return(0,m.A)(function*(){if(e.notificationForm.valid){e.loading=!0;const{title:n,message:i}=e.notificationForm.value;try{yield e.notificationsPushSvc.sendPushNotification(n,i),e.utilsSvc.presentToast({message:"Notificaci\xf3n enviada exitosamente.",duration:1500,color:"success",position:"bottom",icon:"send-outline"}),e.notificationForm.reset(),e.close()}catch{e.utilsSvc.presentToast({message:"Error al enviar la notificaci\xf3n.",duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"})}e.loading=!1}})()}close(){this.modalCtrl.dismiss({sent:!0})}}return(t=s).\u0275fac=function(e){return new(e||t)(o.rXU(a.W3),o.rXU(N.e),o.rXU(u.T))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-notification-modal"]],inputs:{notificationForm:"notificationForm"},decls:21,vars:4,consts:[["color","primary"],["slot","end"],[3,"click"],["name","close-outline"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","title"],["formControlName","message"],["expand","block","color","success","type","submit",1,"modern-send-btn",3,"disabled"],["name","send"],[4,"ngIf"],["name","dots",4,"ngIf"],["name","dots"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o.EFF(3,"Enviar notificaci\xf3n push"),o.k0s(),o.j41(4,"ion-buttons",1)(5,"ion-button",2),o.bIt("click",function(){return n.close()}),o.nrm(6,"ion-icon",3),o.k0s()()()(),o.j41(7,"ion-content")(8,"form",4),o.bIt("ngSubmit",function(){return n.sendNotification()}),o.j41(9,"ion-item")(10,"ion-label",5),o.EFF(11,"T\xedtulo"),o.k0s(),o.nrm(12,"ion-input",6),o.k0s(),o.j41(13,"ion-item")(14,"ion-label",5),o.EFF(15,"Mensaje"),o.k0s(),o.nrm(16,"ion-textarea",7),o.k0s(),o.j41(17,"ion-button",8),o.nrm(18,"ion-icon",9),o.DNE(19,D,2,0,"span",10)(20,R,1,0,"ion-spinner",11),o.k0s()()()),2&e&&(o.R7$(8),o.Y8G("formGroup",n.notificationForm),o.R7$(9),o.Y8G("disabled",!n.notificationForm.valid||n.loading),o.R7$(2),o.Y8G("ngIf",!n.loading),o.R7$(),o.Y8G("ngIf",n.loading))},dependencies:[c.bT,a.Jm,a.QW,a.W9,a.eU,a.iq,a.$w,a.uz,a.he,a.w2,a.nc,a.BC,a.ai,a.Gw,l.qT,l.BC,l.cb,l.j4,l.JD],styles:["ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff}ion-content[_ngcontent-%COMP%]{padding:1.5rem;background:#fff;border-radius:0 0 18px 18px}ion-item[_ngcontent-%COMP%]{border-radius:8px;margin-bottom:1rem;box-shadow:0 1px 4px #1ad43614}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{background:#f4fff4;border-radius:6px;padding:8px;font-size:16px}.modern-send-btn[_ngcontent-%COMP%]{margin-top:1rem;font-size:16px;box-shadow:0 2px 8px #1ad4361f;background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff;border:none}"]}),s})();function $(t,s){if(1&t){const r=o.RV6();o.j41(0,"ion-input",28),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG(2).$implicit,d=o.XpG().$implicit;return o.DH7(d[i.key],n)||(d[i.key]=n),o.Njj(n)}),o.bIt("keyup.enter",function(){o.eBV(r);const n=o.XpG(4);return o.Njj(n.finishEditing())})("blur",function(){o.eBV(r);const n=o.XpG(4);return o.Njj(n.finishEditing())}),o.k0s()}if(2&t){const r=o.XpG(2).$implicit,e=o.XpG().$implicit;o.R50("ngModel",e[r.key])}}function S(t,s){if(1&t&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&t){const r=o.XpG(2).$implicit,e=o.XpG().$implicit;o.R7$(),o.SpI(" ",e[r.key]," ")}}function A(t,s){if(1&t&&(o.j41(0,"ion-col",26),o.DNE(1,$,1,1,"ion-input",27)(2,S,2,1,"span",11),o.k0s()),2&t){const r=o.XpG().$implicit,e=o.XpG().$implicit,n=o.XpG();o.R7$(),o.Y8G("ngIf",n.editingFieldKey===r.key&&n.editingField===e),o.R7$(),o.Y8G("ngIf",!(n.editingFieldKey===r.key&&n.editingField===e))}}function U(t,s){if(1&t&&(o.qex(0),o.DNE(1,A,3,2,"ion-col",25),o.bVm()),2&t){const r=s.$implicit,e=o.XpG(2);o.R7$(),o.Y8G("ngIf",e.shouldShowField(r.key))}}function X(t,s){if(1&t){const r=o.RV6();o.j41(0,"ion-row",17),o.DNE(1,U,2,1,"ng-container",18),o.j41(2,"ion-col")(3,"ion-button",19),o.bIt("click",function(){const n=o.eBV(r).$implicit,i=o.XpG();return o.Njj(i.editItem(n))}),o.nrm(4,"ion-icon",20),o.k0s(),o.j41(5,"ion-button",21),o.bIt("click",function(){const n=o.eBV(r).$implicit,i=o.XpG();return o.Njj(i.deleteItem(n))}),o.nrm(6,"ion-icon",22),o.k0s(),o.j41(7,"ion-button",23),o.bIt("click",function(){const n=o.eBV(r).$implicit,i=o.XpG();return o.Njj(i.openNotificationModalForCupon(n))}),o.nrm(8,"ion-icon",24),o.EFF(9," Notificar "),o.k0s()()()}if(2&t){const r=o.XpG();o.R7$(),o.Y8G("ngForOf",r.fields)}}function Y(t,s){if(1&t){const r=o.RV6();o.j41(0,"ion-modal")(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),o.EFF(4,"Enviar notificaci\xf3n push"),o.k0s(),o.j41(5,"ion-buttons",29)(6,"ion-button",6),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.closeNotificationModal())}),o.nrm(7,"ion-icon",30),o.k0s()()()(),o.j41(8,"ion-content")(9,"form",31),o.bIt("ngSubmit",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.sendNotification())}),o.j41(10,"ion-item")(11,"ion-label",32),o.EFF(12,"T\xedtulo"),o.k0s(),o.nrm(13,"ion-input",33),o.k0s(),o.j41(14,"ion-item")(15,"ion-label",32),o.EFF(16,"Mensaje"),o.k0s(),o.nrm(17,"ion-textarea",34),o.k0s(),o.j41(18,"ion-button",35),o.nrm(19,"ion-icon",36),o.EFF(20," Enviar "),o.k0s()()()()}if(2&t){const r=o.XpG();o.R7$(9),o.Y8G("formGroup",r.notificationForm),o.R7$(9),o.Y8G("disabled",!r.notificationForm.valid)}}const z=[{path:"",component:(()=>{var t;class s{constructor(e,n,i,d,k,v){this.modalCtrl=e,this.formBuilder=n,this.cdr=i,this.firebaseService=d,this.alertController=k,this.ionicModalCtrl=v,this.data=[],this.isModalOpen=!1,this.filteredData=[...this.data],this.editingField=null,this.editingFieldKey="",this.searchTerm="",this.utilsSvc=(0,o.WQX)(u.T),this.areColumnsVisible=!1,this.paginatedData=[],this.currentPage=1,this.itemsPerPage=10,this.totalPages=0,this.showDescripcion=!1,this.showPorcentaje=!1,this.showNumeroCompras=!1,this.showCodigo=!1,this.firebaseSvc=(0,o.WQX)(b.f),this.isNotificationModalOpen=!1,this.selectedCupon=null,this.fields=[{key:"descripcion",label:"Descripcion"},{key:"numero_compras",label:"N\xfamero de compras minimas"},{key:"porcentaje",label:"Porcentaje"},{key:"codigo",label:"Cod\xedgo"}],this.setPage(1),this.cuponForm=this.formBuilder.group({uid:[""],descripcion:[""],numero_compras:[""],porcentaje:[""],codigo:[""]}),this.notificationForm=this.formBuilder.group({title:["",l.k0.required],message:["",l.k0.required]})}ngOnInit(){this.getCupones()}doRefresh(e){setTimeout(()=>{e.target.complete()},1e3)}filterItems(e){const n=e.target.value.toLowerCase();this.paginatedData=this.data.filter(i=>Object.values(i).some(d=>d.toString().toLowerCase().includes(n))),this.cdr.detectChanges()}sortTable(e){this.paginatedData.sort((n,i)=>n[e]<i[e]?-1:n[e]>i[e]?1:0),this.cdr.detectChanges()}editField(e,n){this.editingField=e,this.editingFieldKey=n}finishEditing(){this.editingField=null,this.editingFieldKey=null}deleteItem(e){this.presentConfirmDeleteAlert(e)}presentConfirmDeleteAlert(e){var n=this;return(0,m.A)(function*(){yield(yield n.alertController.create({header:"Confirmaci\xf3n",message:`\xbfEst\xe1s seguro de que deseas eliminar el ${e.descripcion}?`,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{n.utilsSvc.presentToast({message:"Eliminaci\xf3n cancelada.",duration:1500,color:"warning",position:"bottom",icon:"alert-circle-outline"})}},{text:"Eliminar",role:"destructive",handler:()=>{n.confirmDeleteItem(e)}}]})).present()})()}confirmDeleteItem(e){const n=this.data.findIndex(i=>i.uid===e.uid);n>-1?(this.data.splice(n,1),this.paginatedData=[...this.data],this.setPage(1),this.cdr.detectChanges(),this.firebaseSvc.deleteDocumet(`cupones/${e.uid}`).then(()=>{this.utilsSvc.presentToast({message:"Cup\xf3n eliminado exitosamente.",duration:1500,color:"success",position:"bottom",icon:"checkmark-circle-outline"}),console.log("Documento eliminado de Firestore")}).catch(d=>{this.utilsSvc.presentToast({message:"Error al eliminar el cup\xf3n.",duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"}),console.error("Error al eliminar el documento: ",d)})):this.utilsSvc.presentToast({message:"Cup\xf3n no encontrado en la lista.",duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"})}editItem(e){var n=this;return(0,m.A)(function*(){try{const i=yield n.modalCtrl.create({component:M,componentProps:{cupon:e}});i.onDidDismiss().then(d=>{d.data&&n.getCupones()}),yield i.present()}catch(i){console.error("Error al editar el cup\xf3n:",i)}})()}openAddCuponModal(){var e=this;return(0,m.A)(function*(){const n=yield e.modalCtrl.create({component:M,componentProps:{cuponForm:e.cuponForm}});return n.onDidDismiss().then(i=>{i.data&&(e.paginatedData=[...e.data],e.cdr.detectChanges())}),yield n.present()})()}openNotificationModal(){var e=this;return(0,m.A)(function*(){e.isNotificationModalOpen=!0;const n=yield e.ionicModalCtrl.create({component:x,componentProps:{notificationForm:e.notificationForm}});return n.onDidDismiss().then(i=>{e.isNotificationModalOpen=!1,i.data&&i.data.length>0&&e.utilsSvc.presentToast({message:"Notificaci\xf3n enviada.",duration:1500,color:"primary",position:"bottom",icon:"send-outline"})}),yield n.present()})()}sendNotification(){if(this.notificationForm.valid){const{title:e,message:n}=this.notificationForm.value;this.firebaseService.sendPushNotification({title:e,message:n}).then(()=>{this.utilsSvc.presentToast({message:"Notificaci\xf3n enviada exitosamente.",duration:1500,color:"success",position:"bottom",icon:"send-outline"}),this.notificationForm.reset(),this.closeNotificationModal()}).catch(i=>{this.utilsSvc.presentToast({message:"Error al enviar la notificaci\xf3n.",duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"}),console.error("Error al enviar la notificaci\xf3n: ",i)})}}closeNotificationModal(){this.ionicModalCtrl.dismiss(),this.isNotificationModalOpen=!1}openNotificationModalForCupon(e){var n=this;return(0,m.A)(function*(){n.selectedCupon=e,n.notificationForm.patchValue({title:`\xa1Oferta especial! ${e.descripcion}`,message:`Cup\xf3n: ${e.codigo} - ${e.porcentaje}% de descuento en compras m\xednimas de ${e.numero_compras}.`}),n.isNotificationModalOpen=!0;const i=yield n.ionicModalCtrl.create({component:x,componentProps:{notificationForm:n.notificationForm}});return i.onDidDismiss().then(d=>{n.isNotificationModalOpen=!1,n.selectedCupon=null,d.data&&d.data.length>0&&n.utilsSvc.presentToast({message:"Notificaci\xf3n enviada.",duration:1500,color:"primary",position:"bottom",icon:"send-outline"})}),yield i.present()})()}setPage(e){this.currentPage=e;const n=(e-1)*this.itemsPerPage;this.paginatedData=this.data.slice(n,n+this.itemsPerPage),this.totalPages=Math.ceil(this.data.length/this.itemsPerPage)}previousPage(){this.currentPage>1&&this.setPage(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages&&this.setPage(this.currentPage+1)}toggleColumns(){this.showDescripcion=!this.showDescripcion,this.showNumeroCompras=!this.showNumeroCompras,this.showPorcentaje=!this.showPorcentaje,this.showCodigo=!this.showCodigo,this.areColumnsVisible=!this.areColumnsVisible}shouldShowField(e){return!0}getCupones(){this.firebaseService.obtenerColeccion("cupones").subscribe(e=>{this.data=e.map(n=>({uid:n.uid,descripcion:n.descripcion,numero_compras:n.numero_compras,porcentaje:n.porcentaje,codigo:n.codigo})),this.paginatedData=[...this.data],this.setPage(1)})}}return(t=s).\u0275fac=function(e){return new(e||t)(o.rXU(a.W3),o.rXU(l.ok),o.rXU(o.gRc),o.rXU(b.f),o.rXU(a.hG),o.rXU(a.W3))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-cupones"]],decls:39,vars:8,consts:[["title","Cupones",3,"showMenu"],[1,"ion-padding-top","ion-text-center"],["slot","fixed",3,"ionRefresh"],["size","8"],["placeholder","Buscar cupones...",3,"ngModelChange","ionInput","ngModel"],["size","4",1,"ion-text-right"],[3,"click"],["name","add-circle-outline"],[1,"table-header"],[1,"header-row"],["class","data-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination"],["color","light","expand","full",1,"pagination-button",3,"click","disabled"],["slot","start","name","arrow-back"],[1,"pagination-info"],["slot","end","name","arrow-forward"],[1,"data-row"],[4,"ngFor","ngForOf"],["color","warning",3,"click"],["name","create"],["color","danger",3,"click"],["name","trash"],["color","primary",2,"margin-left","0.5rem",3,"click"],["name","send","slot","start"],["class","pointer-on",4,"ngIf"],[1,"pointer-on"],["class","cololetra",3,"ngModel","ngModelChange","keyup.enter","blur",4,"ngIf"],[1,"cololetra",3,"ngModelChange","keyup.enter","blur","ngModel"],["slot","end"],["name","close-outline"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","title"],["formControlName","message"],["expand","block","color","success","type","submit",1,"modern-send-btn",3,"disabled"],["name","send"]],template:function(e,n){1&e&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content",1)(2,"ion-refresher",2),o.bIt("ionRefresh",function(d){return n.doRefresh(d)}),o.nrm(3,"ion-refresher-content"),o.k0s(),o.j41(4,"h2"),o.EFF(5,"Administraci\xf3n de cupones"),o.k0s(),o.j41(6,"ion-grid")(7,"ion-row")(8,"ion-col",3)(9,"ion-searchbar",4),o.mxI("ngModelChange",function(d){return o.DH7(n.searchTerm,d)||(n.searchTerm=d),d}),o.bIt("ionInput",function(d){return n.filterItems(d)}),o.k0s()(),o.j41(10,"ion-col",5)(11,"ion-button",6),o.bIt("click",function(){return n.openAddCuponModal()}),o.nrm(12,"ion-icon",7),o.EFF(13," Agregar cup\xf3n "),o.k0s()()()(),o.j41(14,"div",8),o.nrm(15,"h2"),o.k0s(),o.j41(16,"ion-grid")(17,"ion-row",9)(18,"ion-col",6),o.bIt("click",function(){return n.sortTable("descripcion")}),o.EFF(19,"Descripci\xf3n"),o.k0s(),o.j41(20,"ion-col",6),o.bIt("click",function(){return n.sortTable("numero_compras")}),o.EFF(21,"N\xfamero de compras minimas"),o.k0s(),o.j41(22,"ion-col",6),o.bIt("click",function(){return n.sortTable("porcentaje")}),o.EFF(23,"Descuento"),o.k0s(),o.j41(24,"ion-col",6),o.bIt("click",function(){return n.sortTable("codigo")}),o.EFF(25,"Cod\xedgo"),o.k0s(),o.j41(26,"ion-col"),o.EFF(27,"Acciones"),o.k0s()(),o.DNE(28,X,10,1,"ion-row",10),o.k0s(),o.DNE(29,Y,21,2,"ion-modal",11),o.j41(30,"div",12)(31,"ion-button",13),o.bIt("click",function(){return n.previousPage()}),o.nrm(32,"ion-icon",14),o.EFF(33," Anterior "),o.k0s(),o.j41(34,"span",15),o.EFF(35),o.k0s(),o.j41(36,"ion-button",13),o.bIt("click",function(){return n.nextPage()}),o.EFF(37," Siguiente "),o.nrm(38,"ion-icon",16),o.k0s()()()),2&e&&(o.Y8G("showMenu",!0),o.R7$(9),o.R50("ngModel",n.searchTerm),o.R7$(19),o.Y8G("ngForOf",n.paginatedData),o.R7$(),o.Y8G("ngIf",n.isNotificationModalOpen),o.R7$(2),o.Y8G("disabled",1===n.currentPage),o.R7$(4),o.Lme("P\xe1gina ",n.currentPage," de ",n.totalPages,""),o.R7$(),o.Y8G("disabled",n.currentPage===n.totalPages))},dependencies:[c.Sq,c.bT,l.qT,l.BC,l.cb,l.vS,a.Jm,a.QW,a.hU,a.W9,a.lO,a.eU,a.iq,a.$w,a.uz,a.he,a.To,a.Ki,a.ln,a.S1,a.nc,a.BC,a.ai,a.Sb,a.Gw,_.l,l.j4,l.JD],styles:['@charset "UTF-8";ion-grid[_ngcontent-%COMP%]{border-radius:15px;overflow:hidden;margin-top:20px;padding-left:3rem;padding-right:3rem;box-shadow:0 4px 24px #1ad43614;background:#fff}.header-row[_ngcontent-%COMP%]{background-color:#1ad436;color:#fff;font-weight:700;text-align:center;border-top-left-radius:15px;border-top-right-radius:15px;cursor:pointer;box-shadow:0 2px 8px #1ad4361f;letter-spacing:1px}.data-row[_ngcontent-%COMP%]{background-color:#f9f9f9;border-bottom:1px solid #1ad436;text-align:center;transition:background .2s}.data-row[_ngcontent-%COMP%]:hover{background-color:#e6ffe6}.data-row[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:15px;border-bottom-right-radius:15px}ion-col[_ngcontent-%COMP%]{padding:10px}ion-button[_ngcontent-%COMP%]{margin-top:10px;border-radius:8px;box-shadow:0 2px 8px #1ad4361a;font-weight:600;transition:background .2s,box-shadow .2s}ion-button[color=primary][_ngcontent-%COMP%], .modern-notification-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff;border:none}ion-button[color=success][_ngcontent-%COMP%], .modern-send-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff;border:none}ion-modal[_ngcontent-%COMP%]{--background: #fff;--border-radius: 18px;box-shadow:0 8px 32px #1ad4362e;padding:1.5rem}ion-toolbar[color=primary][_ngcontent-%COMP%]{background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff;border-top-left-radius:18px;border-top-right-radius:18px}ion-item[_ngcontent-%COMP%]{border-radius:8px;margin-bottom:1rem;box-shadow:0 1px 4px #1ad43614}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{background:#f4fff4;border-radius:6px;padding:8px;font-size:16px}.modern-notification-btn[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:16px;box-shadow:0 2px 8px #1ad4361f}.modern-send-btn[_ngcontent-%COMP%]{margin-top:1rem;font-size:16px;box-shadow:0 2px 8px #1ad4361f}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;margin-bottom:3rem;flex-wrap:wrap;background:#f4fff4;border-radius:12px;box-shadow:0 2px 8px #1ad43614}.pagination-button[_ngcontent-%COMP%]{margin:0 5px;flex:1;max-width:150px}.pagination-info[_ngcontent-%COMP%]{font-weight:600;color:#1ad436;margin:0 10px;font-size:16px}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;margin-right:4rem;margin-top:1rem;margin-bottom:1.5rem}.toggle-columns-button[_ngcontent-%COMP%]{font-size:14px;padding:0}.toggle-columns-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.fancy-notification-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1ad436,#0fae2c);color:#fff;border:none;border-radius:30px;box-shadow:0 4px 16px #1ad4362e;font-size:1rem;font-weight:600;padding:.5rem 1.2rem;transition:transform .15s,box-shadow .15s,background .2s;display:inline-flex;align-items:center;gap:.5rem}.fancy-notification-btn[_ngcontent-%COMP%]:hover, .fancy-notification-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px #1ad43647;background:linear-gradient(90deg,#0fae2c,#1ad436)}.fancy-btn-text[_ngcontent-%COMP%]{letter-spacing:1px;font-size:1.1rem;font-weight:600}@media (max-width: 768px){ion-grid[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}ion-col[_ngcontent-%COMP%]{font-size:12px;padding:5px}.header-row[_ngcontent-%COMP%]{font-size:14px}.data-row[_ngcontent-%COMP%]{font-size:12px}ion-searchbar[_ngcontent-%COMP%]{width:100%}.pagination[_ngcontent-%COMP%]{flex-direction:column}.modern-notification-btn[_ngcontent-%COMP%], .modern-send-btn[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.header-row[_ngcontent-%COMP%], .data-row[_ngcontent-%COMP%]{font-size:10px}ion-button[_ngcontent-%COMP%]{font-size:10px;padding:5px}ion-searchbar[_ngcontent-%COMP%]{width:100%;margin-top:5px}.modern-notification-btn[_ngcontent-%COMP%], .modern-send-btn[_ngcontent-%COMP%]{font-size:12px;padding:6px}}']}),s})()}];let B=(()=>{var t;class s{}return(t=s).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[C.iI.forChild(z),C.iI]}),s})();var V=p(7383);let W=(()=>{var t;class s{}return(t=s).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[c.MD,l.YN,a.bv,B,V.G]}),s})()},8827:(F,P,p)=>{p.d(P,{H:()=>b});var c=p(4438),l=p(177),a=p(5933),C=p(9417);function m(u,_){if(1&u&&c.nrm(0,"ion-icon",4),2&u){const f=c.XpG();c.Y8G("name",f.icon)}}function o(u,_){if(1&u){const f=c.RV6();c.j41(0,"ion-button",5),c.bIt("click",function(){c.eBV(f);const g=c.XpG();return c.Njj(g.showOrHidePassword())}),c.nrm(1,"ion-icon",6),c.k0s()}if(2&u){const f=c.XpG();c.R7$(),c.Y8G("name",f.hide?"eye-outline":"eye-off-outline")}}let b=(()=>{var u;class _{constructor(){this.hide=!0}ngOnInit(){"password"==this.type&&(this.isPassword=!0)}showOrHidePassword(){this.hide=!this.hide,this.type=this.hide?"password":"text"}}return(u=_).\u0275fac=function(h){return new(h||u)},u.\u0275cmp=c.VBU({type:u,selectors:[["app-custom-input"]],inputs:{control:"control",type:"type",label:"label",autocomplete:"autocomplete",icon:"icon"},decls:4,vars:6,consts:[["lines","none",1,"custom-input"],["color","primary","slot","start",3,"name",4,"ngIf"],["label-placement","floating",3,"type","autocomplete","label","formControl"],["slot","end","fill","clear","shape","round",3,"click",4,"ngIf"],["color","primary","slot","start",3,"name"],["slot","end","fill","clear","shape","round",3,"click"],["slot","icon-only",3,"name"]],template:function(h,g){1&h&&(c.j41(0,"ion-item",0),c.DNE(1,m,1,1,"ion-icon",1),c.nrm(2,"ion-input",2),c.DNE(3,o,2,1,"ion-button",3),c.k0s()),2&h&&(c.R7$(),c.Y8G("ngIf",g.icon),c.R7$(),c.Y8G("type",g.type)("autocomplete",g.autocomplete)("label",g.label)("formControl",g.control),c.R7$(),c.Y8G("ngIf",g.isPassword))},dependencies:[l.bT,a.Jm,a.iq,a.$w,a.uz,a.Gw,C.BC,C.l_]}),_})()}}]);