"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4839],{4839:(rt,T,b)=>{b.d(T,{_:()=>nt});var f=b(9417),t=b(4438),I=b(467),A=b(7517),P=b(2723);let j=(()=>{var n;class l{constructor(){this.cart={total:0,detalle_carrito:[]},this.utilsSvc=(0,t.WQX)(P.T),this.firebaseSvc=(0,t.WQX)(A.f)}user(){return this.utilsSvc.getFromLocalStorage("user")}addToCart(i,o){var e=this;return(0,I.A)(function*(){const c=yield e.utilsSvc.loading();yield c.present();let a=e.utilsSvc.getFromLocalStorage("carrito_negocio");(!a[0]||"object"!=typeof a[0])&&(a[0]={id:e.firebaseSvc.firestore.createId(),total:0,detalle_carrito:[]}),i=isNaN(i)?0:i,a[0].total=isNaN(a[0].total)?0:a[0].total,a[0].total+=i,Array.isArray(a[0].detalle_carrito)||(a[0].detalle_carrito=[]);const u=e.firebaseSvc.firestore.createId();o.id=u,a[0].detalle_carrito.push(o),e.utilsSvc.setElementInLocalstorage("carrito_negocio",a);const d=e.user().uid,s=a[0].id;try{yield e.firebaseSvc.updateDocumet(`users/${d}/carrito_negocio/${s}`,{total:a[0].total}),yield e.firebaseSvc.setDocument(`users/${d}/carrito_negocio/${s}/detalle_carrito/${u}`,o),console.log("Carrito actualizado en Firebase:",a)}catch(m){console.error("Error al actualizar el carrito en Firebase:",m)}finally{yield c.dismiss()}})()}updateProductInCart(i,o,e,c){var a=this;return(0,I.A)(function*(){const u=yield a.utilsSvc.loading();yield u.present();let d=a.utilsSvc.getFromLocalStorage("carrito_negocio");if(d[0]&&Array.isArray(d[0].detalle_carrito)){const s=d[0].detalle_carrito.findIndex(m=>m.uid_producto===i);if(-1!==s){const m=d[0].detalle_carrito[s].subtotal;d[0].detalle_carrito[s].cantidad=o,d[0].detalle_carrito[s].subtotal=e,d[0].detalle_carrito[s].tamano_tortilla=c,d[0].total=d[0].total-m+e,a.utilsSvc.setElementInLocalstorage("carrito_negocio",d);const v=a.user().uid,h=d[0].id,p=d[0].detalle_carrito[s].id;try{yield a.firebaseSvc.updateDocumet(`users/${v}/carrito_negocio/${h}`,{total:d[0].total}),yield a.firebaseSvc.updateDocumet(`users/${v}/carrito_negocio/${h}/detalle_carrito/${p}`,{cantidad:o,subtotal:e}),console.log("Producto actualizado en Firebase:",d)}catch(_){console.error("Error al actualizar el producto en Firebase:",_)}finally{yield u.dismiss()}}}})()}getCart(){return this.cart}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),l})();var x=b(177),g=b(5933),S=b(8461);const k=n=>[n,"MXN","symbol-narrow","1.2-2","en-US"];function G(n,l){1&n&&(t.j41(0,"ion-text",16),t.EFF(1," Selecciona un tipo de unidad. "),t.k0s())}function E(n,l){1&n&&(t.j41(0,"ion-label",17),t.EFF(1,"Cantidad"),t.k0s())}function V(n,l){if(1&n){const r=t.RV6();t.j41(0,"ion-button",21),t.bIt("click",function(){t.eBV(r);const o=t.XpG(3);return t.Njj(o.decrement())}),t.EFF(1,"-"),t.k0s()}}function R(n,l){if(1&n){const r=t.RV6();t.j41(0,"ion-input",22),t.bIt("ionChange",function(o){t.eBV(r);const e=t.XpG(3);return t.Njj(e.onInputChange(o))})("keypress",function(o){t.eBV(r);const e=t.XpG(3);return t.Njj(e.onKeyPress(o))}),t.j41(1,"ion-label",23),t.EFF(2),t.k0s()()}if(2&n){const r=t.XpG(3);t.Y8G("value",r.quantity),t.R7$(2),t.JRh(r.prefix)}}function q(n,l){if(1&n){const r=t.RV6();t.j41(0,"ion-input",22),t.bIt("ionChange",function(o){t.eBV(r);const e=t.XpG(3);return t.Njj(e.onInputChange(o))})("keypress",function(o){t.eBV(r);const e=t.XpG(3);return t.Njj(e.onKeyPress(o))}),t.j41(1,"ion-label",23),t.EFF(2),t.k0s()()}if(2&n){const r=t.XpG(3);t.Y8G("value",r.dinero),t.R7$(2),t.JRh(r.prefix)}}function Y(n,l){if(1&n){const r=t.RV6();t.j41(0,"ion-button",24),t.bIt("click",function(){t.eBV(r);const o=t.XpG(3);return t.Njj(o.increment())}),t.EFF(1,"+"),t.k0s()}}function X(n,l){if(1&n&&(t.j41(0,"ion-item"),t.DNE(1,V,2,0,"ion-button",18)(2,R,3,2,"ion-input",19)(3,q,3,2,"ion-input",19)(4,Y,2,0,"ion-button",20),t.k0s()),2&n){const r=t.XpG(2);t.R7$(),t.Y8G("ngIf","kg"==r.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf","kg"==r.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf","$"==r.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf","kg"==r.form.value.tipoCambio)}}function O(n,l){1&n&&(t.qex(0),t.EFF(1,"La cantidad es requerida."),t.bVm())}function D(n,l){1&n&&(t.qex(0),t.EFF(1,"Debe ser mayor a 0."),t.bVm())}function w(n,l){if(1&n&&(t.j41(0,"ion-text",16),t.DNE(1,O,2,0,"ng-container",3)(2,D,2,0,"ng-container",3),t.k0s()),2&n){let r,i;const o=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(r=o.form.get("cantidad"))||null==r.errors?null:r.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=o.form.get("cantidad"))||null==i.errors?null:i.errors.min)}}function z(n,l){if(1&n&&(t.j41(0,"ion-select-option",25),t.EFF(1),t.k0s()),2&n){const r=l.$implicit;t.Y8G("value",r.id),t.R7$(),t.SpI(" ",r.nombre," ")}}function M(n,l){1&n&&(t.j41(0,"div")(1,"ion-item")(2,"ion-select",26)(3,"ion-select-option",27),t.EFF(4,"14"),t.k0s(),t.j41(5,"ion-select-option",28),t.EFF(6,"13"),t.k0s(),t.j41(7,"ion-select-option",29),t.EFF(8,"12"),t.k0s()()()())}function B(n,l){1&n&&(t.j41(0,"ion-text",16),t.EFF(1," Selecciona un tipo de opci\xf3n. "),t.k0s())}function L(n,l){if(1&n&&(t.j41(0,"h2",30),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const r=t.XpG(3);t.R7$(),t.SpI("",t.iJd(2,1,t.eq3(7,k,r.form.value.cantidad*r.buscarPrecioPorId(r.form.value.opcion)))," MXN")}}function K(n,l){if(1&n&&(t.j41(0,"h2",30),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&n){const r=t.XpG(3);t.R7$(),t.SpI("",t.i5U(2,1,r.actualizarTotal(),"1.2-2")," kg")}}function J(n,l){if(1&n&&(t.j41(0,"div"),t.DNE(1,L,3,9,"h2",12)(2,K,3,4,"h2",12),t.k0s()),2&n){const r=t.XpG(2);t.R7$(),t.Y8G("ngIf","kg"==r.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf","$"==r.form.value.tipoCambio)}}function U(n,l){1&n&&(t.j41(0,"h2",30),t.EFF(1,"$0.00"),t.k0s())}function Q(n,l){if(1&n){const r=t.RV6();t.j41(0,"div")(1,"ion-item")(2,"ion-select",4),t.bIt("ionChange",function(o){t.eBV(r);const e=t.XpG();return t.Njj(e.onSelectChange(o))}),t.j41(3,"ion-select-option",5),t.EFF(4,"Kilogramo"),t.k0s(),t.j41(5,"ion-select-option",6),t.EFF(6,"Granel"),t.k0s()()(),t.DNE(7,G,2,0,"ion-text",7)(8,E,2,0,"ion-label",8)(9,X,5,4,"ion-item",3)(10,w,3,2,"ion-text",7),t.j41(11,"ion-item")(12,"ion-select",9),t.DNE(13,z,2,2,"ion-select-option",10),t.k0s()(),t.DNE(14,M,9,0,"div",3)(15,B,2,0,"ion-text",7),t.j41(16,"h1",11),t.EFF(17,"Total"),t.k0s(),t.DNE(18,J,3,2,"div",3)(19,U,2,0,"h2",12),t.j41(20,"div",13)(21,"ion-button",14),t.EFF(22),t.nrm(23,"ion-icon",15),t.k0s()()()}if(2&n){let r,i,o;const e=t.XpG();t.R7$(7),t.Y8G("ngIf",(null==(r=e.form.get("tipoCambio"))?null:r.invalid)&&(null==(r=e.form.get("tipoCambio"))?null:r.touched)),t.R7$(),t.Y8G("ngIf",e.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf",e.form.value.tipoCambio),t.R7$(),t.Y8G("ngIf",(null==(i=e.form.get("cantidad"))?null:i.invalid)&&(null==(i=e.form.get("cantidad"))?null:i.touched)),t.R7$(3),t.Y8G("ngForOf",e.filteredOpciones),t.R7$(),t.Y8G("ngIf",e.showTortillaSize),t.R7$(),t.Y8G("ngIf",(null==(o=e.form.get("opcion"))?null:o.invalid)&&(null==(o=e.form.get("opcion"))?null:o.touched)),t.R7$(3),t.Y8G("ngIf",e.form.value.opcion),t.R7$(),t.Y8G("ngIf",!e.form.value.opcion),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(),t.SpI(" ",e.isProductInCart(e.producto.id)?"Actualizar":"Agregar"," ")}}function W(n,l){1&n&&(t.qex(0),t.EFF(1,"La cantidad es requerida."),t.bVm())}function H(n,l){1&n&&(t.qex(0),t.EFF(1,"Debe ser mayor a 0."),t.bVm())}function Z(n,l){if(1&n&&(t.j41(0,"ion-text",16),t.DNE(1,W,2,0,"ng-container",3)(2,H,2,0,"ng-container",3),t.k0s()),2&n){let r,i;const o=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(r=o.form.get("cantidad"))||null==r.errors?null:r.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=o.form.get("cantidad"))||null==i.errors?null:i.errors.min)}}function $(n,l){if(1&n&&(t.j41(0,"ion-select-option",32),t.EFF(1),t.k0s()),2&n){const r=l.$implicit;t.Y8G("value",r.id),t.R7$(),t.SpI(" ",r.nombre," ")}}function tt(n,l){1&n&&(t.j41(0,"ion-text",16),t.EFF(1," Selecciona un tipo de opci\xf3n. "),t.k0s())}function ot(n,l){if(1&n&&(t.j41(0,"div")(1,"h2",30),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&n){const r=t.XpG(2);t.R7$(2),t.SpI("",t.iJd(3,1,t.eq3(7,k,r.form.value.cantidad*r.buscarPrecioPorId(r.form.value.opcion)))," MXN")}}function it(n,l){1&n&&(t.j41(0,"h2",30),t.EFF(1,"$0.00"),t.k0s())}function et(n,l){if(1&n){const r=t.RV6();t.j41(0,"div")(1,"ion-label",17),t.EFF(2,"Cantidad"),t.k0s(),t.j41(3,"ion-item")(4,"ion-button",21),t.bIt("click",function(){t.eBV(r);const o=t.XpG();return t.Njj(o.decrement())}),t.EFF(5,"-"),t.k0s(),t.j41(6,"ion-input",22),t.bIt("ionChange",function(o){t.eBV(r);const e=t.XpG();return t.Njj(e.onInputChange(o))})("keypress",function(o){t.eBV(r);const e=t.XpG();return t.Njj(e.onKeyPress(o))}),t.j41(7,"ion-label",23),t.EFF(8),t.k0s()(),t.j41(9,"ion-button",24),t.bIt("click",function(){t.eBV(r);const o=t.XpG();return t.Njj(o.increment())}),t.EFF(10,"+"),t.k0s()(),t.DNE(11,Z,3,2,"ion-text",7),t.j41(12,"ion-item")(13,"ion-select",9),t.DNE(14,$,2,2,"ion-select-option",31),t.k0s()(),t.DNE(15,tt,2,0,"ion-text",7),t.j41(16,"h1",11),t.EFF(17,"Total"),t.k0s(),t.DNE(18,ot,4,9,"div",3)(19,it,2,0,"h2",12),t.j41(20,"div",13)(21,"ion-button",14),t.EFF(22),t.nrm(23,"ion-icon",15),t.k0s()()()}if(2&n){let r,i;const o=t.XpG();t.R7$(6),t.Y8G("value",o.quantity),t.R7$(2),t.JRh(o.prefix),t.R7$(3),t.Y8G("ngIf",(null==(r=o.form.get("cantidad"))?null:r.invalid)&&(null==(r=o.form.get("cantidad"))?null:r.touched)),t.R7$(3),t.Y8G("ngForOf",o.filteredOpciones),t.R7$(),t.Y8G("ngIf",(null==(i=o.form.get("opcion"))?null:i.invalid)&&(null==(i=o.form.get("opcion"))?null:i.touched)),t.R7$(3),t.Y8G("ngIf",o.form.value.opcion),t.R7$(),t.Y8G("ngIf",!o.form.value.opcion),t.R7$(2),t.Y8G("disabled",o.form.invalid),t.R7$(),t.SpI(" ",o.isProductInCart(o.producto.id)?"Actualizar":"Agregar"," ")}}let nt=(()=>{var n;class l{constructor(i,o,e){this.fb=i,this.cartNegocioService=o,this.utilsSvc=e,this.selectedOption="kg",this.prefix="kg",this.quantity=1,this.dinero=0,this.total=0,this.rangos=[],this.filteredOpciones=[],this.showTortillaSize=!1,this.form=this.fb.group({tipoCambio:[""],cantidad:[1,[f.k0.required,f.k0.min(1)]],opcion:[""],total:[0],tamano_tortilla:[""]}),this.form_detalle_carrito=this.fb.group({cantidad:["",f.k0.required],subtotal:["",[f.k0.required]],uid_producto:["",f.k0.required],uid_opcion:["",f.k0.required],tamano_tortilla:[""],minimo:[0],maximo:[0]})}getCartCount(){const i=this.carrito();return i&&i[0]&&Array.isArray(i[0].detalle_carrito)?i[0].detalle_carrito.length:0}getProductFromCart(i){const o=this.carrito();return o&&o[0]&&Array.isArray(o[0].detalle_carrito)?o[0].detalle_carrito.find(e=>e.uid_producto===i):null}ngOnInit(){let i=Number(this.producto.minimo),o=Number(this.producto.maximo);console.log(this.producto),(isNaN(i)||i<1)&&(i=1),(isNaN(o)||o<i)&&(o=9999),this.producto.minimo=i,this.producto.maximo=o,this.filteredOpciones=Array.isArray(this.producto.opciones)?this.producto.opciones:[],this.filteredOpciones.length>0&&!this.form.value.opcion&&this.form.patchValue({opcion:this.filteredOpciones[0].id});let e=Number(this.buscarPrecioPorId(this.form.value.opcion))||0;const c=this.getProductFromCart(this.producto.id);if(c){let s=Number(c.cantidad);var a;isNaN(s)&&(s=i),s=Math.max(i,Math.min(Number(this.producto.maximo),s)),this.form.patchValue({tipoCambio:"kg",cantidad:s,opcion:c.uid_opcion,total:c.subtotal,tamano_tortilla:c.tamano_tortilla}),this.quantity=s,this.producto.granel&&"$"===this.form.value.tipoCambio&&(this.dinero=s*e,null===(a=this.form.get("cantidad"))||void 0===a||a.setValue(this.dinero))}else{this.quantity=i,this.form.patchValue({cantidad:i});const s=this.producto.opciones.find(m=>"Con aluminio"===m.nombre);var u;s&&(this.form.patchValue({opcion:s.id}),e=Number(this.buscarPrecioPorId(s.id))||0),this.producto.granel&&"$"===this.form.value.tipoCambio&&(this.dinero=i*e,null===(u=this.form.get("cantidad"))||void 0===u||u.setValue(this.dinero))}var d;this.producto.granel&&"$"===this.form.value.tipoCambio&&(this.dinero=i*e,this.quantity=i,null===(d=this.form.get("cantidad"))||void 0===d||d.setValue(this.dinero)),"Tortillas"===this.producto.nombre&&(this.showTortillaSize=!0)}onSelectChange(i){this.prefix="kg"===i.detail.value?"kg":"$";let o=Number(this.producto.minimo),e=Number(this.buscarPrecioPorId(this.form.value.opcion))||0;var c;if(this.filteredOpciones=Array.isArray(this.producto.opciones)?this.producto.opciones:[],this.filteredOpciones.length>0&&!this.form.value.opcion&&(this.form.patchValue({opcion:this.filteredOpciones[0].id}),e=Number(this.buscarPrecioPorId(this.form.value.opcion))||0),"kg"===i.detail.value)Number(this.quantity)<o&&(this.quantity=o,null===(c=this.form.get("cantidad"))||void 0===c||c.setValue(this.quantity));else if("$"===i.detail.value){var a;this.dinero=o*e,this.quantity=o,null===(a=this.form.get("cantidad"))||void 0===a||a.setValue(this.dinero)}}carrito(){const i=this.utilsSvc.getFromLocalStorage("carrito_negocio");return i&&Array.isArray(i)&&i[0]||this.utilsSvc.setElementInLocalstorage("carrito_negocio",[{id:"",total:0,detalle_carrito:[]}]),i}increment(){let i=Number(this.producto.minimo),o=Number(this.producto.maximo),e=Number(this.quantity);var c,a;(isNaN(i)||i<1)&&(i=1),(isNaN(o)||o<i)&&(o=9999),isNaN(e)&&(e=i),e<o?(this.quantity=e+1,null===(c=this.form.get("cantidad"))||void 0===c||c.setValue(this.quantity)):(this.quantity=o,null===(a=this.form.get("cantidad"))||void 0===a||a.setValue(this.quantity),this.utilsSvc.presentToast({message:`Cantidad m\xe1xima permitida es ${o} kg`,duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"}))}buscarPrecioPorId(i){var o;if(null===(o=this.producto)||void 0===o||!o.opciones||0===this.producto.opciones.length)return void console.error('El arreglo "opciones" no existe o est\xe1 vac\xedo.');let e=[];return e=this.producto.opciones.find(c=>{if(c.id==i)return c.precio}),e.precio}decrement(){let i=Number(this.producto.minimo),o=Number(this.quantity);var e,c;(isNaN(i)||i<1)&&(i=1),isNaN(o)&&(o=i),o>i?(this.quantity=o-1,null===(e=this.form.get("cantidad"))||void 0===e||e.setValue(this.quantity)):(this.quantity=i,null===(c=this.form.get("cantidad"))||void 0===c||c.setValue(this.quantity),this.utilsSvc.presentToast({message:`La cantidad m\xednima permitida es ${i} kg`,duration:2e3,color:"warning",position:"bottom",icon:"remove-circle-outline"}))}onInputChange(i){let o=Number(i.target.value),e=Number(this.producto.minimo),c=Number(this.producto.maximo),a=Number(this.buscarPrecioPorId(this.form.value.opcion))||0;if((isNaN(e)||e<1)&&(e=1),(isNaN(c)||c<e)&&(c=9999),isNaN(o)&&(o=e*a),"$"===this.form.value.tipoCambio){var u;let p=e*a,_=a?parseFloat((o/a).toFixed(2)):e;var d,s;if(o<p)return _=e,o=p,null===(d=this.form.get("cantidad"))||void 0===d||d.setValue(o),this.quantity=_,void this.utilsSvc.presentToast({message:`El monto m\xednimo permitido es $${p} (${e} kg)`,duration:2e3,color:"warning",position:"bottom",icon:"remove-circle-outline"});if(_>c)return _=c,o=c*a,null===(s=this.form.get("cantidad"))||void 0===s||s.setValue(o),this.quantity=_,void this.utilsSvc.presentToast({message:`Cantidad m\xe1xima permitida es ${c} kg`,duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"});this.quantity=_,null===(u=this.form.get("cantidad"))||void 0===u||u.setValue(o)}else if(o>c){var m;this.quantity=c,null===(m=this.form.get("cantidad"))||void 0===m||m.setValue(c),this.utilsSvc.presentToast({message:`Cantidad m\xe1xima permitida es ${c} kg`,duration:2500,color:"primary",position:"bottom",icon:"alert-circle-outline"})}else if(o<e){var v;this.quantity=e,null===(v=this.form.get("cantidad"))||void 0===v||v.setValue(e),this.utilsSvc.presentToast({message:`Cantidad m\xednima permitida es ${e} kg`,duration:2e3,color:"warning",position:"bottom",icon:"remove-circle-outline"})}else{var h;this.quantity=o,null===(h=this.form.get("cantidad"))||void 0===h||h.setValue(this.quantity)}}onKeyPress(i){const o=i.which?i.which:i.keyCode;return-1!==[8,9,27,13,46,110,190].indexOf(o)||65===o&&!0===i.ctrlKey||67===o&&!0===i.ctrlKey||86===o&&!0===i.ctrlKey||88===o&&!0===i.ctrlKey||!(o<48||o>57)||(i.preventDefault(),!1)}actualizarTotal(){let i=Number(this.form.value.cantidad),o=Number(this.buscarPrecioPorId(this.form.value.opcion))||0;if(0===o)return 0;let e=parseFloat((i/o).toFixed(2)),c=Number(this.producto.minimo),a=Number(this.producto.maximo);return e<c&&(e=c),e>a&&(e=a),e}actualizarTotalKg(){let i=Number(this.form.value.cantidad),e=i*(Number(this.buscarPrecioPorId(this.form.value.opcion))||0),c=Number(this.producto.minimo),a=Number(this.producto.maximo);return i<c&&(i=c),i>a&&(i=a),e}isProductInCart(i){const o=this.carrito();return!!(o&&o[0]&&Array.isArray(o[0].detalle_carrito))&&o[0].detalle_carrito.some(e=>e.uid_producto===i)}updateProductInCart(i,o,e,c){const a=this.carrito();if(a&&a[0]&&Array.isArray(a[0].detalle_carrito)){const u=a[0].detalle_carrito.findIndex(d=>d.uid_producto===i);if(-1!==u){const d=a[0].detalle_carrito[u].subtotal;a[0].detalle_carrito[u].cantidad=o,a[0].detalle_carrito[u].subtotal=e,a[0].detalle_carrito[u].tamano_tortilla=c,a[0].total=a[0].total-d+e,a[0].detalle_carrito[u].uid_opcion=this.form.value.opcion,this.utilsSvc.setElementInLocalstorage("carrito_negocio",a)}}}submit(){if(this.form.valid){const h=this.producto.id;let p=this.form.value.cantidad;const _=Number(this.buscarPrecioPorId(this.form.value.opcion))||0,F=this.form.value.tamano_tortilla;if(this.producto.granel&&"$"===this.form.value.tipoCambio){let N=Number(this.producto.minimo)*_;if(p<N)return void this.utilsSvc.presentToast({message:`El monto m\xednimo permitido es $${N} (${this.producto.minimo} kg)`,duration:2e3,color:"warning",position:"bottom",icon:"remove-circle-outline"});p=_?parseFloat((p/_).toFixed(2)):0}const C=p*_;if(this.isProductInCart(h))this.cartNegocioService.updateProductInCart(h,p,C,F),this.utilsSvc.presentToast({message:"Producto actualizado en el carrito",duration:2500,color:"primary",position:"bottom",icon:"cart-outline"});else{var i,o,e,c,a,u,d,s,m,v;if(this.producto.granel)null===(i=this.form_detalle_carrito.get("cantidad"))||void 0===i||i.setValue(p),null===(o=this.form_detalle_carrito.get("subtotal"))||void 0===o||o.setValue(C),null===(e=this.form_detalle_carrito.get("uid_producto"))||void 0===e||e.setValue(h),null===(c=this.form_detalle_carrito.get("minimo"))||void 0===c||c.setValue(this.producto.minimo),null===(a=this.form_detalle_carrito.get("maximo"))||void 0===a||a.setValue(this.producto.maximo),this.form_detalle_carrito.value.uid_opcion=this.form.value.opcion,this.showTortillaSize&&(this.form_detalle_carrito.value.tamano_tortilla=F),this.cartNegocioService.addToCart(C,this.form_detalle_carrito.value);else null===(u=this.form_detalle_carrito.get("cantidad"))||void 0===u||u.setValue(p),null===(d=this.form_detalle_carrito.get("subtotal"))||void 0===d||d.setValue(C),null===(s=this.form_detalle_carrito.get("uid_producto"))||void 0===s||s.setValue(h),null===(m=this.form_detalle_carrito.get("minimo"))||void 0===m||m.setValue(this.producto.minimo),null===(v=this.form_detalle_carrito.get("maximo"))||void 0===v||v.setValue(this.producto.maximo),this.form_detalle_carrito.value.uid_opcion=this.form.value.opcion,this.cartNegocioService.addToCart(C,this.form_detalle_carrito.value);this.utilsSvc.presentToast({message:"Producto agregado al carrito",duration:2500,color:"primary",position:"bottom",icon:"cart-outline"})}this.utilsSvc.dismissModal(!0)}}}return(n=l).\u0275fac=function(i){return new(i||n)(t.rXU(f.ok),t.rXU(j),t.rXU(P.T))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-add-product-negocio"]],inputs:{producto:"producto"},decls:6,vars:6,consts:[[3,"isModal","showNombre","title"],[1,"text"],[3,"ngSubmit","formGroup"],[4,"ngIf"],["label","Tipo de unidad","label-placement","floating","formControlName","tipoCambio","fill","solid",3,"ionChange"],["value","kg"],["value","$"],["color","danger",4,"ngIf"],["style","margin-left: 2rem;",4,"ngIf"],["label","Opciones","label-placement","floating","formControlName","opcion","fill","solid"],[3,"value",4,"ngFor","ngForOf"],[2,"font-weight","bolder"],["class","buttotal",4,"ngIf"],[2,"display","flex","justify-content","flex-end"],["type","submit",1,"btntarget",3,"disabled"],["name","checkmark-circle-outline",1,"iconmodal"],["color","danger"],[2,"margin-left","2rem"],["fill","solid","color","primary","slot","start","class","animated-button",3,"click",4,"ngIf"],["type","number","formControlName","cantidad","placeholder","Cantidad",3,"value","ionChange","keypress",4,"ngIf"],["fill","solid","color","primary","slot","end","class","animated-button",3,"click",4,"ngIf"],["fill","solid","color","primary","slot","start",1,"animated-button",3,"click"],["type","number","formControlName","cantidad","placeholder","Cantidad",3,"ionChange","keypress","value"],["slot","start"],["fill","solid","color","primary","slot","end",1,"animated-button",3,"click"],[3,"value"],["label","Tama\xf1o de Tortilla","label-placement","floating","formControlName","tamano_tortilla","fill","solid"],["value","14"],["value","13"],["value","12"],[1,"buttotal"],["mode","ios",3,"value",4,"ngFor","ngForOf"],["mode","ios",3,"value"]],template:function(i,o){1&i&&(t.nrm(0,"app-header",0),t.j41(1,"ion-content")(2,"ion-card-content",1)(3,"form",2),t.bIt("ngSubmit",function(){return o.submit()}),t.DNE(4,Q,24,11,"div",3)(5,et,24,9,"div",3),t.k0s()()()),2&i&&(t.Y8G("isModal",!0)("showNombre",!1)("title","Producto: "+o.producto.nombre),t.R7$(3),t.Y8G("formGroup",o.form),t.R7$(),t.Y8G("ngIf",o.producto.granel),t.R7$(),t.Y8G("ngIf",!o.producto.granel))},dependencies:[x.Sq,x.bT,g.Jm,g.I9,g.W9,g.iq,g.$w,g.uz,g.he,g.Nm,g.Ip,g.IO,g.su,g.Je,f.qT,f.BC,f.cb,f.j4,f.JD,S.l,x.QX,x.oe],styles:["ion-card-content.text[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 8px #0000001a}.buttotal[_ngcontent-%COMP%]{font-size:24px;color:#4caf50;font-weight:700;padding:10px;border-radius:8px;background-color:#e8f5e9;text-align:center;transition:transform .3s ease,color .3s ease,background-color .3s ease;box-shadow:0 4px 10px #0000001a}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}ion-text[color=danger][_ngcontent-%COMP%]{font-size:.9rem;color:#e74c3c;margin-top:.25rem;margin-left:.5rem;display:block}.btntarget[_ngcontent-%COMP%]{margin-top:15px;width:100%}.animated-button[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem;font-weight:700;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#fff;transition:background-color .3s ease,transform .3s ease}.animated-button[_ngcontent-%COMP%]:hover{background-color:#007bff;transform:scale(1.1)}ion-input[placeholder=Cantidad][_ngcontent-%COMP%]{text-align:center;font-size:1.1rem}ion-item[_ngcontent-%COMP%]{--border-width: 0px;--highlight-color-focused: #4caf50;margin-bottom:1rem;padding:.5rem}"]}),l})()}}]);