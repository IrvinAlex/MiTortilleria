"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1510],{1510:(di,Le,C)=>{C.r(Le),C.d(Le,{HorarioPageModule:()=>tr});var u=C(177),D=C(9417),_=C(5933),be=C(8265),q=C(467),r=C(4438),_e=C(7852),pt=C(1362),ye=C(8041),I=C(1076);class A{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}A.UNAUTHENTICATED=new A(null),A.GOOGLE_CREDENTIALS=new A("google-credentials-uid"),A.FIRST_PARTY=new A("first-party-uid"),A.MOCK_USER=new A("mock-user");let S="10.14.0";const b=new ye.Vy("@firebase/firestore");function mt(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function w(i="Unexpected state"){const e=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+i;throw function O(i,...e){if(b.logLevel<=ye.$b.ERROR){const t=e.map(mt);b.error(`Firestore (${S}): ${i}`,...t)}}(e),new Error(e)}function z(i,e){i||w()}const g="invalid-argument",te="failed-precondition";class m extends I.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class an{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(A.UNAUTHENTICATED))}shutdown(){}}class fi{constructor(e){this.auth=null,e.onInit(t=>{this.auth=t})}getToken(){return this.auth?this.auth.getToken().then(e=>e?(z("string"==typeof e.accessToken),new an(e.accessToken,new A(this.auth.getUid()))):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class _i{constructor(e,t,n){this.t=e,this.i=t,this.o=n,this.type="FirstParty",this.user=A.FIRST_PARTY,this.u=new Map}l(){return this.o?this.o():null}get headers(){this.u.set("X-Goog-AuthUser",this.t);const e=this.l();return e&&this.u.set("Authorization",e),this.i&&this.u.set("X-Goog-Iam-Authorization-Token",this.i),this.u}}class yi{constructor(e,t,n){this.t=e,this.i=t,this.o=n}getToken(){return Promise.resolve(new _i(this.t,this.i,this.o))}start(e,t){e.enqueueRetryable(()=>t(A.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pi{constructor(e){this.h=e,this.appCheck=null,e.onInit(t=>{this.appCheck=t})}getToken(){return this.appCheck?this.appCheck.getToken().then(e=>e?(z("string"==typeof e.token),new vi(e.token)):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}}class Te{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Te("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Te&&e.projectId===this.projectId&&e.database===this.database}}class Oe{constructor(e,t,n){void 0===t?t=0:t>e.length&&w(),void 0===n?n=e.length-t:n>e.length-t&&w(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Oe.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oe?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const s=e.get(o),a=t.get(o);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class x extends Oe{construct(e,t,n){return new x(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new m(g,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(o=>o.length>0))}return new x(t)}static emptyPath(){return new x([])}}const Ci=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class U extends Oe{construct(e,t,n){return new U(e,t,n)}static isValidIdentifier(e){return Ci.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),U.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new U(["__name__"])}static fromServerFormat(e){const t=[];let n="",o=0;const s=()=>{if(0===n.length)throw new m(g,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;o<e.length;){const c=e[o];if("\\"===c){if(o+1===e.length)throw new m(g,"Path has trailing escape character: "+e);const l=e[o+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new m(g,"Path has invalid escape sequence: "+e);n+=l,o+=2}else"`"===c?(a=!a,o++):"."!==c||a?(n+=c,o++):(s(),o++)}if(s(),a)throw new m(g,"Unterminated ` in path: "+e);return new U(t)}static emptyPath(){return new U([])}}class R{constructor(e){this.path=e}static fromPath(e){return new R(x.fromString(e))}static fromName(e){return new R(x.fromString(e).popFirst(5))}static empty(){return new R(x.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===x.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return x.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new R(new x(e.slice()))}}function ze(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":w()}function Ge(i){return 0===i&&1/i==-1/0}var pn,v;function N(i,e){return i<e?-1:i>e?1:0}function gn(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}(v=pn||(pn={}))[v.OK=0]="OK",v[v.CANCELLED=1]="CANCELLED",v[v.UNKNOWN=2]="UNKNOWN",v[v.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",v[v.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",v[v.NOT_FOUND=5]="NOT_FOUND",v[v.ALREADY_EXISTS=6]="ALREADY_EXISTS",v[v.PERMISSION_DENIED=7]="PERMISSION_DENIED",v[v.UNAUTHENTICATED=16]="UNAUTHENTICATED",v[v.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",v[v.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",v[v.ABORTED=10]="ABORTED",v[v.OUT_OF_RANGE=11]="OUT_OF_RANGE",v[v.UNIMPLEMENTED=12]="UNIMPLEMENTED",v[v.INTERNAL=13]="INTERNAL",v[v.UNAVAILABLE=14]="UNAVAILABLE",v[v.DATA_LOSS=15]="DATA_LOSS";class Ii extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ne{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ii("Invalid base64 string: "+s):s}}(e);return new ne(t)}static fromUint8Array(e){const t=function(o){let s="";for(let a=0;a<o.length;++a)s+=String.fromCharCode(o[a]);return s}(e);return new ne(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return N(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ne.EMPTY_BYTE_STRING=new ne("");const Ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ae(i){if(z(!!i),"string"==typeof i){let e=0;const t=Ai.exec(i);if(z(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:F(i.seconds),nanos:F(i.nanos)}}function F(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function xe(i){return"string"==typeof i?ne.fromBase64String(i):ne.fromUint8Array(i)}class G{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new m(g,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new m(g,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new m(g,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new m(g,"Timestamp seconds out of range: "+e)}static now(){return G.fromMillis(Date.now())}static fromDate(e){return G.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new G(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?N(this.nanoseconds,e.nanoseconds):N(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}function Ie(i){const e=ae(i.mapValue.fields.__local_write_time__.timestampValue);return new G(e.seconds,e.nanos)}const Be={fields:{__type__:{stringValue:"__max__"}}};function ce(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?function Ct(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}(i)?4:"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue?9007199254740991:"__vector__"===(null===(o=((null===(n=null==(t=i)?void 0:t.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===o?void 0:o.stringValue)?10:11:w();var t,n,o}function Pe(i,e){if(i===e)return!0;const t=ce(i);if(t!==ce(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ie(i).isEqual(Ie(e));case 3:return function(o,s){if("string"==typeof o.timestampValue&&"string"==typeof s.timestampValue&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const a=ae(o.timestampValue),c=ae(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return s=e,xe(i.bytesValue).isEqual(xe(s.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,s){return F(o.geoPointValue.latitude)===F(s.geoPointValue.latitude)&&F(o.geoPointValue.longitude)===F(s.geoPointValue.longitude)}(i,e);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return F(o.integerValue)===F(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const a=F(o.doubleValue),c=F(s.doubleValue);return a===c?Ge(a)===Ge(c):isNaN(a)&&isNaN(c)}return!1}(i,e);case 9:return function wt(i,e,t){return i.length===e.length&&i.every((n,o)=>t(n,e[o]))}(i.arrayValue.values||[],e.arrayValue.values||[],Pe);case 10:case 11:return function(o,s){const a=o.mapValue.fields||{},c=s.mapValue.fields||{};if(gn(a)!==gn(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(void 0===c[l]||!Pe(a[l],c[l])))return!1;return!0}(i,e);default:return w()}var s}function Ae(i,e){return void 0!==(i.values||[]).find(t=>Pe(t,e))}function Ye(i,e){if(i===e)return 0;const t=ce(i),n=ce(e);if(t!==n)return N(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return N(i.booleanValue,e.booleanValue);case 2:return function(s,a){const c=F(s.integerValue||s.doubleValue),l=F(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(i,e);case 3:return _n(i.timestampValue,e.timestampValue);case 4:return _n(Ie(i),Ie(e));case 5:return N(i.stringValue,e.stringValue);case 6:return function(s,a){const c=xe(s),l=xe(a);return c.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){const h=N(c[d],l[d]);if(0!==h)return h}return N(c.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,a){const c=N(F(s.latitude),F(a.latitude));return 0!==c?c:N(F(s.longitude),F(a.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return yn(i.arrayValue,e.arrayValue);case 10:return function(s,a){var c,l,d,h;const y=null===(c=(s.fields||{}).value)||void 0===c?void 0:c.arrayValue,P=null===(l=(a.fields||{}).value)||void 0===l?void 0:l.arrayValue,E=N((null===(d=null==y?void 0:y.values)||void 0===d?void 0:d.length)||0,(null===(h=null==P?void 0:P.values)||void 0===h?void 0:h.length)||0);return 0!==E?E:yn(y,P)}(i.mapValue,e.mapValue);case 11:return function(s,a){if(s===Be&&a===Be)return 0;if(s===Be)return 1;if(a===Be)return-1;const c=s.fields||{},l=Object.keys(c),d=a.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=N(l[f],h[f]);if(0!==p)return p;const y=Ye(c[l[f]],d[h[f]]);if(0!==y)return y}return N(l.length,h.length)}(i.mapValue,e.mapValue);default:throw w()}}function _n(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return N(i,e);const t=ae(i),n=ae(e),o=N(t.seconds,n.seconds);return 0!==o?o:N(t.nanos,n.nanos)}function yn(i,e){const t=i.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const s=Ye(t[o],n[o]);if(s)return s}return N(t.length,n.length)}function Qe(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function vn(i){return!!i&&"arrayValue"in i}class Mn{}class B extends Mn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ki(e,t,n):"array-contains"===t?new Vi(e,n):"in"===t?new Di(e,n):"not-in"===t?new Si(e,n):"array-contains-any"===t?new Ni(e,n):new B(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ri(e,n):new Fi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ye(t,this.value)):null!==t&&ce(this.value)===ce(t)&&this.matchesComparison(Ye(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return w()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends B{constructor(e,t,n){super(e,t,n),this.key=R.fromName(n.referenceValue)}matches(e){const t=R.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ri extends B{constructor(e,t){super(e,"in",t),this.keys=Tn(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fi extends B{constructor(e,t){super(e,"not-in",t),this.keys=Tn(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tn(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(n=>R.fromName(n.referenceValue))}class Vi extends B{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vn(t)&&Ae(t.arrayValue,this.value)}}class Di extends B{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ae(this.value.arrayValue,t)}}class Si extends B{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ae(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ae(this.value.arrayValue,t)}}class Ni extends B{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Ae(this.value.arrayValue,n))}}class ${constructor(e,t,n,o,s){this.key=e,this.value=t,this.color=null!=n?n:$.RED,this.left=null!=o?o:$.EMPTY,this.right=null!=s?s:$.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,s){return new $(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=o?o:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const s=n(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,t,n),null):0===s?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw w();const e=this.left.check();if(e!==this.right.check())throw w();return e+(this.isRed()?0:1)}}$.EMPTY=null,$.RED=!0,$.BLACK=!1,$.EMPTY=new class{constructor(){this.size=0}get key(){throw w()}get value(){throw w()}get color(){throw w()}get left(){throw w()}get right(){throw w()}copy(e,t,n,o,s){return this}insert(e,t,n){return new $(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class de{constructor(e,t=null,n=[],o=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.S=null,this.N=null,this.O=null}}function kn(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ge(e)?"-0":e}}class Ui{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xt(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gi(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function It(i,e){return function At(i,e){const t=(o=i,new x(["projects",o.projectId,"databases",o.database])).child("documents");var o;return void 0===e?t:t.child(e)}(i,e).canonicalString()}function Rt(i){return new Ui(i,!0)}const Ve=new Map;class Gn{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new m(g,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new m(g,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(s,a,c,l){if(!0===a&&!0===l)throw new m(g,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=function dn(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new m(g,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new m(g,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new m(g,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oe{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gn({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new m(te,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new m(te,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gn(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new mi;switch(n.type){case"firstParty":return new yi(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new m(g,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,q.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Ve.get(t);n&&(function k(i,...e){if(b.logLevel<=ye.$b.DEBUG){const t=e.map(mt);b.debug(`Firestore (${S}): ${i}`,...t)}}("ComponentProvider","Removing Datastore"),Ve.delete(t),n.terminate())}(this),Promise.resolve()}}class Q{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Q(this.firestore,e,this._query)}}class j{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new X(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new j(this.firestore,e,this._key)}}class X extends Q{constructor(e,t,n){super(e,t,new de(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new j(this.firestore,null,new R(e))}withConverter(e){return new X(this.firestore,e,this._path)}}class Ce{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ce(ne.fromBase64String(e))}catch(t){throw new m(g,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ce(ne.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class he{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new m(g,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new U(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Se{constructor(e){this._methodName=e}}class Nt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new m(g,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new m(g,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return N(this._lat,e._lat)||N(this._long,e._long)}}class it{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,o){if(n.length!==o.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==o[s])return!1;return!0}(this._values,e._values)}}const ro=/^__.*__$/;function Qn(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw w()}}class ot{constructor(e,t,n,o,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,void 0===s&&this.tt(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get et(){return this.settings.et}rt(e){return new ot(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}nt(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.rt({path:n,it:!1});return o.st(e),o}ot(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.rt({path:n,it:!1});return o.tt(),o}ut(e){return this.rt({path:void 0,it:!0})}_t(e){return st(e,this.settings.methodName,this.settings.ct||!1,this.path,this.settings.lt)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tt(){if(this.path)for(let e=0;e<this.path.length;e++)this.st(this.path.get(e))}st(e){if(0===e.length)throw this._t("Document fields must not be empty");if(Qn(this.et)&&ro.test(e))throw this._t('Document fields cannot begin and end with "__"')}}class ao{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rt(e)}ht(e,t,n,o=!1){return new ot({et:e,methodName:t,lt:n,path:U.emptyPath(),it:!1,ct:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function me(i,e){if(Jn(i=(0,I.Ku)(i)))return function Ut(i,e,t){if(!Jn(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const n=ze(t);throw e._t("an object"===n?i+" a custom object":i+" "+n)}var o}("Unsupported field value:",e,i),function Xn(i,e){const t={};return function(o){for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s))return!1;return!0}(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):function Ee(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}(i,(n,o)=>{const s=me(o,e.nt(n));null!=s&&(t[n]=s)}),{mapValue:{fields:t}}}(i,e);if(i instanceof Se)return function(n,o){if(!Qn(o.et))throw o._t(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o._t(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.it&&4!==e.et)throw e._t("Nested arrays are not supported");return function(n,o){const s=[];let a=0;for(const c of n){let l=me(c,o.ut(a));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(i,e)}return function(n,o){if(null===(n=(0,I.Ku)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return function Rn(i,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!Ge(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?function(n){return{integerValue:""+n}}(e):kn(i,e);var n}(o.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const s=G.fromDate(n);return{timestampValue:xt(o.serializer,s)}}if(n instanceof G){const s=new G(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xt(o.serializer,s)}}if(n instanceof Nt)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ce)return{bytesValue:Gi(o.serializer,n._byteString)};if(n instanceof j){const s=o.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw o._t(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:It(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof it)return c=o,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:n.toArray().map(l=>{if("number"!=typeof l)throw c._t("VectorValues must only contain numeric values.");return kn(c.serializer,l)})}}}}};var c;throw o._t(`Unsupported field value: ${ze(n)}`)}(i,e)}function Jn(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof G||i instanceof Nt||i instanceof Ce||i instanceof j||i instanceof Se||i instanceof it)}const co=new RegExp("[~\\*/\\[\\]]");function st(i,e,t,n,o){const s=n&&!n.isEmpty(),a=void 0!==o;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${o}`),l+=")"),new m(g,c+i+l)}function Yt(i,e){return"string"==typeof e?function Gt(i,e,t){if(e.search(co)>=0)throw st(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new he(...e.split("."))._internalPath}catch{throw st(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}(i,e):e instanceof he?e._internalPath:e._delegate._internalPath}class Qt{}class $e extends Qt{}class He extends $e{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new He(e,t,n)}_apply(e){const t=this._parse(e);return function oi(i,e){const t=function(o,s){for(const a of o)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new m(g,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}(e._query,t),new Q(e.firestore,e.converter,function Tt(i,e){const t=i.filters.concat([e]);return new de(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}_parse(e){const t=function pe(i){const e=i._freezeSettings(),t=Rt(i._databaseId);return new ao(i._databaseId,!!e.ignoreUndefinedProperties,t)}(e.firestore);return function(s,a,c,l,d,h,f){let p;if(d.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new m(g,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){ii(f,h);const y=[];for(const P of f)y.push(ni(l,s,P));p={arrayValue:{values:y}}}else p=ni(l,s,f)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||ii(f,h),p=function Wn(i,e,t,n=!1){return me(t,i.ht(n?4:3,e))}(c,"where",f,"in"===h||"not-in"===h);return B.create(d,h,p)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function uo(i,e,t){const n=e,o=Yt("where",i);return He._create(o,n,t)}function ni(i,e,t){if("string"==typeof(t=(0,I.Ku)(t))){if(""===t)throw new m(g,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!function xn(i){return null!==i.collectionGroup}(e)&&-1!==t.indexOf("/"))throw new m(g,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(x.fromString(t));if(!R.isDocumentKey(n))throw new m(g,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Qe(i,new R(n))}if(t instanceof j)return Qe(i,t._key);throw new m(g,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ze(t)}.`)}function ii(i,e){if(!Array.isArray(i)||0===i.length)throw new m(g,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}S=`${_e.SDK_VERSION}_lite`,(0,_e._registerComponent)(new pt.uA("firestore/lite",(e,{instanceIdentifier:t,options:n})=>{const o=e.getProvider("app").getImmediate(),s=new oe(new fi(e.getProvider("auth-internal")),new Pi(e.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new m(g,'"projectId" not provided in firebase.initializeApp.');return new Te(c.options.projectId,l)}(o,t),o);return n&&s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)("firestore-lite","4.7.3",""),(0,_e.registerVersion)("firestore-lite","4.7.3","esm2017");var si=C(7517),ai=C(2723),Po=C(2784),ci=C(3236),wo=C(1985),Co=C(9470);function li(i=0,e=ci.E){return i<0&&(i=0),function bo(i=0,e,t=ci.b){let n=-1;return null!=e&&((0,Co.m)(e)?t=e:n=e),new wo.c(o=>{let s=function Mo(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},s)})}(i,i,e)}var ui=C(8461);const To=["sliderButton"];function Oo(i,e){if(1&i&&(r.j41(0,"ion-select-option",34),r.EFF(1),r.k0s()),2&i){const t=e.$implicit;r.Y8G("value",t.value)("disabled",!t.enabled),r.R7$(),r.SpI(" ",t.label," ")}}function Eo(i,e){if(1&i&&(r.j41(0,"ion-item")(1,"ion-label",35)(2,"h3"),r.EFF(3,"Horario seleccionado:"),r.k0s(),r.j41(4,"p"),r.EFF(5),r.nI1(6,"date"),r.k0s(),r.j41(7,"p",36),r.EFF(8),r.nI1(9,"date"),r.k0s()()()),2&i){const t=r.XpG();r.R7$(5),r.JRh(r.brH(6,2,t.fechaHoraRecoleccion,"EEEE, dd 'de' MMMM 'de' yyyy 'a las' HH:mm","es-ES")),r.R7$(3),r.SpI(" Hora actual: ",r.brH(9,6,t.currentTime,"HH:mm","es-ES")," ")}}function xo(i,e){if(1&i){const t=r.RV6();r.j41(0,"div",37)(1,"div",38),r.nrm(2,"ion-icon",39),r.j41(3,"h2"),r.EFF(4,"Asignaci\xf3n autom\xe1tica en:"),r.k0s(),r.j41(5,"div",40),r.EFF(6),r.k0s(),r.j41(7,"div",41)(8,"p")(9,"strong"),r.EFF(10,"Se asignar\xe1:"),r.k0s(),r.EFF(11),r.k0s(),r.j41(12,"p")(13,"strong"),r.EFF(14,"Tiempo:"),r.k0s(),r.EFF(15),r.k0s()(),r.nrm(16,"ion-progress-bar",42),r.j41(17,"p",43),r.EFF(18," Se asignar\xe1 autom\xe1ticamente seg\xfan la demanda actual "),r.k0s()(),r.j41(19,"ion-button",44),r.bIt("click",function(){r.eBV(t);const o=r.XpG();return r.Njj(o.cancelCountdown())}),r.nrm(20,"ion-icon",45),r.EFF(21," CANCELAR ASIGNACI\xd3N "),r.k0s()()}if(2&i){const t=r.XpG();r.R7$(),r.HbH("countdown-"+(null==t.currentDemandLevel?null:t.currentDemandLevel.level)),r.R7$(5),r.JRh(t.countdown),r.R7$(5),r.SpI(" ",t.getDemandDescription(),""),r.R7$(4),r.SpI(" ",t.estimatedTime,""),r.R7$(),r.Y8G("value",t.getProgressPercentage()/100)("color",null==t.currentDemandLevel?null:t.currentDemandLevel.color)}}function Io(i,e){if(1&i){const t=r.RV6();r.j41(0,"ion-button",46),r.bIt("click",function(){r.eBV(t);const o=r.XpG();return r.Njj(o.restartCountdown())}),r.nrm(1,"ion-icon",47),r.EFF(2," REINICIAR ASIGNACI\xd3N AUTOM\xc1TICA "),r.k0s()}}function Ao(i,e){1&i&&(r.j41(0,"ion-button",48),r.nrm(1,"ion-spinner",49),r.EFF(2," Asignando... "),r.k0s())}function ko(i,e){1&i&&(r.j41(0,"p",55),r.nrm(1,"ion-icon",56),r.EFF(2," Selecciona una fecha y hora antes de asignar "),r.k0s())}function Ro(i,e){if(1&i){const t=r.RV6();r.j41(0,"div",50)(1,"ion-label"),r.EFF(2,"Desliza para asignar manualmente"),r.k0s(),r.DNE(3,ko,3,0,"p",51),r.j41(4,"ion-range",52),r.mxI("ngModelChange",function(o){r.eBV(t);const s=r.XpG();return r.DH7(s.sliderValue,o)||(s.sliderValue=o),r.Njj(o)}),r.bIt("ionChange",function(){r.eBV(t);const o=r.XpG();return r.Njj(o.onSliderChange())}),r.nrm(5,"ion-icon",53)(6,"ion-icon",54),r.k0s()()}if(2&i){const t=r.XpG();r.R7$(3),r.Y8G("ngIf",!t.fechaHoraRecoleccion),r.R7$(),r.R50("ngModel",t.sliderValue)}}function Fo(i,e){1&i&&(r.j41(0,"div",57),r.nrm(1,"ion-icon",58),r.j41(2,"p"),r.EFF(3,"Pedido en espera de recolecci\xf3n"),r.k0s()())}let Vo=(()=>{var i;class e{constructor(){this.fechaHoraRecoleccion="",this.fechaRecoleccion="",this.horaRecoleccion="",this.fechaMinima="",this.fechaMaxima="",this.currentTime=new Date,this.estimatedTime="1-3 min",this.autoAssignedTime="",this.countdown=5,this.isCountdownActive=!1,this.isAssigned=!1,this.firebaseSvc=(0,r.WQX)(si.f),this.utilSvc=(0,r.WQX)(ai.T),this.demandLevels={baja:{level:"baja",minTime:1,maxTime:3,color:"success",description:"\xa1S\xfaper r\xe1pido!"},normal:{level:"normal",minTime:2,maxTime:4,color:"success",description:"Entrega express"},moderada:{level:"moderada",minTime:3,maxTime:5,color:"primary",description:"Preparando tu pedido"},media:{level:"media",minTime:4,maxTime:6,color:"primary",description:"Flujo activo"},alta:{level:"alta",minTime:6,maxTime:8,color:"warning",description:"Hora pico"},mediaalta:{level:"mediaalta",minTime:8,maxTime:10,color:"warning",description:"Muy ocupados"},irregular:{level:"irregular",minTime:10,maxTime:15,color:"danger",description:"Demanda impredecible"}},this.sliderValue=0,this.showAnimation=!1,this.horaEntrada="07:00",this.horaSalida="20:00",this.horaMinimaInput="07:00",this.horaOpciones=[]}ngOnInit(){this.setFechaMinima(),this.initializeDatetime(),this.initializeTimeSystem(),this.getHorarioTrabajo(),this.startAutoAssignment(),this.generarOpcionesHora()}getHorarioTrabajo(){var n=this;return(0,q.A)(function*(){try{const o=yield n.firebaseSvc.getDocument("horario/waeYL5UAeC3YyZ8BW3KT");o&&(n.horaEntrada=o.hora_entrada||"07:00",n.horaSalida=o.hora_salida||"20:00"),n.generarOpcionesHora()}catch{n.horaEntrada="07:00",n.horaSalida="20:00",n.generarOpcionesHora()}})()}ngOnDestroy(){this.timeSubscription&&this.timeSubscription.unsubscribe(),this.countdownSubscription&&this.countdownSubscription.unsubscribe()}formatForIonDatetime(n){const o=E=>E<10?"0"+E:E,s=n.getFullYear(),a=o(n.getMonth()+1),c=o(n.getDate()),l=o(n.getHours()),d=o(n.getMinutes()),h=o(n.getSeconds()),f=-n.getTimezoneOffset();return`${s}-${a}-${c}T${l}:${d}:${h}${f>=0?"+":"-"}${o(Math.floor(Math.abs(f)/60))}:${o(Math.abs(f)%60)}`}setFechaMinima(){const n=new Date;this.fechaMinima=this.formatForIonDatetime(n);const o=new Date(n);o.setDate(n.getDate()+7),this.fechaMaxima=this.formatForIonDatetime(o),console.log("min:",this.fechaMinima),console.log("max:",this.fechaMaxima)}initializeDatetime(){this.fechaHoraRecoleccion="",this.fechaRecoleccion="",this.horaRecoleccion=""}initializeTimeSystem(){this.timeSubscription=li(6e4).subscribe(()=>{this.currentTime=new Date,this.updateDemandLevel(),this.updateAutoAssignedTime()}),this.updateDemandLevel(),this.updateAutoAssignedTime()}updateDemandLevel(){const s=this.currentTime.getHours()+this.currentTime.getMinutes()/60;let a;a=s>=6&&s<7?"media":s>=7&&s<8.5?"alta":s>=8.5&&s<10.5?"moderada":s>=10.5&&s<11.5?"normal":s>=11.5&&s<14?"mediaalta":s>=14&&s<16.5?"baja":s>=16.5&&s<17.5?"moderada":s>=17.5&&s<19?"alta":s>=19&&s<20?"irregular":"baja",this.currentDemandLevel=this.demandLevels[a],this.estimatedTime=`${this.currentDemandLevel.minTime}-${this.currentDemandLevel.maxTime} min`}updateAutoAssignedTime(){if(this.currentDemandLevel){const o=new Date((new Date).getTime()+6e4*this.currentDemandLevel.maxTime),s=o.getHours(),a=o.getMinutes(),c=s>=12?"p.m.":"a.m.";this.autoAssignedTime=`${s%12||12}:${a.toString().padStart(2,"0")} ${c}`}}getDemandMessage(){const n=this.currentTime.getHours();return n>=6&&n<7?"Primeros pedidos \u{1f305}":n>=7&&n<8.5?"Hora pico: Desayuno \u{1f373}":n>=8.5&&n<10.5?"Flujo constante \u26a1":n>=10.5&&n<11.5?"Flujo estable \u{1f4c8}":n>=11.5&&n<14?"Hora pico: Comida \u{1f37d}\ufe0f":n>=14&&n<16.5?"Flujo tranquilo \u{1f60c}":n>=16.5&&n<17.5?"Preparativos vespertinos \u{1f306}":n>=17.5&&n<19?"Hora pico: Cena \u{1f319}":n>=19&&n<20?"Pedidos urgentes \u26a0\ufe0f":"Fuera de horario \u{1f512}"}isPeakHour(){return this.currentDemandLevel&&("alta"===this.currentDemandLevel.level||"mediaalta"===this.currentDemandLevel.level||"irregular"===this.currentDemandLevel.level)}formatCurrentTime(){const n=this.currentTime.getHours(),s=n>=12?"p.m.":"a.m.";return`${n%12||12}:${this.currentTime.getMinutes().toString().padStart(2,"0")} ${s}`}hasValidAssignedTime(){return!(!(this.fechaHoraRecoleccion&&this.fechaHoraRecoleccion.length>0)||isNaN(new Date(this.fechaHoraRecoleccion).getTime()))}formatAssignedTime(){if(this.fechaHoraRecoleccion&&this.fechaHoraRecoleccion.length>0)try{const n=new Date(this.fechaHoraRecoleccion);if(isNaN(n.getTime()))return this.autoAssignedTime||"No asignada";const o=n.getHours(),s=n.getMinutes(),a=o>=12?"p.m.":"a.m.";return`${o%12||12}:${s.toString().padStart(2,"0")} ${a}`}catch(n){return console.error("Error formatting assigned time:",n),this.autoAssignedTime||"No asignada"}return this.autoAssignedTime||"Calculando..."}getDemandDescription(){var n;return(null===(n=this.currentDemandLevel)||void 0===n?void 0:n.description)||"Calculando..."}onDateOrTimeChange(){if(this.updateHoraMinimaInput(),this.generarOpcionesHora(),this.updateHoraMinimaInput(),this.fechaRecoleccion&&this.horaRecoleccion){if(!this.isHoraDentroHorario(this.horaRecoleccion))return this.utilSvc.presentToast({message:`La hora debe estar entre ${this.horaMinimaInput} y ${this.horaSalida}`,duration:2500,color:"warning",position:"bottom",icon:"time-outline"}),void(this.fechaHoraRecoleccion="");const a=new Date(`${this.fechaRecoleccion}T${this.horaRecoleccion}:00`);this.fechaHoraRecoleccion=new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().slice(0,16)}else this.fechaHoraRecoleccion="";if(this.fechaHoraRecoleccion){const n=new Date(this.fechaHoraRecoleccion),o=new Date;if(new Date(n.getFullYear(),n.getMonth(),n.getDate())<new Date(o.getFullYear(),o.getMonth(),o.getDate()))return void this.utilSvc.presentToast({message:"No puedes seleccionar una fecha anterior a hoy",duration:2500,color:"warning",position:"bottom",icon:"calendar-outline"})}}generarOpcionesHora(){var n;let o=[];if(!this.horaEntrada||!this.horaSalida)return void(this.horaOpciones=[]);const[s,a]=this.horaEntrada.split(":").map(Number),[c,l]=this.horaSalida.split(":").map(Number);let d=new Date,h=null;this.fechaRecoleccion&&(h=new Date(this.fechaRecoleccion),h.setMinutes(h.getMinutes()+h.getTimezoneOffset()),h.setDate(h.getDate()));let f=h&&h.getFullYear()===d.getFullYear()&&h.getMonth()===d.getMonth()&&h.getDate()===d.getDate(),p=s,y=a;if(console.log((null===(n=h)||void 0===n?void 0:n.getDate())+"-----"+d.getDate()),f){const T=d.getHours(),ee=d.getMinutes();let L=15*Math.ceil(ee/15),J=T;60===L&&(J++,L=0),J<s||J===s&&L<a?(p=s,y=a):(p=J,y=L)}let P=60*p+y,E=60*c+l;for(let T=60*s+a;T<=E;T+=15){if(T<P)continue;const L=T%60,J=`${Math.floor(T/60).toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`,W=this.formatHoraAMPM(J);o.push({value:J,label:W,enabled:!0})}this.horaOpciones=o,this.horaRecoleccion&&!o.find(T=>T.value===this.horaRecoleccion)&&(this.horaRecoleccion="")}updateHoraMinimaInput(){if(!this.fechaRecoleccion)return void(this.horaMinimaInput=this.horaEntrada);const n=new Date,o=new Date(this.fechaRecoleccion);if(o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate()){const s=n.getHours(),a=n.getMinutes(),[c,l]=this.horaEntrada.split(":").map(Number);let d=Math.max(c,s),h=d===s?a:l;(s<c||s===c&&a<l)&&(d=c,h=l),this.horaMinimaInput=`${d.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}else this.horaMinimaInput=this.horaEntrada}isHoraDentroHorario(n){const[o,s]=n.split(":").map(Number),[a,c]=this.horaMinimaInput.split(":").map(Number),[l,d]=this.horaSalida.split(":").map(Number),h=60*o+s;return h>=60*a+c&&h<=60*l+d}startAutoAssignment(){this.isCountdownActive=!0,this.countdown=5,this.countdownSubscription=li(1e3).subscribe(()=>{this.isCountdownActive&&this.countdown>0?this.countdown--:this.isCountdownActive&&0===this.countdown&&this.performAutoAssignment()})}performAutoAssignment(){var n=this;return(0,q.A)(function*(){if(n.isCountdownActive=!1,!n.validarFechaHora()){const s=n.currentDemandLevel.maxTime,a=new Date((new Date).getTime()+6e4*s);n.fechaHoraRecoleccion=a.toISOString()}yield n.executeAssignment()})()}executeAssignment(){var n=this;return(0,q.A)(function*(){const o=yield n.utilSvc.loading();yield o.present(),n.isAssigned=!0,n.showAnimation=!0;let s=`pedidos/${n.pedido.id}`;try{const a=new Date(n.fechaHoraRecoleccion);if(isNaN(a.getTime()))throw new Error("Fecha inv\xe1lida seleccionada");const c=Po.Dc.fromDate(a);yield n.firebaseSvc.updateDocumet(s,{estatus:"En espera de recolecci\xf3n",fecha_recoger:c,hora_recoleccion:c}),setTimeout(()=>{n.showAnimation=!1,n.isAssigned=!1,n.pedido.estatus="En espera de recolecci\xf3n",n.utilSvc.dismissModal({success:!0})},3e3)}catch(a){console.error("Error al asignar horario:",a),n.utilSvc.presentToast({message:"Error al asignar horario. Por favor intenta de nuevo.",duration:2500,color:"danger",position:"middle",icon:"alert-circle-outline"}),n.isAssigned=!1,n.showAnimation=!1}finally{o.dismiss()}})()}restartCountdown(){this.isCountdownActive=!0,this.countdown=5,this.startAutoAssignment()}cancelCountdown(){this.isCountdownActive=!1,this.countdown=5,this.countdownSubscription&&this.countdownSubscription.unsubscribe()}getProgressPercentage(){return(5-this.countdown)/5*100}validarFechaHora(){if(!this.fechaHoraRecoleccion)return!1;try{const n=new Date(this.fechaHoraRecoleccion),o=new Date;if(isNaN(n.getTime()))return!1;const s=new Date(n.getFullYear(),n.getMonth(),n.getDate());if(s<new Date(o.getFullYear(),o.getMonth(),o.getDate()))return!1;const c=new Date;return c.setDate(c.getDate()+7),!(s>new Date(c.getFullYear(),c.getMonth(),c.getDate()))}catch(n){return console.error("Error validating date:",n),!1}}onSliderChange(){var n=this;return(0,q.A)(function*(){if(100===n.sliderValue)if(n.fechaHoraRecoleccion){if(!n.validarFechaHora())return n.sliderValue=0,void n.utilSvc.presentToast({message:"No se puede seleccionar una fecha y hora anterior o inv\xe1lida",duration:3e3,color:"danger",position:"bottom",icon:"alert-circle-outline"});yield n.executeAssignment()}else n.sliderValue=0,n.utilSvc.presentToast({message:"Por favor, selecciona una fecha y hora",duration:2500,color:"danger",position:"bottom",icon:"refresh-circle-outline"})})()}formatHoraAMPM(n){if(!n)return"";const[o,s]=n.split(":").map(Number),a=o>=12?"PM":"AM";return`${o%12||12}:${s.toString().padStart(2,"0")} ${a}`}}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=r.VBU({type:i,selectors:[["app-assign-horary"]],viewQuery:function(n,o){if(1&n&&r.GBs(To,5),2&n){let s;r.mGM(s=r.lsd())&&(o.sliderButton=s.first)}},inputs:{pedido:"pedido"},decls:78,vars:33,consts:[["title","Asignar Horario",3,"isModal","showNombre","showLogo"],[1,"status-bar"],[1,"status-info"],[3,"name","color"],[1,"demand-info"],[1,"demand-subtitle"],[1,"time-info"],["name","time","color","medium"],[1,"current-time"],[1,"demand-info-card"],[1,"demand-display"],[1,"demand-icon"],[1,"demand-text"],["type","date","placeholder","Selecciona la fecha",3,"ngModelChange","ionChange","ngModel","min","max"],["placeholder","Selecciona la hora","interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],["name","information-circle-outline","slot","start","color","success"],[1,"ion-text-wrap"],["name","bulb-outline","color","warning",2,"vertical-align","middle"],[1,"time-assignment-card"],[1,"time-row"],[1,"time-label"],[1,"time-value","success"],[1,"time-value","primary"],[1,"auto-assignment-section"],["class","countdown-container",4,"ngIf"],["expand","block","color","tertiary","class","restart-button",3,"click",4,"ngIf"],["expand","block","color","medium","disabled","true","class","assigning-button",4,"ngIf"],[1,"system-info-card"],["name","information-circle","color","primary"],[1,"info-text"],["class","assign-slider-container",4,"ngIf"],["class","success-animation",4,"ngIf"],[3,"value","disabled"],[1,"selected-date-display"],[2,"font-size","0.9rem","color","var(--ion-color-medium)"],[1,"countdown-container"],[1,"countdown-display"],["name","timer",1,"countdown-icon"],[1,"countdown-number"],[1,"auto-assignment-info"],[1,"countdown-progress",3,"value","color"],[1,"countdown-text"],["expand","block","color","danger",1,"cancel-button",3,"click"],["name","close","slot","start"],["expand","block","color","tertiary",1,"restart-button",3,"click"],["name","calendar","slot","start"],["expand","block","color","medium","disabled","true",1,"assigning-button"],["name","crescent","slot","start"],[1,"assign-slider-container"],["class","warning-text",4,"ngIf"],["min","0","max","100","step","1","pin","false","color","primary",1,"assign-slider",3,"ngModelChange","ionChange","ngModel"],["slot","start","name","arrow-forward","color","primary"],["slot","end","name","checkmark-circle","color","primary"],[1,"warning-text"],["name","warning","color","warning"],[1,"success-animation"],["name","checkmark-circle","color","primary"]],template:function(n,o){1&n&&(r.nrm(0,"app-header",0),r.j41(1,"ion-content")(2,"ion-card")(3,"ion-card-content",1)(4,"div",2),r.nrm(5,"ion-icon",3),r.j41(6,"div",4)(7,"span"),r.EFF(8),r.k0s(),r.j41(9,"div",5),r.EFF(10),r.k0s()()(),r.j41(11,"div",6),r.nrm(12,"ion-icon",7),r.j41(13,"span",8),r.EFF(14),r.k0s()()()(),r.j41(15,"ion-card",9)(16,"ion-card-content")(17,"div",10)(18,"div",11),r.nrm(19,"ion-icon",3),r.k0s(),r.j41(20,"div",12)(21,"h3"),r.EFF(22),r.k0s(),r.j41(23,"p"),r.EFF(24,"Tiempo estimado: "),r.j41(25,"strong"),r.EFF(26),r.k0s()()()()()(),r.j41(27,"ion-card")(28,"ion-card-header")(29,"ion-card-title"),r.EFF(30,"Asignar Horario de Recolecci\xf3n"),r.k0s()(),r.j41(31,"ion-card-content")(32,"ion-item")(33,"ion-label"),r.EFF(34,"Fecha de Recolecci\xf3n"),r.k0s(),r.j41(35,"ion-input",13),r.mxI("ngModelChange",function(a){return r.DH7(o.fechaRecoleccion,a)||(o.fechaRecoleccion=a),a}),r.bIt("ionChange",function(){return o.onDateOrTimeChange()}),r.k0s()(),r.j41(36,"ion-item")(37,"ion-label"),r.EFF(38,"Hora de Recolecci\xf3n"),r.k0s(),r.j41(39,"ion-select",14),r.mxI("ngModelChange",function(a){return r.DH7(o.horaRecoleccion,a)||(o.horaRecoleccion=a),a}),r.bIt("ionChange",function(){return o.onDateOrTimeChange()}),r.DNE(40,Oo,2,3,"ion-select-option",15),r.k0s()(),r.DNE(41,Eo,10,10,"ion-item",16),r.j41(42,"ion-item"),r.nrm(43,"ion-icon",17),r.j41(44,"ion-label",18)(45,"h3"),r.EFF(46,"Horarios Disponibles"),r.k0s(),r.j41(47,"p"),r.EFF(48,"\u2705 Puedes elegir desde HOY cualquier hora que necesites"),r.k0s(),r.j41(49,"p"),r.nrm(50,"ion-icon",19),r.EFF(51),r.k0s()()(),r.j41(52,"ion-card",20)(53,"ion-card-content")(54,"div",21)(55,"span",22),r.EFF(56,"Tiempo estimado"),r.k0s(),r.j41(57,"span",23),r.EFF(58),r.k0s()(),r.j41(59,"div",21)(60,"span",22),r.EFF(61,"Hora asignada"),r.k0s(),r.j41(62,"span",24),r.EFF(63),r.k0s()()()(),r.j41(64,"div",25),r.DNE(65,xo,22,7,"div",26)(66,Io,3,0,"ion-button",27)(67,Ao,3,0,"ion-button",28),r.k0s(),r.j41(68,"ion-card",29)(69,"ion-card-header")(70,"ion-card-subtitle"),r.nrm(71,"ion-icon",30),r.EFF(72," Sistema Inteligente de Asignaci\xf3n "),r.k0s()(),r.j41(73,"ion-card-content")(74,"p",31),r.EFF(75," El sistema ajusta autom\xe1ticamente los tiempos seg\xfan la demanda actual. "),r.k0s()()(),r.DNE(76,Ro,7,2,"div",32)(77,Fo,4,0,"div",33),r.k0s()()()),2&n&&(r.Y8G("isModal",!0)("showNombre",!1)("showLogo",!1),r.R7$(2),r.HbH(o.isPeakHour()?"peak-hour-card":"normal-hour-card"),r.R7$(3),r.Y8G("name","irregular"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"warning":"alta"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)||"mediaalta"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"flame":"checkmark-circle")("color",null==o.currentDemandLevel?null:o.currentDemandLevel.color),r.R7$(2),r.HbH("demand-level-"+(null==o.currentDemandLevel?null:o.currentDemandLevel.level)),r.R7$(),r.SpI(" ",o.getDemandMessage()," "),r.R7$(2),r.SpI(" Nivel: ",(null==o.currentDemandLevel||null==o.currentDemandLevel.level?null:o.currentDemandLevel.level.toUpperCase())||"CALCULANDO"," "),r.R7$(4),r.JRh(o.formatCurrentTime()),r.R7$(),r.HbH("demand-"+(null==o.currentDemandLevel?null:o.currentDemandLevel.level)),r.R7$(4),r.Y8G("name","baja"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"flash":"normal"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"speedometer":"moderada"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"trending-up":"media"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"pulse":"alta"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"flame":"mediaalta"===(null==o.currentDemandLevel?null:o.currentDemandLevel.level)?"warning":"alert-circle")("color",null==o.currentDemandLevel?null:o.currentDemandLevel.color),r.R7$(3),r.JRh(o.getDemandDescription()),r.R7$(4),r.JRh(o.estimatedTime),r.R7$(9),r.R50("ngModel",o.fechaRecoleccion),r.Y8G("min",o.fechaMinima.split("T")[0])("max",o.fechaMaxima.split("T")[0]),r.R7$(4),r.R50("ngModel",o.horaRecoleccion),r.R7$(),r.Y8G("ngForOf",o.horaOpciones),r.R7$(),r.Y8G("ngIf",o.fechaHoraRecoleccion),r.R7$(10),r.Lme(" Horario sugerido: ",o.formatHoraAMPM(o.horaEntrada)," - ",o.formatHoraAMPM(o.horaSalida)," "),r.R7$(7),r.JRh(o.estimatedTime),r.R7$(5),r.JRh(o.formatAssignedTime()),r.R7$(2),r.Y8G("ngIf",o.isCountdownActive),r.R7$(),r.Y8G("ngIf",!o.isCountdownActive&&!o.isAssigned),r.R7$(),r.Y8G("ngIf",o.isAssigned),r.R7$(9),r.Y8G("ngIf","en preparaci\xf3n"===o.pedido.estatus.toLowerCase()&&!o.isCountdownActive),r.R7$(),r.Y8G("ngIf",o.showAnimation))},dependencies:[u.Sq,u.bT,_.Jm,_.b_,_.I9,_.ME,_.HW,_.tN,_.W9,_.iq,_.$w,_.uz,_.he,_.FH,_.Ob,_.Nm,_.Ip,_.w2,_.Je,_.Gw,D.BC,D.vS,ui.l,u.vh],styles:['.assign-slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:50px;text-align:center}.assign-slider[_ngcontent-%COMP%]{width:80%;--knob-size: 36px;--bar-height: 24px;--knob-background: var(--ion-color-primary);--bar-background-active: var(--ion-color-primary);--bar-background: #ddd;--bar-border-radius: 50px}.assign-slider[disabled][_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.success-animation[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px;animation:_ngcontent-%COMP%_fadeInScale .5s ease forwards}.success-animation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:var(--ion-color-primary);animation:_ngcontent-%COMP%_scaleUp .5s ease forwards}.success-animation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-primary);margin-top:8px}.warning-text[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-size:.9rem;margin:8px 0;display:flex;align-items:center;gap:8px}.warning-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}ion-datetime[_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-dark);border-radius:8px;padding:8px;width:100%}ion-item.date-time-item[_ngcontent-%COMP%]{background:var(--ion-color-light);border-radius:8px;margin-bottom:12px;box-shadow:0 1px 4px #28a74512}ion-item.date-time-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary);font-size:1rem}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary-tint);border-radius:6px;padding:8px 12px;font-size:1rem;background:#fff;transition:border-color .2s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);box-shadow:0 0 0 2px #28a74526}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary-shade)}ion-item.date-time-item[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date]), ion-item[_ngcontent-%COMP%]:has(ion-input[type=time]){background:linear-gradient(90deg,#f8fafc 0%,var(--ion-color-primary-tint) 100%);border-radius:14px;margin-bottom:18px;box-shadow:0 4px 16px #28a74517;border:1.5px solid var(--ion-color-primary-tint);position:relative;transition:box-shadow .2s,border-color .2s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-label[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-primary);font-size:1.08rem;letter-spacing:.5px;margin-bottom:4px;display:flex;align-items:center;gap:6px}ion-item.date-time-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]:before, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-label[_ngcontent-%COMP%]:before, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-label[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:18px;height:18px;background:url(\'data:image/svg+xml;utf8,<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" color="%2338b000" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>\') no-repeat center;margin-right:4px;opacity:.7}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%], ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=time][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=time][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=date][_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=time][_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary-tint);border-radius:8px;padding:12px 16px;font-size:1.15rem;background:#fff;color:var(--ion-color-dark);font-weight:600;box-shadow:0 2px 8px #28a74512;transition:border-color .2s,box-shadow .2s,background .2s;outline:none;margin-top:6px}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]:focus, ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=time][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=time][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=date][_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=time][_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);background:linear-gradient(90deg,#e9f5e1,#fff);box-shadow:0 0 0 3px #28a74526;animation:inputFocusPulse .3s}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]:hover, ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=time][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=time][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=date][_ngcontent-%COMP%]:hover, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=time][_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary-shade);background:#f4fff4}ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]::placeholder, ion-item.date-time-item[_ngcontent-%COMP%]   ion-input[type=time][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=date][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=date])   ion-input[type=time][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=date][_ngcontent-%COMP%]::placeholder, ion-item[_ngcontent-%COMP%]:has(ion-input[type=time])   ion-input[type=time][_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium);font-weight:400;opacity:.8}ion-item[_ngcontent-%COMP%]:has(ion-select){background:linear-gradient(90deg,#f8fafc 0%,var(--ion-color-primary-tint) 100%);border-radius:14px;margin-bottom:18px;box-shadow:0 4px 16px #28a74517;border:1.5px solid var(--ion-color-primary-tint);position:relative;transition:box-shadow .2s,border-color .2s}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-label[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-primary);font-size:1.08rem;letter-spacing:.5px;margin-bottom:4px;display:flex;align-items:center;gap:6px}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-label[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:18px;height:18px;background:url(\'data:image/svg+xml;utf8,<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" color="%2338b000" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>\') no-repeat center;margin-right:4px;opacity:.7}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary-tint);border-radius:8px;padding:12px 16px;font-size:1.15rem;background:#fff;color:var(--ion-color-dark);font-weight:600;box-shadow:0 2px 8px #28a74512;transition:border-color .2s,box-shadow .2s,background .2s;outline:none;margin-top:6px}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);background:linear-gradient(90deg,#e9f5e1,#fff);box-shadow:0 0 0 3px #28a74526;animation:inputFocusPulse .3s}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]:hover{border-color:var(--ion-color-primary-shade);background:#f4fff4}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium);font-weight:400;opacity:.8}ion-item[_ngcontent-%COMP%]:has(ion-select)   ion-select-option[disabled][_ngcontent-%COMP%]{color:var(--ion-color-medium);background:#f5f5f5;opacity:.7;cursor:not-allowed}.restart-button[_ngcontent-%COMP%]{--background: linear-gradient(90deg, #38b000 0%, #70e000 100%);--background-hover: linear-gradient(90deg, #70e000 0%, #38b000 100%);--color: #fff;font-weight:700;font-size:12px;border-radius:10px;box-shadow:0 4px 16px #38b00021;letter-spacing:.5px;margin-top:10px;transition:transform .12s,box-shadow .2s;border:none}.restart-button[_ngcontent-%COMP%]:active{transform:scale(.96);box-shadow:0 2px 8px #38b0002e}.selected-date-display[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-primary-tint) 0%,var(--ion-color-light) 100%);border-radius:10px;padding:16px;margin:12px 0;border-left:5px solid var(--ion-color-primary);box-shadow:0 2px 8px #28a74512}.selected-date-display[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--ion-color-primary);margin-bottom:6px;font-weight:700}.selected-date-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--ion-color-dark);margin:2px 0;font-weight:500}.selected-date-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:.95rem;color:var(--ion-color-medium);font-weight:400}ion-button[_ngcontent-%COMP%]{font-size:1rem;border-radius:8px;font-weight:600;box-shadow:0 2px 8px #28a74512;transition:transform .1s}ion-button[_ngcontent-%COMP%]:active{transform:scale(.97)}ion-button.cancel-button[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-danger) 0%,var(--ion-color-danger-tint) 100%);color:#fff}ion-button.restart-button[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-tertiary) 0%,var(--ion-color-tertiary-tint) 100%);color:#fff}ion-button.assigning-button[_ngcontent-%COMP%]{background:var(--ion-color-medium);color:#fff;opacity:.8}.auto-assignment-section[_ngcontent-%COMP%]{margin-top:32px;padding:20px 0;background:linear-gradient(90deg,var(--ion-color-light) 0%,var(--ion-color-primary-tint) 100%);border-radius:12px;box-shadow:0 2px 8px #28a7450d}.countdown-display[_ngcontent-%COMP%]{border-radius:16px;padding:28px;margin-bottom:18px;box-shadow:0 2px 12px #ffc10717}.countdown-display[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--ion-color-warning);font-weight:700}.countdown-display[_ngcontent-%COMP%]   .countdown-number[_ngcontent-%COMP%]{font-size:4.2rem;color:var(--ion-color-warning);font-weight:700;margin:18px 0;text-shadow:0 2px 8px rgba(255,193,7,.08)}.countdown-display[_ngcontent-%COMP%]   .auto-assignment-info[_ngcontent-%COMP%]{margin:18px 0}.countdown-display[_ngcontent-%COMP%]   .auto-assignment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-medium);margin:2px 0}.countdown-display[_ngcontent-%COMP%]   .countdown-text[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-warning);margin-top:10px}.time-assignment-card[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fff 0%,var(--ion-color-light) 100%);border-radius:14px;box-shadow:0 2px 8px #28a74512;margin:18px 0}.time-assignment-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:24px}.time-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 0;border-bottom:1px solid #f0f0f0}.time-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.time-row[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;font-weight:600}.time-row[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.time-row[_ngcontent-%COMP%]   .time-value.success[_ngcontent-%COMP%]{color:var(--ion-color-success)}.time-row[_ngcontent-%COMP%]   .time-value.primary[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.time-row[_ngcontent-%COMP%]   .time-value.warning[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.time-row[_ngcontent-%COMP%]   .time-value.danger[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.status-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}.status-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.demand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.demand-info[_ngcontent-%COMP%]   .demand-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin-top:2px}.time-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.current-time[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}.demand-level-baja[_ngcontent-%COMP%], .demand-level-normal[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600}.demand-level-moderada[_ngcontent-%COMP%], .demand-level-media[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.demand-level-alta[_ngcontent-%COMP%], .demand-level-mediaalta[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-weight:600}.demand-level-irregular[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-weight:600}.peak-hour-card[_ngcontent-%COMP%]{--background: rgba(255, 193, 7, .1);border-left:4px solid var(--ion-color-warning)}.normal-hour-card[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .1);border-left:4px solid var(--ion-color-success)}.demand-info-card[_ngcontent-%COMP%]{margin-top:16px}.demand-info-card.demand-baja[_ngcontent-%COMP%], .demand-info-card.demand-normal[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .05);border-left:4px solid var(--ion-color-success)}.demand-info-card.demand-moderada[_ngcontent-%COMP%], .demand-info-card.demand-media[_ngcontent-%COMP%]{--background: rgba(52, 144, 220, .05);border-left:4px solid var(--ion-color-primary)}.demand-info-card.demand-alta[_ngcontent-%COMP%], .demand-info-card.demand-mediaalta[_ngcontent-%COMP%]{--background: rgba(255, 193, 7, .05);border-left:4px solid var(--ion-color-warning)}.demand-info-card.demand-irregular[_ngcontent-%COMP%]{--background: rgba(245, 61, 61, .05);border-left:4px solid var(--ion-color-danger)}.demand-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.demand-display[_ngcontent-%COMP%]   .demand-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]{flex:1}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.2rem;font-weight:600}.demand-display[_ngcontent-%COMP%]   .demand-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium)}.auto-assignment-section[_ngcontent-%COMP%]{margin-top:24px;padding:16px 0}.countdown-container[_ngcontent-%COMP%]{margin-bottom:20px}.countdown-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc1071a,#ff57331a);border:2px solid var(--ion-color-warning);border-radius:12px;padding:24px;text-align:center;margin-bottom:16px;position:relative;overflow:hidden}.countdown-display.countdown-baja[_ngcontent-%COMP%], .countdown-display.countdown-normal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a7451a,#28a7450d);border-color:var(--ion-color-success)}.countdown-display.countdown-moderada[_ngcontent-%COMP%], .countdown-display.countdown-media[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3490dc1a,#3490dc0d);border-color:var(--ion-color-primary)}.countdown-display.countdown-alta[_ngcontent-%COMP%], .countdown-display.countdown-mediaalta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc1071a,#ffc1070d);border-color:var(--ion-color-warning)}.countdown-display.countdown-irregular[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f53d3d1a,#f53d3d0d);border-color:var(--ion-color-danger)}.countdown-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-warning);animation:_ngcontent-%COMP%_pulse 2s infinite}.countdown-display[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-size:1.1rem;margin:8px 0;font-weight:600}.countdown-number[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;color:var(--ion-color-warning);margin:16px 0;animation:_ngcontent-%COMP%_pulse 1s infinite;text-shadow:0 2px 4px rgba(0,0,0,.1)}.auto-assignment-info[_ngcontent-%COMP%]{margin:16px 0}.auto-assignment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem;color:var(--ion-color-medium)}.countdown-progress[_ngcontent-%COMP%]{margin:16px 0;height:8px;--progress-background: rgba(255, 193, 7, .3);--background: rgba(255, 193, 7, .1);border-radius:4px}.countdown-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-warning);margin:8px 0 0}.cancel-button[_ngcontent-%COMP%]{--background: var(--ion-color-danger);--background-hover: var(--ion-color-danger-shade);--color: white;margin-top:8px;font-weight:600}.cancel-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.restart-button[_ngcontent-%COMP%]{--background: var(--ion-color-tertiary);--background-hover: var(--ion-color-tertiary-shade);--color: white;font-weight:600}.restart-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.assigning-button[_ngcontent-%COMP%]{--background: var(--ion-color-medium);--color: white;cursor:not-allowed}.system-info-card[_ngcontent-%COMP%]{--background: rgba(40, 167, 69, .05);border:1px solid rgba(40,167,69,.2);margin-top:16px}.system-info-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ion-color-success);font-weight:600}.system-info-card[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-success);margin:0 0 12px;line-height:1.4}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(.5)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}to{transform:scale(1);opacity:1}}@media (max-width: 768px){.countdown-number[_ngcontent-%COMP%]{font-size:3rem}.countdown-display[_ngcontent-%COMP%]{padding:20px}.status-bar[_ngcontent-%COMP%]{flex-direction:column;gap:8px;text-align:center}.demand-display[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:12px}.time-assignment-card[_ngcontent-%COMP%]{margin:12px 0}.time-assignment-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}.time-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px;padding:16px 0}.time-row[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:14px}.time-row[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:18px;align-self:flex-end}ion-item.date-time-item[_ngcontent-%COMP%]{margin-bottom:8px}}']}),e})();var Do=C(421);const So=i=>[i,"MXN","symbol-narrow","1.2-2","en-US"],No=()=>[1,1,1,1,1,1,1,1];function jo(i,e){if(1&i){const t=r.RV6();r.j41(0,"ion-button",8),r.bIt("click",function(){r.eBV(t);const o=r.XpG();return r.Njj(o.clearFilters())}),r.EFF(1," Quitar Filtros "),r.nrm(2,"ion-icon",4),r.k0s()}}function $o(i,e){if(1&i&&(r.j41(0,"div",17)(1,"strong"),r.nrm(2,"ion-icon",21),r.EFF(3),r.nI1(4,"date"),r.k0s()()),2&i){const t=r.XpG(2).$implicit,n=r.XpG(2);r.R7$(2),r.Y8G("name","negocio"===n.getEffectiveDeliveryType(t)?"time-outline":"truck-outline")("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),r.R7$(),r.Lme(" ",n.getScheduledLabel(t),": ",r.i5U(4,4,n.getScheduledDate(t),"dd/MM/yyyy HH:mm")," ")}}function Ho(i,e){if(1&i&&(r.j41(0,"div",42),r.nrm(1,"ion-icon",43),r.j41(2,"span",44),r.EFF(3),r.nI1(4,"date"),r.k0s()()),2&i){const t=r.XpG(3).$implicit,n=r.XpG(2);r.R7$(3),r.SpI(" Horario programado: ",r.brH(4,1,n.getScheduledDate(t),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES")," ")}}function Lo(i,e){if(1&i&&(r.j41(0,"div",34)(1,"div",35),r.nrm(2,"ion-icon",36),r.j41(3,"span",37),r.EFF(4,"Recolecci\xf3n en Tortiller\xeda Plata Jaimes"),r.k0s()(),r.DNE(5,Ho,5,5,"div",38),r.j41(6,"div",39),r.nrm(7,"ion-icon",40),r.j41(8,"span",41),r.EFF(9,"Cliente debe presentar ID o n\xfamero de pedido"),r.k0s()()()),2&i){const t=r.XpG(2).$implicit,n=r.XpG(2);r.R7$(5),r.Y8G("ngIf",n.getScheduledDate(t))}}function qo(i,e){if(1&i&&(r.j41(0,"div",50),r.nrm(1,"ion-icon",51),r.j41(2,"span",44),r.EFF(3),r.nI1(4,"date"),r.k0s()()),2&i){const t=r.XpG(3).$implicit,n=r.XpG(2);r.R7$(3),r.SpI(" Horario de entrega: ",r.brH(4,1,n.getScheduledDate(t),"EEEE, dd 'de' MMMM 'a las' HH:mm","es-ES")," ")}}function zo(i,e){if(1&i&&(r.j41(0,"div",45)(1,"div",46),r.nrm(2,"ion-icon",47),r.j41(3,"span",48),r.EFF(4,"Entrega en domicilio programada"),r.k0s()(),r.DNE(5,qo,5,5,"div",49),r.k0s()),2&i){const t=r.XpG(2).$implicit,n=r.XpG(2);r.R7$(5),r.Y8G("ngIf",n.getScheduledDate(t))}}function Uo(i,e){1&i&&(r.j41(0,"ion-chip",52),r.nrm(1,"ion-icon",53),r.j41(2,"ion-label"),r.EFF(3,"Pr\xf3ximo"),r.k0s()())}function Go(i,e){if(1&i){const t=r.RV6();r.j41(0,"ion-item-option",54),r.bIt("click",function(){r.eBV(t);const o=r.XpG(2).$implicit,s=r.XpG(2);return r.Njj(s.cancelarPedido(o))}),r.nrm(1,"ion-icon",55),r.EFF(2," Cancelar "),r.k0s()}}function Bo(i,e){if(1&i){const t=r.RV6();r.j41(0,"ion-item-sliding",11)(1,"ion-item",12)(2,"ion-label",13)(3,"div",14)(4,"h2"),r.nrm(5,"ion-icon",15),r.EFF(6),r.nI1(7,"currency"),r.k0s()(),r.j41(8,"div",16)(9,"div",17)(10,"strong"),r.nrm(11,"ion-icon",18),r.EFF(12),r.k0s(),r.j41(13,"strong",19),r.nrm(14,"ion-icon",20),r.EFF(15),r.k0s()(),r.j41(16,"div",17)(17,"strong"),r.nrm(18,"ion-icon",21),r.EFF(19),r.k0s()(),r.DNE(20,$o,5,7,"div",22),r.k0s(),r.DNE(21,Lo,10,1,"div",23)(22,zo,6,1,"div",24),r.j41(23,"div",25)(24,"ion-chip",26),r.nrm(25,"ion-icon",27),r.j41(26,"ion-label"),r.EFF(27),r.k0s()(),r.j41(28,"ion-chip",28),r.nrm(29,"ion-icon",29),r.j41(30,"ion-label"),r.EFF(31),r.k0s()(),r.DNE(32,Uo,4,0,"ion-chip",30),r.k0s()()(),r.j41(33,"ion-item-options")(34,"ion-item-option",31),r.bIt("click",function(){r.eBV(t);const o=r.XpG().$implicit,s=r.XpG(2);return r.Njj(s.openAsignarHorario(o))}),r.EFF(35," Asignar horario "),r.nrm(36,"ion-icon",32),r.k0s(),r.DNE(37,Go,3,0,"ion-item-option",33),r.k0s()()}if(2&i){const t=r.XpG().$implicit,n=r.XpG(2);r.R7$(6),r.SpI(" ",r.iJd(7,15,r.eq3(21,So,t.total))," MXN "),r.R7$(6),r.SpI(" Cliente: ",t.nombre_cliente," "),r.R7$(3),r.SpI(" ",t.estatus," "),r.R7$(3),r.Y8G("name",n.getDeliveryTypeIcon(n.getEffectiveDeliveryType(t)))("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),r.R7$(),r.SpI(" ",n.getDeliveryTypeDisplayName(n.getEffectiveDeliveryType(t))," "),r.R7$(),r.Y8G("ngIf",n.getScheduledDate(t)),r.R7$(),r.Y8G("ngIf","negocio"===n.getEffectiveDeliveryType(t)),r.R7$(),r.Y8G("ngIf","domicilio"===n.getEffectiveDeliveryType(t)),r.R7$(5),r.JRh(t.tipo_pago),r.R7$(),r.Y8G("color",n.getDeliveryTypeColor(n.getEffectiveDeliveryType(t))),r.R7$(),r.Y8G("name",n.getDeliveryTypeIcon(n.getEffectiveDeliveryType(t))),r.R7$(2),r.JRh("negocio"===n.getEffectiveDeliveryType(t)?"Recolecci\xf3n":"Domicilio"),r.R7$(),r.Y8G("ngIf",n.isScheduledSoon(t)),r.R7$(5),r.Y8G("ngIf","cancelado"!==t.estatus.toLowerCase()&&"entregado"!==t.estatus.toLowerCase())}}function Yo(i,e){if(1&i&&(r.j41(0,"ion-list"),r.DNE(1,Bo,38,23,"ion-item-sliding",10),r.k0s()),2&i){const t=e.$implicit;r.R7$(),r.Y8G("ngIf","en preparaci\xf3n"===t.estatus.toLowerCase())}}function Qo(i,e){if(1&i&&(r.qex(0),r.DNE(1,Yo,2,1,"ion-list",9),r.bVm()),2&i){const t=r.XpG();r.R7$(),r.Y8G("ngForOf",t.pedidosFiltrados)}}function Ko(i,e){1&i&&(r.j41(0,"ion-item",11)(1,"ion-avatar",57),r.nrm(2,"ion-skeleton-text",58),r.k0s(),r.j41(3,"ion-label")(4,"div"),r.nrm(5,"ion-skeleton-text",59),r.k0s(),r.j41(6,"div"),r.nrm(7,"ion-skeleton-text",60),r.k0s()()())}function Wo(i,e){1&i&&(r.j41(0,"ion-list"),r.DNE(1,Ko,8,0,"ion-item",56),r.k0s()),2&i&&(r.R7$(),r.Y8G("ngForOf",r.lJ4(1,No)))}function Xo(i,e){1&i&&(r.j41(0,"div",61),r.nrm(1,"ion-icon",62),r.j41(2,"h3"),r.EFF(3,"No hay pedidos disponibles"),r.k0s()())}const Jo=[{path:"",component:(()=>{var i;class e{constructor(n,o){this.modalCtrl=n,this.alertController=o,this.showModal=!1,this.isEditing=!1,this.pedidos=[],this.detalle_pedido=[],this.loading=!1,this.searchTerm="",this.filtersApplied=!1,this.pedidosFiltrados=[],this.utilsSvc=(0,r.WQX)(ai.T),this.firebaseSvc=(0,r.WQX)(si.f),this.fecha=(new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}ngOnInit(){this.fecha=this.fecha.charAt(0).toUpperCase()+this.fecha.slice(1),this.getPedidos()}user(){return this.utilsSvc.getFromLocalStorage("user")}doRefresh(n){setTimeout(()=>{this.getPedidos(),n.target.complete()},1e3)}closeModal(){this.showModal=!1}getPedidos(){var n=this;this.loading=!0;let s=[uo("estatus","==","En preparaci\xf3n")],a=new Date;a.setHours(0,0,0,0);let c=new Date(a);c.setDate(a.getDate()+1);let l=this.firebaseSvc.getCollectionData("pedidos",s).subscribe({next:d=>{if(Array.isArray(d)){this.loading=!0,this.pedidos=d;const h=this.pedidos.filter(p=>{let y;if(p.hora_recoleccion&&p.hora_recoleccion.toDate)y=p.hora_recoleccion.toDate();else if(p.fecha_entrega&&p.fecha_entrega.toDate)y=p.fecha_entrega.toDate();else{if(!p.fecha_entrega)return!1;y=new Date(p.fecha_entrega)}return y>=a&&y<c}),f=h.map(p=>this.firebaseSvc.getDocument(`users/${p.uid_cliente}`).then(P=>(p.nombre_cliente=P.name+" "+P.mother_Last_Name+" "+P.father_Last_Name,this.firebaseSvc.getCollectionData(`pedidos/${p.id}/detalle_pedido`,[]).subscribe({next:T=>{p.detalle_pedido=T,p.detalle_pedido.forEach(function(){var ee=(0,q.A)(function*(L){const J=`productos/${L.uid_producto}`;try{let W=yield n.firebaseSvc.getDocument(J);L.producto=W}catch{}});return function(L){return ee.apply(this,arguments)}}())},error:T=>console.error("Error al obtener datos:",T)}),p)));Promise.all(f).then(p=>{this.pedidosFiltrados=h,this.loading=!1}).catch(p=>{this.loading=!1})}else this.pedidos=[],this.pedidosFiltrados=[];l.unsubscribe()},error:d=>{this.loading=!1}})}refreshOrders(){}openFilterModal(){var n=this;return(0,q.A)(function*(){const s=yield n.modalCtrl.create({component:Do.w,componentProps:{estatus:!1}});yield s.present();const{data:a}=yield s.onDidDismiss();a&&n.applyFilter(a)})()}applyFilter(n){this.filtersApplied=!0,this.pedidosFiltrados=this.pedidos.filter(o=>{if(n.selectedStatus&&n.selectedStatus.length&&!n.selectedStatus.includes(o.estatus))return!1;if(n.fechaInicio&&n.fechaFin){const s=new Date(o.fecha),a=new Date(n.fechaInicio),c=new Date(n.fechaFin);if(s<a||s>c)return!1}return!(null!==n.precioMin&&null!==n.precioMax&&(o.total<n.precioMin||o.total>n.precioMax))})}clearFilters(){let n=new Date;n.setHours(0,0,0,0);let o=new Date(n);o.setDate(n.getDate()+1),this.pedidosFiltrados=this.pedidos.filter(s=>{let a;if(s.fecha_entrega&&s.fecha_entrega.toDate)a=s.fecha_entrega.toDate();else{if(!s.fecha_entrega)return!1;a=new Date(s.fecha_entrega)}return a>=n&&a<o}),this.filtersApplied=!1}filterPedidos(){const n=this.searchTerm.toLowerCase();this.pedidosFiltrados=this.pedidos.filter(o=>o.nombre_cliente.toLowerCase().includes(n)||o.total.toFixed(2).includes(n)||o.id.toLowerCase().includes(n)||o.estatus.toLowerCase().includes(n))}getStatusIcon(n){switch(n.toLowerCase()){case"pedido confirmado":return"bag-check-outline";case"en preparaci\xf3n":return"refresh-circle-outline";case"en espera de recolecci\xf3n":return"time-outline";case"entregado":return"checkmark-done-outline";case"cancelado":return"close-circle-outline";default:return"help-circle-outline"}}cancelarPedido(n){var o=this;return(0,q.A)(function*(){var a;yield(yield o.alertController.create({header:"Cancelar Pedido",mode:"ios",message:"\xbfRealmente deseas cancelar el pedido?",cssClass:"custom-alert",buttons:[{text:"Cancelar",role:"cancel",cssClass:"alert-cancel",handler:()=>{}},{text:"Confirmar",cssClass:"alert-confirm",handler:(a=(0,q.A)(function*(){let c=`pedidos/${n.id}`;const l=yield o.utilsSvc.loading();yield l.present(),n.estatus="Cancelado",o.firebaseSvc.updateDocumet(c,{estatus:n.estatus}).then(function(){var d=(0,q.A)(function*(h){o.utilsSvc.presentToast({message:"Pedido cancelado",duration:2500,color:"primary",position:"bottom",icon:"refresh-circle-outline"})});return function(h){return d.apply(this,arguments)}}()).catch(d=>{o.utilsSvc.presentToast({message:d.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{l.dismiss()})}),function(){return a.apply(this,arguments)})}],backdropDismiss:!1})).present()})()}getColorIcon(n){switch(n.toLowerCase()){case"cancelado":return"danger";case"entregado":return"primary";default:return"dark"}}openAsignarHorario(n){var o=this;return(0,q.A)(function*(){(yield o.utilsSvc.presentModal({component:Vo,componentProps:{pedido:n}}))&&o.utilsSvc.presentToast({message:"Pedido en espera de entrega",duration:2500,color:"primary",position:"bottom",icon:"refresh-circle-outline"}),o.getPedidos()})()}getEffectiveDeliveryType(n){if(!0===(null==n?void 0:n.es_recoleccion_negocio)||"negocio"===(null==n?void 0:n.metodo_entrega)||"negocio"===(null==n?void 0:n.tipo_entrega)||null!=n&&n.hora_recoleccion)return"negocio";const o=((null==n?void 0:n.tipo_entrega)||"").toLowerCase();return o?"domicilio"===o&&this.hasUbicacion(n)?"domicilio":"negocio":this.hasUbicacion(n)?"domicilio":"negocio"}hasUbicacion(n){var o,s;if(!n)return!1;const a=null==n?void 0:n.geopoint_entrega,c=a&&"number"==typeof a.latitude&&"number"==typeof a.longitude&&!isNaN(a.latitude)&&!isNaN(a.longitude),l="number"==typeof(null==n?void 0:n.lat)&&"number"==typeof(null==n?void 0:n.lng)||"number"==typeof(null==n||null===(o=n.coordenadas)||void 0===o?void 0:o.lat)&&"number"==typeof(null==n||null===(s=n.coordenadas)||void 0===s?void 0:s.lng);return!(!c&&!l)}getDeliveryTypeIcon(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"home-outline";case"negocio":return"storefront-outline";default:return"location-outline"}}getDeliveryTypeColor(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"primary";case"negocio":return"success";default:return"medium"}}getDeliveryTypeDisplayName(n){switch(null==n?void 0:n.toLowerCase()){case"domicilio":return"Entrega a domicilio";case"negocio":return"Recolecci\xf3n en negocio";default:return"Tipo no especificado"}}getScheduledDate(n){return null!=n&&n.hora_recoleccion?this.toDateTime(n.hora_recoleccion):null!=n&&n.fecha_entrega?this.toDateTime(n.fecha_entrega):null!=n&&n.fecha?this.toDateTime(n.fecha):null}getScheduledLabel(n){return"negocio"===this.getEffectiveDeliveryType(n)?null!=n&&n.hora_recoleccion?"Horario de recolecci\xf3n":null!=n&&n.fecha_entrega?"Horario programado":"Fecha del pedido":"Horario de entrega"}toDateTime(n){if(!n)return null;if(null!=n&&n.toDate&&"function"==typeof n.toDate)return n.toDate();if(null!=n&&n.seconds)return new Date(1e3*n.seconds);const o=new Date(n);return isNaN(o.getTime())?null:o}isScheduledSoon(n){const o=this.getScheduledDate(n);if(!o)return!1;const s=new Date;return o<=new Date(s.getTime()+72e5)&&o>s}}return(i=e).\u0275fac=function(n){return new(n||i)(r.rXU(_.W3),r.rXU(_.hG))},i.\u0275cmp=r.VBU({type:i,selectors:[["app-horario"]],decls:12,vars:6,consts:[["title","Horarios de entrega",3,"showMenu"],["slot","fixed",3,"ionRefresh"],["mode","ios","animated","true","placeholder","Cliente, productos, precio o c\xf3digo",3,"ngModelChange","ionInput","ngModel"],["expand","block","color","primary",3,"click"],["name","filter-outline",2,"margin-left","0.5rem"],["expand","block","color","light",3,"click",4,"ngIf"],[4,"ngIf"],["class","empty",4,"ngIf"],["expand","block","color","light",3,"click"],[4,"ngFor","ngForOf"],["class","product-item",4,"ngIf"],[1,"product-item"],[1,"card","horario-item"],[1,"horario-label"],[1,"name"],["slot","start","color","danger","name","cash-outline",2,"margin-right","2rem"],[1,"horario-main-info"],[1,"data"],["slot","start","name","person-outline"],[2,"margin-left","3rem"],["slot","start","name","refresh-circle-outline"],["slot","start",3,"name","color"],["class","data",4,"ngIf"],["class","pickup-info",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"chips-container"],["color","primary","mode","ios","outline","true"],["name","card-outline"],["mode","ios","outline","true",3,"color"],[3,"name"],["color","warning","mode","ios",4,"ngIf"],["color","primary",3,"click"],["name","alarm-outline",1,"option-btn"],["color","danger",3,"click",4,"ngIf"],[1,"pickup-info"],[1,"pickup-details"],["name","storefront-outline","color","success"],[1,"pickup-text"],["class","pickup-schedule",4,"ngIf"],[1,"pickup-instructions"],["name","information-circle-outline","color","medium"],[1,"instructions-text"],[1,"pickup-schedule"],["name","alarm-outline","color","success"],[1,"schedule-text"],[1,"delivery-info"],[1,"delivery-details"],["name","home-outline","color","primary"],[1,"delivery-text"],["class","delivery-schedule",4,"ngIf"],[1,"delivery-schedule"],["name","truck-outline","color","primary"],["color","warning","mode","ios"],["name","warning-outline"],["color","danger",3,"click"],["name","close-circle-outline",1,"option-btn",2,"margin-right","0.5rem"],["class","product-item",4,"ngFor","ngForOf"],["slot","start"],["animated","",2,"width","100%","height","100%"],["animated","",2,"width","50%"],["animated","",2,"width","30%"],[1,"empty"],["name","shield-outline"]],template:function(n,o){1&n&&(r.nrm(0,"app-header",0),r.j41(1,"ion-content")(2,"ion-refresher",1),r.bIt("ionRefresh",function(a){return o.doRefresh(a)}),r.nrm(3,"ion-refresher-content"),r.k0s(),r.j41(4,"ion-searchbar",2),r.mxI("ngModelChange",function(a){return r.DH7(o.searchTerm,a)||(o.searchTerm=a),a}),r.bIt("ionInput",function(){return o.filterPedidos()}),r.k0s(),r.j41(5,"ion-button",3),r.bIt("click",function(){return o.openFilterModal()}),r.EFF(6," Filtros "),r.nrm(7,"ion-icon",4),r.k0s(),r.DNE(8,jo,3,0,"ion-button",5)(9,Qo,2,1,"ng-container",6)(10,Wo,2,2,"ion-list",6)(11,Xo,4,0,"div",7),r.k0s()),2&n&&(r.Y8G("showMenu",!0),r.R7$(4),r.R50("ngModel",o.searchTerm),r.R7$(4),r.Y8G("ngIf",o.filtersApplied),r.R7$(),r.Y8G("ngIf",o.pedidosFiltrados.length>0),r.R7$(),r.Y8G("ngIf",o.loading),r.R7$(),r.Y8G("ngIf",!o.loading&&!o.pedidosFiltrados.length))},dependencies:[u.Sq,u.bT,D.BC,D.vS,_.mC,_.Jm,_.ZB,_.W9,_.iq,_.uz,_.LU,_.CE,_.A7,_.he,_.nf,_.To,_.Ki,_.S1,_.ds,_.Gw,ui.l,u.oe,u.vh],styles:[".option-btn[_ngcontent-%COMP%]{margin-left:.5rem}.card[_ngcontent-%COMP%]{--background: #ffffff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin:4px 8px;padding:8px}.pickup-info[_ngcontent-%COMP%]{background:rgba(var(--ion-color-success-rgb),.1);border-radius:8px;padding:12px;margin:8px 0;border-left:4px solid var(--ion-color-success)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:6px 0}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{min-width:20px}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .pickup-text[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-success)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-success-shade)}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   .instructions-text[_ngcontent-%COMP%]{font-style:italic;color:var(--ion-color-medium)}.delivery-info[_ngcontent-%COMP%]{background:rgba(var(--ion-color-primary-rgb),.1);border-radius:8px;padding:12px;margin:8px 0;border-left:4px solid var(--ion-color-primary)}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:6px 0}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{min-width:20px}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .delivery-text[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-primary)}.delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   .schedule-text[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-primary-shade)}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:12px;height:28px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.horario-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--inner-padding-end: 8px;margin-bottom:4px}.horario-label[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;gap:12px;padding:8px 0;white-space:normal!important;overflow:visible!important;text-overflow:unset!important}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 6px}.data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:6px 0;flex-wrap:wrap}.data[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (min-width: 768px){.card[_ngcontent-%COMP%]{margin:6px 10px;padding:12px}.horario-item[_ngcontent-%COMP%]{--padding-start: 14px;--padding-end: 14px;margin-bottom:6px}.horario-label[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;align-items:flex-start;gap:16px;padding:12px 0}.name[_ngcontent-%COMP%]{flex:0 0 auto;min-width:180px}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.horario-main-info[_ngcontent-%COMP%]{display:flex;flex:1;gap:20px;align-items:flex-start;min-width:0;flex-wrap:wrap}.data[_ngcontent-%COMP%]{gap:.5rem;margin:4px 0;min-width:200px}.data[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{gap:.35rem}.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{flex:1;min-width:300px;margin:0}.chips-container[_ngcontent-%COMP%]{flex:0 0 auto;margin-top:0;min-width:200px;justify-content:flex-end}}@media (min-width: 1024px){.card[_ngcontent-%COMP%]{margin:8px 12px;padding:16px}.horario-label[_ngcontent-%COMP%]{gap:24px;padding:16px 0}.name[_ngcontent-%COMP%]{min-width:200px}.name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.horario-main-info[_ngcontent-%COMP%]{gap:30px}.data[_ngcontent-%COMP%]{min-width:220px}.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{min-width:350px}.chips-container[_ngcontent-%COMP%]{min-width:220px}}@media (max-width: 768px){.pickup-info[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]{padding:10px;margin:6px 0}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]{font-size:13px}.pickup-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .pickup-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .pickup-instructions[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .delivery-info[_ngcontent-%COMP%]   .delivery-schedule[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.chips-container[_ngcontent-%COMP%]{gap:6px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:11px;height:26px}}@media (max-width: 480px){.horario-item[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px}.data[_ngcontent-%COMP%]{gap:.5rem;margin:4px 0}}@media (max-width: 360px){.horario-label[_ngcontent-%COMP%]{gap:8px}.data[_ngcontent-%COMP%]{gap:6px;margin:4px 0}.chips-container[_ngcontent-%COMP%]{gap:4px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:10px;height:24px}.chips-container[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.7rem}}"]}),e})()}];let Zo=(()=>{var i;class e{}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275mod=r.$C({type:i}),i.\u0275inj=r.G2t({imports:[be.iI.forChild(Jo),be.iI]}),e})();var er=C(7383);let tr=(()=>{var i;class e{}return(i=e).\u0275fac=function(n){return new(n||i)},i.\u0275mod=r.$C({type:i}),i.\u0275inj=r.G2t({imports:[u.MD,D.YN,_.bv,Zo,er.G]}),e})()},421:(di,Le,C)=>{C.d(Le,{w:()=>ye});var u=C(4438),D=C(5933),_=C(177),be=C(9417),q=C(8461);function r(I,A){1&I&&(u.j41(0,"ion-item-divider",4)(1,"ion-label")(2,"strong"),u.EFF(3,"Estado"),u.k0s()()())}function _e(I,A){if(1&I){const S=u.RV6();u.j41(0,"ion-item",15),u.bIt("click",function(){const M=u.eBV(S).$implicit,k=u.XpG(2);return u.Njj(k.toggleStatusFilter(M))}),u.nrm(1,"ion-icon",16),u.j41(2,"ion-label"),u.EFF(3),u.nI1(4,"titlecase"),u.k0s(),u.j41(5,"ion-checkbox",17),u.mxI("ngModelChange",function(M){const k=u.eBV(S).$implicit,O=u.XpG(2);return u.DH7(O.selectedStatus[k],M)||(O.selectedStatus[k]=M),u.Njj(M)}),u.bIt("click",function(M){return u.eBV(S),u.Njj(M.stopPropagation())}),u.k0s()()}if(2&I){const S=A.$implicit,b=u.XpG(2);u.R7$(),u.Y8G("name",b.getStatusIcon(S)),u.R7$(2),u.JRh(u.bMT(4,3,S)),u.R7$(2),u.R50("ngModel",b.selectedStatus[S])}}function pt(I,A){if(1&I&&(u.j41(0,"div"),u.DNE(1,_e,6,5,"ion-item",14),u.k0s()),2&I){const S=u.XpG();u.R7$(),u.Y8G("ngForOf",S.estatusOptions)}}let ye=(()=>{var I;class A{constructor(b){this.modalCtrl=b,this.estatusOptions=["Pedido confirmado","En preparaci\xf3n","En espera de recolecci\xf3n","Entregado","Cancelado"],this.selectedStatus={},this.fechaInicio=null,this.fechaFin=null,this.precioMin=null,this.precioMax=null,this.mostrarEstatus=!0}closeModal(){this.modalCtrl.dismiss()}toggleStatusFilter(b){this.selectedStatus[b]=!this.selectedStatus[b]}applyFilter(){const M={selectedStatus:Object.keys(this.selectedStatus).filter(k=>this.selectedStatus[k]),fechaInicio:this.fechaInicio?this.fechaInicio:null,fechaFin:this.fechaFin?this.fechaFin:null,precioMin:this.precioMin,precioMax:this.precioMax};this.modalCtrl.dismiss(M)}clearFilters(){this.selectedStatus={},this.fechaInicio=null,this.fechaFin=null,this.precioMin=null,this.precioMax=null}getStatusIcon(b){switch(b.toLowerCase()){case"pedido confirmado":return"bag-check-outline";case"en preparaci\xf3n":return"refresh-circle-outline";case"en espera de recolecci\xf3n":return"time-outline";case"entregado":return"checkmark-done-outline";case"cancelado":return"close-circle-outline";default:return"help-circle-outline"}}}return(I=A).\u0275fac=function(b){return new(b||I)(u.rXU(D.W3))},I.\u0275cmp=u.VBU({type:I,selectors:[["app-filtros-modal"]],inputs:{estatus:"estatus"},decls:38,vars:9,consts:[["title","Filtros",3,"isModal","showNombre","showLogo"],[1,"filter-content"],["color","light",4,"ngIf"],[4,"ngIf"],["color","light"],[1,"input-date-wrapper"],["type","date",3,"ngModelChange","ngModel"],["type","number","placeholder","M\xednimo",3,"ngModelChange","ngModel"],["type","number","placeholder","M\xe1ximo",3,"ngModelChange","ngModel"],[1,"filter-buttons"],["expand","block","color","primary",3,"click"],["slot","start","name","checkmark-done-outline"],["expand","block","color","danger","fill","outline",3,"click"],["slot","start","name","close-circle-outline"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start","color","medium",3,"name"],["slot","end",3,"ngModelChange","click","ngModel"]],template:function(b,M){1&b&&(u.nrm(0,"app-header",0),u.j41(1,"ion-content",1)(2,"ion-list"),u.DNE(3,r,4,0,"ion-item-divider",2)(4,pt,2,1,"div",3),u.j41(5,"ion-item-divider",4)(6,"ion-label")(7,"strong"),u.EFF(8,"Fecha"),u.k0s()()(),u.j41(9,"ion-item")(10,"div",5)(11,"ion-input",6),u.mxI("ngModelChange",function(O){return u.DH7(M.fechaInicio,O)||(M.fechaInicio=O),O}),u.k0s()(),u.j41(12,"ion-label"),u.EFF(13,"Desde"),u.k0s()(),u.j41(14,"ion-item")(15,"div",5)(16,"ion-input",6),u.mxI("ngModelChange",function(O){return u.DH7(M.fechaFin,O)||(M.fechaFin=O),O}),u.k0s()(),u.j41(17,"ion-label"),u.EFF(18,"Hasta"),u.k0s()(),u.j41(19,"ion-item-divider",4)(20,"ion-label")(21,"strong"),u.EFF(22,"Precio"),u.k0s()()(),u.j41(23,"ion-item")(24,"ion-label"),u.EFF(25,"M\xednimo"),u.k0s(),u.j41(26,"ion-input",7),u.mxI("ngModelChange",function(O){return u.DH7(M.precioMin,O)||(M.precioMin=O),O}),u.k0s()(),u.j41(27,"ion-item")(28,"ion-label"),u.EFF(29,"M\xe1ximo"),u.k0s(),u.j41(30,"ion-input",8),u.mxI("ngModelChange",function(O){return u.DH7(M.precioMax,O)||(M.precioMax=O),O}),u.k0s()(),u.j41(31,"div",9)(32,"ion-button",10),u.bIt("click",function(){return M.applyFilter()}),u.nrm(33,"ion-icon",11),u.EFF(34," Aplicar Filtros "),u.k0s(),u.j41(35,"ion-button",12),u.bIt("click",function(){return M.clearFilters()}),u.nrm(36,"ion-icon",13),u.EFF(37," Limpiar Filtros "),u.k0s()()()()),2&b&&(u.Y8G("isModal",!0)("showNombre",!1)("showLogo",!1),u.R7$(3),u.Y8G("ngIf",M.estatus),u.R7$(),u.Y8G("ngIf",M.estatus),u.R7$(7),u.R50("ngModel",M.fechaInicio),u.R7$(5),u.R50("ngModel",M.fechaFin),u.R7$(10),u.R50("ngModel",M.precioMin),u.R7$(4),u.R50("ngModel",M.precioMax))},dependencies:[_.Sq,_.bT,D.Jm,D.eY,D.W9,D.iq,D.$w,D.uz,D.Dg,D.he,D.nf,D.hB,D.su,D.Gw,be.BC,be.vS,q.l,_.PV],styles:[".filter-content[_ngcontent-%COMP%]{--ion-background-color: #f5f5f5;padding-bottom:2rem}ion-list[_ngcontent-%COMP%]{background:transparent}ion-item-divider[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;background:#e0e0e0;border-radius:8px;margin:1rem 0 .5rem;padding-left:.5rem}.filter-buttons[_ngcontent-%COMP%]{padding:1rem .5rem .5rem;display:flex;flex-direction:column;gap:.5rem}.filter-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;font-size:1rem;box-shadow:0 2px 8px #00000014}ion-item[_ngcontent-%COMP%]{--background: #fff;border-radius:8px;margin-bottom:.5rem;box-shadow:0 1px 6px #0000000a;align-items:center}ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.5rem;color:#3f51b5;min-width:24px;text-align:center;align-self:center}ion-label[_ngcontent-%COMP%]{font-size:1rem;color:#444}ion-input[type=date][_ngcontent-%COMP%], ion-input[type=number][_ngcontent-%COMP%]{--padding-start: 1rem;--background: #f9f9f9;border-radius:8px;font-size:1rem;min-height:44px;color:#222;border:1px solid #e0e0e0;margin:.5rem 0}ion-input[type=date][_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;border:none;background:#f9f9f9;font-size:1rem;color:#222}ion-checkbox[_ngcontent-%COMP%]{--background: #f9f9f9;--border-radius: 8px}ion-icon[_ngcontent-%COMP%]{font-size:1.3rem}@media (max-width: 600px){.filter-content[_ngcontent-%COMP%]{padding-bottom:1rem}ion-item-divider[_ngcontent-%COMP%]{font-size:1rem;padding-left:.3rem}.filter-buttons[_ngcontent-%COMP%]{padding:.5rem}ion-item[_ngcontent-%COMP%]{font-size:.95rem}}.input-date-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center}.input-date-wrapper[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:2.2rem;background:#eafbe7!important;border-radius:10px;border:1.5px solid #43a047;box-shadow:0 2px 8px #43a04714;color:#222;font-size:1rem;min-height:44px;transition:border .2s,box-shadow .2s}.input-date-wrapper[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]:focus-within{border:2px solid #347c37;background:#d6f5d6!important;box-shadow:0 4px 12px #43a0471f}.input-date-wrapper[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{background:transparent!important;color:#222;font-size:1rem;padding:.5rem 2.2rem .5rem .5rem}.calendar-icon-inside[_ngcontent-%COMP%]{position:absolute;right:.8rem;top:50%;transform:translateY(-50%);font-size:1.5rem;color:#43a047;background:#d6f5d6;border-radius:50%;padding:2px;box-shadow:0 1px 4px #43a0471a;pointer-events:none;z-index:2;border:1px solid #43a047}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(.5) sepia(1) saturate(5) hue-rotate(70deg);opacity:1;background:#d6f5d6;border-radius:50%;width:28px;height:28px;cursor:pointer;border:1px solid #43a047}ion-input[type=date][_ngcontent-%COMP%]:focus-within, ion-input[type=number][_ngcontent-%COMP%]:focus-within{border:1.5px solid #43a047;background:#eafbe7}ion-input[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{outline:none;border:none;background:#eafbe7}ion-input[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder{color:#aaa}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:#d6f5d6;border-radius:50%;border:1px solid #43a047;width:28px;height:28px;filter:invert(.5) sepia(1) saturate(5) hue-rotate(70deg);opacity:1;cursor:pointer}input[type=date][_ngcontent-%COMP%]::-moz-focus-inner{border:1px solid #43a047;background:#d6f5d6}input[type=date][_ngcontent-%COMP%]::-ms-input-placeholder{color:#aaa}@media (prefers-color-scheme: dark){.input-date-wrapper[_ngcontent-%COMP%]   ion-input[type=date][_ngcontent-%COMP%]{background:#1b2a1b!important;color:#fff;border:1.5px solid #7fca83}.calendar-icon-inside[_ngcontent-%COMP%]{background:#1b2a1b;color:#7fca83;border:1px solid #7fca83}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:#1b2a1b;border:1px solid #7fca83;filter:invert(.8) sepia(1) saturate(5) hue-rotate(70deg)}}"]}),A})()}}]);