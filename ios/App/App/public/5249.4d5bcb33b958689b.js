"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5249,8461,842],{5249:(H,F,p)=>{p.r(F),p.d(F,{SignUpPageModule:()=>le});var n=p(177),a=p(9417),_=p(5933),T=p(8265),h=p(467),e=p(4438),w=p(1471),j=p(1626),N=p(7517),U=p(2723),R=p(1876),M=p(7157),G=p(8461);let D=(()=>{var i;class u{constructor(o){this.navCtrl=o,this.form=new a.gE({accepted:new a.MJ(!1,a.k0.requiredTrue)})}acceptTerms(){this.form.valid&&this.navCtrl.back()}}return(i=u).\u0275fac=function(o){return new(o||i)(e.rXU(M.q9))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-terms2"]],decls:32,vars:2,consts:[[3,"isModal","title"],[1,"ion-padding"],[1,"terms-card"],["name","document-text-outline",1,"terms-icon"],[1,"terms-section"],["name","apps-outline",1,"section-icon"],["name","shield-checkmark-outline",1,"section-icon"],[1,"privacy-link"],["name","person-outline",1,"section-icon"],["name","refresh-outline",1,"section-icon"]],template:function(o,t){1&o&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"ion-card-title"),e.nrm(5,"ion-icon",3),e.EFF(6," Bienvenido "),e.k0s()(),e.j41(7,"ion-card-content")(8,"div",4)(9,"h2"),e.nrm(10,"ion-icon",5),e.EFF(11," 1. Uso de la App"),e.k0s(),e.j41(12,"p"),e.EFF(13," Al usar esta aplicaci\xf3n aceptas cumplir con las reglas y pol\xedticas establecidas por Tortiller\xeda Plata Jaimes. "),e.k0s(),e.j41(14,"h2"),e.nrm(15,"ion-icon",6),e.EFF(16," 2. Privacidad"),e.k0s(),e.j41(17,"p"),e.EFF(18," Tus datos ser\xe1n tratados conforme a nuestra "),e.j41(19,"a",7),e.EFF(20,"Pol\xedtica de Privacidad"),e.k0s(),e.EFF(21,". "),e.k0s(),e.j41(22,"h2"),e.nrm(23,"ion-icon",8),e.EFF(24," 3. Responsabilidad"),e.k0s(),e.j41(25,"p"),e.EFF(26," El usuario es responsable de la veracidad de la informaci\xf3n proporcionada y del uso adecuado de la app. "),e.k0s(),e.j41(27,"h2"),e.nrm(28,"ion-icon",9),e.EFF(29," 4. Cambios"),e.k0s(),e.j41(30,"p"),e.EFF(31," Nos reservamos el derecho de modificar estos t\xe9rminos en cualquier momento. Se notificar\xe1 a trav\xe9s de la app. "),e.k0s()()()()()),2&o&&e.Y8G("isModal",!0)("title","T\xe9rminos y Condiciones")},dependencies:[_.b_,_.I9,_.ME,_.tN,_.W9,_.iq,G.l],styles:[".terms-card[_ngcontent-%COMP%]{box-shadow:0 4px 16px #27ae601a;border-radius:18px;margin-top:18px;margin-bottom:18px;animation:_ngcontent-%COMP%_fadeIn .5s}.terms-icon[_ngcontent-%COMP%]{font-size:2em;color:#27ae60;vertical-align:middle;margin-right:8px}.section-icon[_ngcontent-%COMP%]{font-size:1.2em;color:#27ae60;margin-right:6px;vertical-align:middle}.terms-section[_ngcontent-%COMP%]{margin-bottom:20px}.terms-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;color:#27ae60;margin-top:16px;margin-bottom:4px;display:flex;align-items:center;gap:6px}.terms-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#222;margin-bottom:8px}.terms-section[_ngcontent-%COMP%]   .privacy-link[_ngcontent-%COMP%]{font-weight:500;color:#27ae60;text-decoration:underline;cursor:pointer;transition:color .2s}.terms-section[_ngcontent-%COMP%]   .privacy-link[_ngcontent-%COMP%]:hover{color:#219150}.checkbox-item[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px;--background: transparent}.button-container[_ngcontent-%COMP%]{margin-top:18px}ion-button[_ngcontent-%COMP%]{font-size:1.05em;letter-spacing:.5px}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:.95em;margin-top:8px;text-align:center}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}"]}),u})();var L=p(8827),$=p(5621);const A=(i,u,s,o)=>({weak:i,medium:u,acceptable:s,strong:o});function Y(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"Este campo es requerido"),e.k0s())}function O(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"Ingrese un nombre con al menos 4 caracteres"),e.k0s())}function c(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"El nombre no puede exceder 30 caracteres"),e.k0s())}function k(i,u){if(1&i&&(e.j41(0,"div",25),e.DNE(1,Y,2,0,"div",13)(2,O,2,0,"div",13)(3,c,2,0,"div",13),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.Y8G("ngIf",null==s.form.controls.name.errors?null:s.form.controls.name.errors.required),e.R7$(),e.Y8G("ngIf",null==s.form.controls.name.errors?null:s.form.controls.name.errors.minLenght),e.R7$(),e.Y8G("ngIf",null==s.form.controls.name.errors?null:s.form.controls.name.errors.maxlength)}}function m(i,u){1&i&&(e.j41(0,"div"),e.EFF(1," Este campo es requerido "),e.k0s())}function x(i,u){1&i&&(e.j41(0,"div"),e.EFF(1," No puede exceder 30 caracteres "),e.k0s())}function g(i,u){if(1&i&&(e.j41(0,"div",25),e.DNE(1,m,2,0,"div",13)(2,x,2,0,"div",13),e.k0s()),2&i){const s=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==s.form.controls.father_Last_Name.errors?null:s.form.controls.father_Last_Name.errors.required),e.R7$(),e.Y8G("ngIf",null==s.form.controls.father_Last_Name.errors?null:s.form.controls.father_Last_Name.errors.maxlength)}}function z(i,u){1&i&&(e.j41(0,"div"),e.EFF(1," Este campo es requerido "),e.k0s())}function X(i,u){1&i&&(e.j41(0,"div"),e.EFF(1," No puede exceder 30 caracteres "),e.k0s())}function J(i,u){if(1&i&&(e.j41(0,"div",25),e.DNE(1,z,2,0,"div",13)(2,X,2,0,"div",13),e.k0s()),2&i){const s=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==s.form.controls.mother_Last_Name.errors?null:s.form.controls.mother_Last_Name.errors.required),e.R7$(),e.Y8G("ngIf",null==s.form.controls.mother_Last_Name.errors?null:s.form.controls.mother_Last_Name.errors.maxlength)}}function W(i,u){if(1&i){const s=e.RV6();e.j41(0,"div")(1,"app-custom-input",26),e.bIt("ionInput",function(t){e.eBV(s);const r=e.XpG();return e.Njj(r.onLastNameInput(t,"father_Last_Name"))})("keydown",function(t){e.eBV(s);const r=e.XpG();return e.Njj(r.preventExtraInput(t,30))}),e.k0s(),e.DNE(2,g,3,2,"div",12),e.j41(3,"app-custom-input",27),e.bIt("ionInput",function(t){e.eBV(s);const r=e.XpG();return e.Njj(r.onLastNameInput(t,"mother_Last_Name"))})("keydown",function(t){e.eBV(s);const r=e.XpG();return e.Njj(r.preventExtraInput(t,30))}),e.k0s(),e.DNE(4,J,3,2,"div",12),e.k0s()}if(2&i){const s=e.XpG();e.R7$(),e.Y8G("control",s.form.controls.father_Last_Name),e.R7$(),e.Y8G("ngIf",s.form.controls.father_Last_Name.errors&&s.form.controls.father_Last_Name.dirty),e.R7$(),e.Y8G("control",s.form.controls.mother_Last_Name),e.R7$(),e.Y8G("ngIf",s.form.controls.mother_Last_Name.errors&&s.form.controls.mother_Last_Name.dirty)}}function q(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"El correo es requerido"),e.k0s())}function Z(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"Ingrese un correo valido"),e.k0s())}function K(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"El correo no puede exceder 30 caracteres"),e.k0s())}function Q(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"Este correo electr\xf3nico no existe"),e.k0s())}function ee(i,u){if(1&i&&(e.j41(0,"div",25),e.DNE(1,q,2,0,"div",13)(2,Z,2,0,"div",13)(3,K,2,0,"div",13)(4,Q,2,0,"div",13),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.Y8G("ngIf",null==s.form.controls.email.errors?null:s.form.controls.email.errors.required),e.R7$(),e.Y8G("ngIf",null==s.form.controls.email.errors?null:s.form.controls.email.errors.email),e.R7$(),e.Y8G("ngIf",null==s.form.controls.email.errors?null:s.form.controls.email.errors.maxlength),e.R7$(),e.Y8G("ngIf",null==s.form.controls.email.errors?null:s.form.controls.email.errors.emailNotExists)}}function te(i,u){if(1&i&&(e.j41(0,"div",28)(1,"span",29),e.EFF(2),e.k0s()()),2&i){const s=e.XpG();e.R7$(),e.Y8G("ngClass",e.ziG(2,A,"D\xe9bil"===s.passwordStrength,"Media"===s.passwordStrength,"Aceptable"===s.passwordStrength,"Fuerte"===s.passwordStrength)),e.R7$(),e.SpI(" Seguridad: ",s.passwordStrength," ")}}function oe(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"La contrase\xf1a es requerida"),e.k0s())}function ne(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"La contrase\xf1a debe tener por lo menos 6 caracteres"),e.k0s())}function re(i,u){1&i&&(e.j41(0,"div"),e.EFF(1,"La contrase\xf1a no puede exceder 30 caracteres"),e.k0s())}function ie(i,u){if(1&i&&(e.j41(0,"div",25),e.DNE(1,oe,2,0,"div",13)(2,ne,2,0,"div",13)(3,re,2,0,"div",13),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.Y8G("ngIf",null==s.form.controls.password.errors?null:s.form.controls.password.errors.required),e.R7$(),e.Y8G("ngIf",null==s.form.controls.password.errors?null:s.form.controls.password.errors.minLength),e.R7$(),e.Y8G("ngIf",null==s.form.controls.password.errors?null:s.form.controls.password.errors.maxlength)}}const se=[{path:"",component:(()=>{var i;class u{constructor(o){this.navCtrl=o,this.firebaseSvc=(0,e.WQX)(N.f),this.utilsSvc=(0,e.WQX)(U.T),this.emailSvc=(0,e.WQX)(R._),this.http=(0,e.WQX)(j.Qq),this.consultory=[],this.isTaqueriaChecked=!1,this.nameLabel="Nombre",this.passwordStrength="",this.form=new a.gE({uid:new a.MJ(""),email:new a.MJ("",[a.k0.required,a.k0.email,a.k0.maxLength(30)]),password:new a.MJ("",[a.k0.required,a.k0.minLength(6),a.k0.maxLength(30)]),name:new a.MJ(null,[a.k0.required,a.k0.maxLength(30)]),mother_Last_Name:new a.MJ("",[a.k0.maxLength(30)]),father_Last_Name:new a.MJ("",[a.k0.maxLength(30)]),email_verified:new a.MJ(""),password_Change:new a.MJ(""),image:new a.MJ(""),type_profile:new a.MJ,active_user:new a.MJ("1"),isBusiness:new a.MJ(!1),acceptedTerms:new a.MJ(!1,a.k0.requiredTrue),acceptedPrivacy:new a.MJ(!1,a.k0.requiredTrue),acceptedAll:new a.MJ(!1,a.k0.requiredTrue)}),this.form_carrito=new a.gE({total:new a.MJ(0)}),this.form_carrito_eventos=new a.gE({total:new a.MJ(0)}),this.form_carrito_negocio=new a.gE({total:new a.MJ(0)})}ngOnInit(){}preventExtraInput(o,t){if(!o||!o.target)return!0;const r=o.target.value?o.target.value.length:0;return!(!(o.ctrlKey&&o.key&&["a","c","v","x","z"].includes(o.key.toLowerCase()))&&!["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(o.key)&&r>=t&&(o.preventDefault(),1))}onIsBusinessChange(o){this.isTaqueriaChecked=o.detail.checked,this.nameLabel=this.isTaqueriaChecked?"Nombre del negocio":"Nombre"}onNameInput(o){if(!o||!o.target)return;let t=o.target.value||"";t.length>30&&(t=t.substring(0,30),o.target.value=t),t=t.replace(/[^a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]/g,""),t.length>30&&(t=t.substring(0,30)),this.form&&this.form.controls&&this.form.controls.name&&this.form.controls.name.setValue(t),o.target.value=t}onLastNameInput(o,t){if(!o||!o.target||!t)return;let r=o.target.value||"";r.length>30&&(r=r.substring(0,30),o.target.value=r),r=r.replace(/[^a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]/g,""),r.length>30&&(r=r.substring(0,30)),this.form&&this.form.controls&&this.form.controls[t]&&this.form.controls[t].setValue(r),o.target.value=r}onEmailInput(o){var t=this;return(0,h.A)(function*(){if(!o||!o.target)return;let r=o.target.value||"";if(r.length>30)return r=r.substring(0,30),o.target.value=r,void(t.form&&t.form.controls&&t.form.controls.email&&t.form.controls.email.setValue(r));if(r=r.replace(/[^a-zA-Z0-9@._-]/g,""),r.length>30&&(r=r.substring(0,30)),t.form&&t.form.controls&&t.form.controls.email&&t.form.controls.email.setValue(r),o.target.value=r,r.includes("@")&&r.includes(".")&&r.length>5)try{yield t.verifyEmailExists(r)}catch(l){console.error("Error verifying email:",l)}})()}validatePassword(o){if(!o)return"D\xe9bil";const l=/[A-Z]/.test(o),y=/[a-z]/.test(o),b=/\d/.test(o),v=/[!@#$%^&*\-_\+=\?]/.test(o),S=[/miempresa/i,/tortilleria/i,/platajaimes/i,/password/i,/contrase\xf1a/i,/123456/,/qwerty/,/asdf/,/letras/,/numeros/,/admin/i,/\d{8,}/,/(.)\1{3,}/,/[A-Za-z]+202[0-9]/,/[A-Za-z]+123/,/firulais/i,/maria/i,/omar/i,/leo/i,/futbol/i,/test|fake|dummy|example/i,/16081995/,/ABC1234/,/Futbol#1/,/qwertyui/,/asdf1234/,/asdf/,/qwerty/,/\d{7,}/,/[A-Z]{3,}\d{3,}/,/1234/,/2345/,/3456/,/4567/,/5678/,/6789/,/7890/,/abcd/,/bcde/,/cdef/,/defg/,/efgh/,/fghi/,/ghij/,/Google202\d/,/Omar\d{4}/,/Maria\d{4}/,/Leo202\d/,/Futbol#1/];for(const P of S)if(P.test(o))return"F\xe1cil";return(P=>{for(let d=0;d<P.length-3;d++){const E=P.substring(d,d+4);if(/^\d+$/.test(E)){const f=E.split("").map(Number);if(f[1]===f[0]+1&&f[2]===f[1]+1&&f[3]===f[2]+1)return!0}}for(let d=0;d<P.length-3;d++){const E=P.substring(d,d+4);if(/^[a-zA-Z]+$/.test(E)){const f=E.split("").map(I=>I.charCodeAt(0));if(f[1]===f[0]+1&&f[2]===f[1]+1&&f[3]===f[2]+1)return!0}}return!1})(o)?"F\xe1cil":o.length<12||/^[a-zA-Z]+$/.test(o)||/^\d+$/.test(o)?"D\xe9bil":12===o.length&&l&&y&&b?"Media":o.length>12&&l&&y&&b&&!v?"Aceptable":o.length>=14&&l&&y&&b&&v?"Fuerte":"Media"}onPasswordInput(o){if(!o||!o.target)return;let t=o.target.value||"";t.length>30&&(t=t.substring(0,30),o.target.value=t),t=t.replace(/\s/g,""),t.length>30&&(t=t.substring(0,30)),this.form&&this.form.controls&&this.form.controls.password&&this.form.controls.password.setValue(t),o.target.value=t,this.passwordStrength=this.validatePassword(t)}verifyEmailExists(o){var t=this;return(0,h.A)(function*(){try{if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o))return!1;const y=`https://api.hunter.io/v2/email-verifier?email=${o}&api_key=your-api-key`,v=yield t.http.get(y).toPromise();if(v.data&&v.data.result){const S="deliverable"===v.data.result;if(S){const C=t.form.controls.email.errors;C&&C.emailNotExists&&(delete C.emailNotExists,t.form.controls.email.setErrors(Object.keys(C).length?C:null))}else t.form.controls.email.setErrors({emailNotExists:!0});return S}return!1}catch(r){return console.error("Error verifying email:",r),yield t.validateEmailWithSimpleAPI(o)}})()}validateEmailWithSimpleAPI(o){var t=this;return(0,h.A)(function*(){try{var r;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o))return t.form.controls.email.setErrors({emailNotExists:!0}),!1;const y=["gmail.com","yahoo.com","hotmail.com","outlook.com","live.com","icloud.com","protonmail.com","aol.com"],b=null===(r=o.split("@")[1])||void 0===r?void 0:r.toLowerCase();if(!y.includes(b))return t.form.controls.email.setErrors({emailNotExists:!0}),!1;const v=o.split("@")[0];if(v.length<3||v.length>25)return t.form.controls.email.setErrors({emailNotExists:!0}),!1;const S=[/^[a-z]{8,}$/i,/^[0-9]{4,}$/,/^(.)\1{3,}/,/test|fake|dummy|example/i];for(const P of S)if(P.test(v))return t.form.controls.email.setErrors({emailNotExists:!0}),!1;const C=t.form.controls.email.errors;return C&&C.emailNotExists&&(delete C.emailNotExists,t.form.controls.email.setErrors(Object.keys(C).length?C:null)),!0}catch(l){return console.error("Error in simple email validation:",l),!1}})()}checkEmailExists(o){var t=this;return(0,h.A)(function*(){try{return yield t.firebaseSvc.checkEmailExists(o)}catch(r){return console.error("Error checking email:",r),!1}})()}validateEmailWithAPI(o){var t=this;return(0,h.A)(function*(){return yield t.verifyEmailExists(o)})()}encryptPassword(o){const r=w.lib.WordArray.random(16),l=w.PBKDF2("MiTortilleria2024#SecureKey!@#$",r,{keySize:8,iterations:1e3}),y=w.AES.encrypt(o,l.toString()).toString();return r.toString()+":"+y}submit(){var o=this;return(0,h.A)(function*(){if(o.form.valid){if("F\xe1cil"===o.validatePassword(o.form.value.password))return void o.utilsSvc.presentToast({message:"\u26a0\ufe0f Advertencia: La contrase\xf1a es f\xe1cil de adivinar. Evita datos obvios, secuencias o palabras comunes.",duration:4e3,color:"danger",icon:"alert-circle-outline"});const y=yield o.utilsSvc.loading();yield y.present();try{const b=o.form.value.email;if(!(yield o.validateEmailWithAPI(b)))throw new Error("El correo electr\xf3nico no es v\xe1lido o no existe");if(yield o.checkEmailExists(b))throw new Error("Este correo electr\xf3nico ya est\xe1 registrado. Por favor, usa otro correo");const P=o.encryptPassword(o.form.value.password),d=yield o.firebaseSvc.signUp(o.form.value);yield o.firebaseSvc.updateUser(o.form.value.name);let E=d.user.uid;o.form.controls.uid.setValue(E),o.form.controls.email_verified.setValue("1"),o.form.controls.password_Change.setValue(P),o.form.controls.type_profile.setValue(3),yield o.sendWelcomeEmail(),yield o.setUserInfo(E),yield o.initializeUserData(E),o.utilsSvc.presentToast({message:`\xa1Bienvenido ${o.form.value.name}! Revisa tu correo`,duration:2500,color:"success",icon:"person-outline"}),o.navCtrl.navigateForward("/main/productos")}catch(b){let v="Error en el registro";b.message?v=b.message:"auth/email-already-in-use"===b.code?v="Este correo electr\xf3nico ya est\xe1 registrado":"auth/weak-password"===b.code?v="La contrase\xf1a es muy d\xe9bil":"auth/invalid-email"===b.code&&(v="El formato del correo electr\xf3nico no es v\xe1lido"),o.utilsSvc.presentToast({message:v,duration:3e3,color:"danger",icon:"alert-circle-outline"})}finally{y.dismiss()}}else{var t;null!==(t=o.form.controls.email.errors)&&void 0!==t&&t.emailNotExists&&o.utilsSvc.presentToast({message:"Por favor, ingresa un correo electr\xf3nico v\xe1lido y existente",duration:3e3,color:"warning",icon:"mail-outline"})}})()}sendWelcomeEmail(){var o=this;return(0,h.A)(function*(){try{const t={customerName:o.form.controls.name.value,customerEmail:o.form.controls.email.value,registrationDate:new Date,isBusiness:o.form.controls.isBusiness.value};console.log("Enviando email de bienvenida:",t),yield o.emailSvc.sendWelcomeEmail(t)}catch(t){console.error("Error sending welcome email:",t)}})()}initializeUserData(o){var t=this;return(0,h.A)(function*(){if(o)try{let l=t.firebaseSvc.obtenerColeccion(`users/${o}/terms`).subscribe({next:d=>{t.utilsSvc.saveInLocalStorage("terms",d),l.unsubscribe()},error:d=>{console.error("Error getting terms:",d),l.unsubscribe()}}),b=t.firebaseSvc.getCollectionData(`users/${o}/Address`,[]).subscribe({next:d=>{t.direccion=d,t.utilsSvc.setElementInLocalstorage("direccion",t.direccion),b.unsubscribe()},error:d=>{console.error("Error getting address:",d),b.unsubscribe()}}),v=`users/${o}/carrito`;yield t.firebaseSvc.addDocument(v,t.form_carrito.value);let S=t.firebaseSvc.getCollectionData(v,[]).subscribe({next:d=>{if(t.carrito=d,t.carrito&&t.carrito.length>0&&t.carrito[0].id){let f=t.firebaseSvc.obtenerColeccion(`users/${o}/carrito/${t.carrito[0].id}/detalle_carrito`).subscribe({next:I=>{t.carrito[0].detalle_carrito=I,t.utilsSvc.setElementInLocalstorage("carrito",t.carrito),f.unsubscribe()},error:I=>{console.error("Error getting carrito details:",I),f.unsubscribe()}})}S.unsubscribe()},error:d=>{console.error("Error getting carrito:",d),S.unsubscribe()}}),C=`users/${o}/carrito_eventos`;yield t.firebaseSvc.addDocument(C,t.form_carrito_eventos.value);let P=t.firebaseSvc.getCollectionData(C,[]).subscribe({next:d=>{if(t.carrito_eventos=d,t.carrito_eventos&&t.carrito_eventos.length>0&&t.carrito_eventos[0].id){let f=t.firebaseSvc.obtenerColeccion(`users/${o}/carrito_eventos/${t.carrito_eventos[0].id}/detalle_carrito`).subscribe({next:I=>{t.carrito_eventos[0].detalle_carrito=I,t.utilsSvc.setElementInLocalstorage("carrito_eventos",t.carrito_eventos),f.unsubscribe()},error:I=>{console.error("Error getting carrito eventos details:",I),f.unsubscribe()}})}P.unsubscribe()},error:d=>{console.error("Error getting carrito eventos:",d),P.unsubscribe()}});if(t.form.value.isBusiness){let d=`users/${o}/carrito_negocio`;yield t.firebaseSvc.addDocument(d,t.form_carrito_negocio.value);let E=t.firebaseSvc.getCollectionData(d,[]).subscribe({next:f=>{if(t.carrito_negocio=f,t.carrito_negocio&&t.carrito_negocio.length>0&&t.carrito_negocio[0].id){let V=t.firebaseSvc.obtenerColeccion(`users/${o}/carrito_negocio/${t.carrito_negocio[0].id}/detalle_carrito`).subscribe({next:B=>{t.carrito_negocio[0].detalle_carrito=B,t.utilsSvc.setElementInLocalstorage("carrito_negocio",t.carrito_negocio),V.unsubscribe()},error:B=>{console.error("Error getting carrito negocio details:",B),V.unsubscribe()}})}E.unsubscribe()},error:f=>{console.error("Error getting carrito negocio:",f),E.unsubscribe()}})}}catch(r){console.error("Error initializing user data:",r)}else console.error("UID is required for initializing user data")})()}setUserInfo(o){var t=this;return(0,h.A)(function*(){if(o){if(t.form&&t.form.valid)try{let r=`users/${o}`,l={...t.form.value};delete l.password,yield t.firebaseSvc.setDocument(r,l),t.utilsSvc.saveInLocalStorage("user",l),t.form.reset()}catch(r){console.error("Error setting user info:",r)}}else console.error("UID is required for setting user info")})()}onTermsChange(){this.form.controls.acceptedAll.value?(this.form.controls.acceptedTerms.setValue(!0),this.form.controls.acceptedPrivacy.setValue(!0)):(!this.form.controls.acceptedTerms.value||!this.form.controls.acceptedPrivacy.value)&&this.form.controls.acceptedAll.setValue(!1)}openTerms(){var o=this;return(0,h.A)(function*(){yield o.utilsSvc.presentModal({component:D,cssClass:"app-terms",componentProps:{}})})()}openPrivacy(){this.navCtrl.navigateForward("/privacidad")}}return(i=u).\u0275fac=function(o){return new(o||i)(e.rXU(M.q9))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-sign-up"]],decls:47,vars:12,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],["defaultHref","/inicio","routerLink","/inicio","routerDirection","root"],[2,"display","inline-flex"],["src","../../../../assets/img/Logo.png","alt","",2,"width","85px","margin-top","10px","margin-bottom","10px","margin-left","10px","border-radius","50%"],[1,"admin"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["slot","start",2,"white-space","nowrap"],["slot","end","mode","ios","formControlName","isBusiness",3,"ngModelChange","ionChange","ngModel"],["autocomplete","name","icon","person-circle-outline","type","text","maxlength","30",3,"ionInput","keydown","control","label"],["class","validators",4,"ngIf"],[4,"ngIf"],["autocomplete","email","icon","mail-outline","type","email","label","Correo","maxlength","30",3,"ionInput","keydown","control"],["icon","lock-closed-outline","type","password","label","Contrase\xf1a","maxlength","30",3,"ionInput","keydown","control"],["class","password-strength-indicator",4,"ngIf"],[1,"terms-checkboxes",2,"margin-top","20px"],["lines","none"],["slot","start","formControlName","acceptedTerms",3,"ionChange"],[2,"color","#3880ff","text-decoration","underline",3,"click"],["slot","start","formControlName","acceptedPrivacy",3,"ionChange"],["slot","start","formControlName","acceptedAll",3,"ionChange"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","person-add-outline"],[1,"validators"],["autocomplete","family-name","icon","person-circle-outline","type","text","label","Apellido Paterno","maxlength","30",3,"ionInput","keydown","control"],["autocomplete","family-name","icon","person-circle-outline","type","text","label","Apellido Materno","maxlength","30",3,"ionInput","keydown","control"],[1,"password-strength-indicator"],[3,"ngClass"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"div",4),e.nrm(5,"img",5),e.j41(6,"ion-title")(7,"strong"),e.EFF(8,"Registrar"),e.k0s(),e.j41(9,"div",6),e.EFF(10,"Tortilleria Plata Jaimes"),e.k0s()()()()(),e.j41(11,"ion-content")(12,"div",7)(13,"form",8),e.bIt("ngSubmit",function(){return t.submit()})("keypress.enter",function(){return t.submit()}),e.nrm(14,"app-logo"),e.j41(15,"ion-item")(16,"ion-label",9),e.EFF(17,"\xbfEs una taquer\xeda o negocio?"),e.k0s(),e.j41(18,"ion-checkbox",10),e.mxI("ngModelChange",function(l){return e.DH7(t.isTaqueriaChecked,l)||(t.isTaqueriaChecked=l),l}),e.bIt("ionChange",function(l){return t.onIsBusinessChange(l)}),e.k0s()(),e.j41(19,"app-custom-input",11),e.bIt("ionInput",function(l){return t.onNameInput(l)})("keydown",function(l){return t.preventExtraInput(l,30)}),e.k0s(),e.DNE(20,k,4,3,"div",12)(21,W,5,4,"div",13),e.j41(22,"app-custom-input",14),e.bIt("ionInput",function(l){return t.onEmailInput(l)})("keydown",function(l){return t.preventExtraInput(l,30)}),e.k0s(),e.DNE(23,ee,5,4,"div",12),e.j41(24,"app-custom-input",15),e.bIt("ionInput",function(l){return t.onPasswordInput(l)})("keydown",function(l){return t.preventExtraInput(l,30)}),e.k0s(),e.DNE(25,te,3,7,"div",16)(26,ie,4,3,"div",12),e.j41(27,"div",17)(28,"ion-item",18)(29,"ion-checkbox",19),e.bIt("ionChange",function(){return t.onTermsChange()}),e.k0s(),e.j41(30,"ion-label"),e.EFF(31," He le\xeddo y acepto los "),e.j41(32,"a",20),e.bIt("click",function(){return t.openTerms()}),e.EFF(33,"T\xe9rminos y condiciones"),e.k0s()()(),e.j41(34,"ion-item",18)(35,"ion-checkbox",21),e.bIt("ionChange",function(){return t.onTermsChange()}),e.k0s(),e.j41(36,"ion-label"),e.EFF(37," He le\xeddo y acepto la "),e.j41(38,"a",20),e.bIt("click",function(){return t.openPrivacy()}),e.EFF(39,"Pol\xedtica de privacidad"),e.k0s()()(),e.j41(40,"ion-item",18)(41,"ion-checkbox",22),e.bIt("ionChange",function(){return t.onTermsChange()}),e.k0s(),e.j41(42,"ion-label"),e.EFF(43," He le\xeddo y acepto todo lo anterior "),e.k0s()()(),e.j41(44,"ion-button",23),e.EFF(45," Registrar "),e.nrm(46,"ion-icon",24),e.k0s()()()()),2&o&&(e.R7$(13),e.Y8G("formGroup",t.form),e.R7$(5),e.R50("ngModel",t.isTaqueriaChecked),e.R7$(),e.Y8G("control",t.form.controls.name)("label",t.nameLabel),e.R7$(),e.Y8G("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),e.R7$(),e.Y8G("ngIf",!t.isTaqueriaChecked),e.R7$(),e.Y8G("control",t.form.controls.email),e.R7$(),e.Y8G("ngIf",t.form.controls.email.errors&&t.form.controls.email.touched),e.R7$(),e.Y8G("control",t.form.controls.password),e.R7$(),e.Y8G("ngIf",t.form.controls.password.value),e.R7$(),e.Y8G("ngIf",t.form.controls.password.errors&&t.form.controls.password.touched),e.R7$(18),e.Y8G("disabled",t.form.invalid))},dependencies:[n.YU,n.bT,a.qT,a.BC,a.cb,_.Jm,_.QW,_.eY,_.W9,_.eU,_.iq,_.uz,_.he,_.BC,_.ai,_.hB,_.el,_.N7,T.Wk,L.H,$.Z,a.j4,a.JD],styles:["h1[_ngcontent-%COMP%]{color:#fff}.password-strength-indicator[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.password-strength-indicator[_ngcontent-%COMP%]   .weak[_ngcontent-%COMP%]{color:#e74c3c}.password-strength-indicator[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{color:#f39c12}.password-strength-indicator[_ngcontent-%COMP%]   .acceptable[_ngcontent-%COMP%]{color:#3498db}.password-strength-indicator[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%]{color:#27ae60}.terms-checkboxes[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}"]}),u})()}];let ae=(()=>{var i;class u{}return(i=u).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[T.iI.forChild(se),T.iI]}),u})();var ce=p(7383);let le=(()=>{var i;class u{}return(i=u).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[n.MD,a.YN,_.bv,ae,ce.G]}),u})()},8461:(H,F,p)=>{p.d(F,{l:()=>O});var n=p(4438),a=p(2723),_=p(8265),T=p(177),h=p(5933);function e(c,k){if(1&c&&n.nrm(0,"ion-back-button",10),2&c){const m=n.XpG();n.Y8G("defaultHref",m.backButton)}}function w(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-button",11),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.dismissModal())}),n.nrm(1,"ion-icon",12),n.k0s()}}function j(c,k){1&c&&n.nrm(0,"ion-menu-button",13)}function N(c,k){1&c&&n.nrm(0,"img",14)}function U(c,k){1&c&&(n.j41(0,"div",15),n.EFF(1,"Tortilleria Plata Jaimes"),n.k0s())}function R(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-buttons",16)(1,"ion-button",11),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.signin())}),n.EFF(2," Iniciar Sesi\xf3n "),n.k0s()()}}function M(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-buttons",16)(1,"ion-button",11),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.signup())}),n.EFF(2," Registrate "),n.k0s()()}}function G(c,k){if(1&c&&(n.j41(0,"div",20),n.EFF(1),n.k0s()),2&c){const m=n.XpG(2);n.R7$(),n.JRh(m.cartCount)}}function D(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-buttons",16)(1,"ion-button",17),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.cart())}),n.nrm(2,"ion-icon",18),n.DNE(3,G,2,1,"div",19),n.k0s()()}if(2&c){const m=n.XpG();n.R7$(3),n.Y8G("ngIf",m.cartCount>=0)}}function L(c,k){if(1&c&&(n.j41(0,"div",20),n.EFF(1),n.k0s()),2&c){const m=n.XpG(2);n.R7$(),n.JRh(m.cartCount)}}function $(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-buttons",16)(1,"ion-button",17),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.cartEvents())}),n.nrm(2,"ion-icon",18),n.DNE(3,L,2,1,"div",19),n.k0s()()}if(2&c){const m=n.XpG();n.R7$(3),n.Y8G("ngIf",m.cartCount>=0)}}function A(c,k){if(1&c&&(n.j41(0,"div",20),n.EFF(1),n.k0s()),2&c){const m=n.XpG(2);n.R7$(),n.JRh(m.cartCount)}}function Y(c,k){if(1&c){const m=n.RV6();n.j41(0,"ion-buttons",16)(1,"ion-button",17),n.bIt("click",function(){n.eBV(m);const g=n.XpG();return n.Njj(g.cartNegocio())}),n.nrm(2,"ion-icon",18),n.DNE(3,A,2,1,"div",19),n.k0s()()}if(2&c){const m=n.XpG();n.R7$(3),n.Y8G("ngIf",m.cartCount>=0)}}let O=(()=>{var c;class k{constructor(x){this.router=x,this.showLogo=!0,this.showNombre=!0,this.backButtonShow=!1,this.cartCount=0,this.utilsSvc=(0,n.WQX)(a.T),this.backButton="/inicio"}ngOnInit(){}dismissModal(){this.utilsSvc.dismissModal()}signin(){window.location.href="/#/auth"}signup(){this.router.navigate(["/auth/sign-up"])}cart(){this.utilsSvc.routerLink("/main/carrito")}cartEvents(){this.utilsSvc.routerLink("/main/carrito-eventos")}cartNegocio(){this.utilsSvc.routerLink("/main/carrito-negocio")}}return(c=k).\u0275fac=function(x){return new(x||c)(n.rXU(_.Ix))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-header"]],inputs:{title:"title",backButton:"backButton",isModal:"isModal",showMenu:"showMenu",buttonsMenu:"buttonsMenu",buttonCart:"buttonCart",buttonCartEvents:"buttonCartEvents",buttonCartNegocio:"buttonCartNegocio",showLogo:"showLogo",showNombre:"showNombre",backButtonShow:"backButtonShow",cartCount:"cartCount"},decls:17,vars:11,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],[3,"defaultHref",4,"ngIf"],[3,"click",4,"ngIf"],["menu","menu-content",4,"ngIf"],[2,"display","inline-flex"],["style","width: 85px; margin-top: 10px; margin-bottom: 10px; margin-left: 10px; border-radius: 50%;","src","../../../../assets/img/Logo.png","alt","",4,"ngIf"],["class","admin",4,"ngIf"],["slot","end",4,"ngIf"],[3,"defaultHref"],[3,"click"],["name","close-circle-outline"],["menu","menu-content"],["src","../../../../assets/img/Logo.png","alt","",2,"width","85px","margin-top","10px","margin-bottom","10px","margin-left","10px","border-radius","50%"],[1,"admin"],["slot","end"],[1,"cart-button",3,"click"],["name","cart-outline",1,"icones",2,"font-size","30px"],["class","cart-badge",4,"ngIf"],[1,"cart-badge"]],template:function(x,g){1&x&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),n.DNE(3,e,1,1,"ion-back-button",3)(4,w,2,0,"ion-button",4)(5,j,1,0,"ion-menu-button",5),n.k0s(),n.j41(6,"div",6),n.DNE(7,N,1,0,"img",7),n.j41(8,"ion-title")(9,"strong"),n.EFF(10),n.k0s(),n.DNE(11,U,2,0,"div",8),n.k0s()(),n.DNE(12,R,3,0,"ion-buttons",9)(13,M,3,0,"ion-buttons",9)(14,D,4,1,"ion-buttons",9)(15,$,4,1,"ion-buttons",9)(16,Y,4,1,"ion-buttons",9),n.k0s()()),2&x&&(n.R7$(3),n.Y8G("ngIf",g.backButtonShow),n.R7$(),n.Y8G("ngIf",g.isModal),n.R7$(),n.Y8G("ngIf",g.showMenu),n.R7$(2),n.Y8G("ngIf",g.showLogo),n.R7$(3),n.JRh(g.title),n.R7$(),n.Y8G("ngIf",g.showNombre),n.R7$(),n.Y8G("ngIf",g.buttonsMenu),n.R7$(),n.Y8G("ngIf",g.buttonsMenu),n.R7$(),n.Y8G("ngIf",g.buttonCart),n.R7$(),n.Y8G("ngIf",g.buttonCartEvents),n.R7$(),n.Y8G("ngIf",g.buttonCartNegocio))},dependencies:[T.bT,h.Jm,h.QW,h.eU,h.iq,h.MC,h.BC,h.ai,h.el],styles:[".admin[_ngcontent-%COMP%]{font-size:13px}.icones[_ngcontent-%COMP%]{font-size:10px}"]}),k})()}}]);