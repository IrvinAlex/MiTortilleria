"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2180],{2180:($,P,i)=>{i.r(P),i.d(P,{ProductosNegocioPageModule:()=>S});var p=i(177),h=i(9417),a=i(5933),b=i(8265),u=i(467),t=i(4438),C=i(2784),M=i(7517),_=i(2723),O=i(4839),w=i(8461);const y=e=>[e,"MXN","symbol-narrow","1.2-2","en-US"];function v(e,c){1&e&&(t.j41(0,"div",6)(1,"ion-item"),t.nrm(2,"ion-icon",7),t.j41(3,"ion-label")(4,"h2"),t.EFF(5,"No se encontraron productos"),t.k0s(),t.j41(6,"p"),t.EFF(7,"Intenta con otro t\xe9rmino de b\xfasqueda"),t.k0s()()()())}function k(e,c){if(1&e){const r=t.RV6();t.j41(0,"ion-card",8)(1,"div",9),t.nrm(2,"img",10),t.k0s(),t.j41(3,"ion-card-header")(4,"ion-card-title"),t.EFF(5),t.k0s()(),t.j41(6,"ion-card-content",11),t.EFF(7),t.j41(8,"div",12)(9,"strong"),t.EFF(10),t.nI1(11,"currency"),t.k0s()(),t.j41(12,"ion-button",13),t.bIt("click",function(){const o=t.eBV(r).$implicit,s=t.XpG();return t.Njj(s.handleProductAction(o))}),t.EFF(13),t.nrm(14,"ion-icon",14),t.k0s()()()}if(2&e){const r=c.$implicit,n=t.XpG();t.R7$(2),t.Y8G("src",r.imagen,t.B4B)("alt",r.nombre),t.R7$(3),t.JRh(r.nombre),t.R7$(2),t.SpI(" ",r.descripcion," "),t.R7$(3),t.SpI("",t.iJd(11,8,t.eq3(14,y,r.precio_mostrador))," MXN"),t.R7$(2),t.Y8G("color",n.isProductInCart(r)?"success":"primary"),t.R7$(),t.SpI(" ",n.getButtonText(r)," "),t.R7$(),t.Y8G("name",n.getButtonIcon(r))}}const N=[{path:"",component:(()=>{var e;class c{constructor(){this.utilsSvc=(0,t.WQX)(_.T),this.firebaseSvc=(0,t.WQX)(M.f),this.productos=[],this.rango_productos=[],this.allProductos=[],this.searchTerm="",this.alertButtons=[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Iniciar sesi\xf3n",role:"confirm",handler:()=>{this.utilsSvc.routerLink("auth")}}]}ngOnInit(){this.getProductos()}carrito(){return this.utilsSvc.getFromLocalStorage("carrito_negocio")}getCartCount(){const n=this.carrito();return n&&n[0]&&Array.isArray(n[0].detalle_carrito)?n[0].detalle_carrito.length:0}isProductInCart(n){const o=this.carrito();return!!(o&&o[0]&&o[0].total>0&&Array.isArray(o[0].detalle_carrito))&&o[0].detalle_carrito.some(s=>s.uid_producto===n.id)}getButtonText(n){return this.isProductInCart(n)?"Ver en carrito":"Agregar al carrito"}getButtonIcon(n){return this.isProductInCart(n)?"eye-outline":"cart-outline"}handleProductAction(n){var o=this;return(0,u.A)(function*(){o.isProductInCart(n)?o.utilsSvc.routerLink("/main/carrito-negocio"):yield o.modalCarrito(n)})()}modalCarrito(n){var o=this;return(0,u.A)(function*(){try{if(!(yield o.firebaseSvc.isWithinOperatingHours())){const g=yield o.firebaseSvc.getDocument("horario/waeYL5UAeC3YyZ8BW3KT");if(!g||!g.hora_entrada||!g.hora_salida)throw new Error("No se pudo obtener el documento de horario o est\xe1 incompleto.");return void o.utilsSvc.presentToast({message:`No puedes agregar productos fuera del horario de ${g.hora_entrada} a ${g.hora_salida}`,duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"})}(yield o.utilsSvc.presentModal({component:O._,cssClass:"add-product-negocio",componentProps:{producto:n}}))&&(o.utilsSvc.presentToast({message:"Producto agregado al carrito exitosamente",duration:2e3,color:"success",position:"bottom",icon:"checkmark-circle-outline"}),setTimeout(()=>{o.showGoToCartOption()},500))}catch(s){console.error("Error checking operating hours:",s),o.utilsSvc.presentToast({message:"Error al verificar el horario de operaci\xf3n.",duration:2500,color:"danger",position:"bottom",icon:"alert-circle-outline"})}})()}showGoToCartOption(){return(0,u.A)(function*(){})()}getProductos(){var n=this;return(0,u.A)(function*(){const o=yield n.utilsSvc.loading();yield o.present();let l=n.firebaseSvc.getCollectionData("rango_productos",[(0,C._M)("tipo","==","Taqueria")]).subscribe({next:g=>{n.rango_productos=g,n.utilsSvc.setElementInLocalstorage("rango_productos",g),l.unsubscribe()}});setTimeout(()=>{let I=n.firebaseSvc.getCollectionData("productos",[]).subscribe({next:j=>{const z=j.filter(m=>"Masa"===m.nombre||"Tortillas"===m.nombre);n.productos=z,n.allProductos=[...n.productos],n.productos.forEach(function(){var m=(0,u.A)(function*(d){const x=n.rango_productos.find(f=>f.producto===d.nombre);x&&(d.minimo=Number(x.min_producto),d.maximo=Number(x.max_producto));const F=`productos/${d.id}/opciones`;try{let f=n.firebaseSvc.getCollectionData(F,[]).subscribe({next:G=>{d.opciones=G,f.unsubscribe()}})}catch{}});return function(d){return m.apply(this,arguments)}}()),o.dismiss(),I.unsubscribe()}})},1e3)})()}filterProductos(){const n=this.searchTerm.toLowerCase().trim();this.productos=n&&this.allProductos.length>0?this.allProductos.filter(o=>o.nombre&&o.nombre.toLowerCase().includes(n)||o.descripcion&&o.descripcion.toLowerCase().includes(n)):[...this.allProductos]}clearSearch(){this.searchTerm="",this.filterProductos()}}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-productos-negocio"]],decls:6,vars:6,consts:[["title","Negocio","buttonCartNegocio","true",3,"showMenu","cartCount"],[3,"fullscreen"],["mode","ios","animated","true","placeholder","Buscar producto por nombre o descripci\xf3n...","showClearButton","focus",3,"ngModelChange","ionInput","ionClear","ngModel"],["class","no-results",4,"ngIf"],[1,"card-container"],["class","target",4,"ngFor","ngForOf"],[1,"no-results"],["name","search-outline","slot","start"],[1,"target"],[1,"contimg"],[3,"src","alt"],[1,"text"],[1,"precio"],["expand","block",1,"btntarget",3,"click","color"],[3,"name"]],template:function(n,o){1&n&&(t.nrm(0,"app-header",0),t.j41(1,"ion-content",1)(2,"ion-searchbar",2),t.mxI("ngModelChange",function(l){return t.DH7(o.searchTerm,l)||(o.searchTerm=l),l}),t.bIt("ionInput",function(){return o.filterProductos()})("ionClear",function(){return o.filterProductos()}),t.k0s(),t.DNE(3,v,8,0,"div",3),t.j41(4,"div",4),t.DNE(5,k,15,16,"ion-card",5),t.k0s()()),2&n&&(t.Y8G("showMenu",!0)("cartCount",o.getCartCount()),t.R7$(),t.Y8G("fullscreen",!0),t.R7$(),t.R50("ngModel",o.searchTerm),t.R7$(),t.Y8G("ngIf",0===o.productos.length&&o.searchTerm.length>0),t.R7$(2),t.Y8G("ngForOf",o.productos))},dependencies:[p.Sq,p.bT,h.BC,h.vS,a.Jm,a.b_,a.I9,a.ME,a.tN,a.W9,a.iq,a.uz,a.he,a.S1,a.Gw,w.l,p.oe],styles:['@charset "UTF-8";.tituloprin1[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-style:normal;line-height:60px;text-align:center;font-weight:900;font-size:45px;color:#00c089;-webkit-background-clip:text}.containerone[_ngcontent-%COMP%]{margin-top:1rem;background:#000;padding:2rem;border-radius:2rem;overflow:hidden;position:relative;box-shadow:10px 14px 20px #101010}.titleOne[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-style:normal;line-height:25px;text-align:center;font-weight:900;font-size:25px}.powered[_ngcontent-%COMP%]{font-size:10px;font-family:Readex Pro,sans-serif;text-align:center}.powered[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1rem}.titleTwo[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-style:normal;line-height:60px;text-align:center;font-weight:900;font-size:45px;background:linear-gradient(to left,#05bff3,#004acd);-webkit-background-clip:text;color:transparent;animation:_ngcontent-%COMP%_animationmain;animation-duration:.8s;animation-timing-function:cubic-bezier(.165,.84,.44,1)}@keyframes _ngcontent-%COMP%_animationmain{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}.titleThree[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-style:normal;line-height:60px;text-align:center;font-weight:900;font-size:45px;background:linear-gradient(#c0bfbf,#fff);-webkit-background-clip:text;color:transparent;animation:_ngcontent-%COMP%_animationmain;animation-duration:.8s;animation-timing-function:cubic-bezier(.25,.46,.45,.94)}.textmain[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;margin-top:1.5rem;font-weight:500;color:#fff;text-align:center}.tarjet2[_ngcontent-%COMP%]{margin-top:1rem;background:#00c089;padding:1rem;border-radius:2rem;overflow:hidden;position:relative;box-shadow:10px 14px 20px #101010}.letrah1[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-style:normal;line-height:60px;text-align:center;font-weight:900;font-size:45px;background:linear-gradient(#c0bfbf,#191818);-webkit-background-clip:text}.textmain2[_ngcontent-%COMP%]{font-size:27px;color:#fff}.icon-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px;margin-right:10px;color:#fff;line-height:2;vertical-align:middle}.ml-2[_ngcontent-%COMP%]{margin-left:3rem;margin-top:1rem}.vi\\f1 etaletra[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin-left:50px}.btnSubscription[_ngcontent-%COMP%]{margin-top:1.5rem;--background: linear-gradient(to right, #05bff3, #004acd);--box-shadow: 3px 3px 3px #6c6a6a}.btnSubscription[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Readex Pro,sans-serif;font-weight:600}.cont-button[_ngcontent-%COMP%]{display:flex;align-items:start;justify-content:center;margin-top:1rem}.imgprinc[_ngcontent-%COMP%]{border-radius:2rem;box-shadow:3px 3px 3px 3px #004acd}.glow[_ngcontent-%COMP%]:before, .glow[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:2rem;left:-2px;top:-2px;background:linear-gradient(-45deg,#0f6,#0ff,#f0f,#f09,#099fff);background-size:400%;height:calc(100% + 5px);width:calc(100% + 5px);z-index:-1;animation:_ngcontent-%COMP%_change 40s linear infinite}@keyframes _ngcontent-%COMP%_change{0%{background-position:0 0}50%{background-position:400% 0}to{background-position:0 0}}.glow[_ngcontent-%COMP%]:after{filter:blur(20px);opacity:1}.menusection[_ngcontent-%COMP%]{background:#eee;margin-top:3rem;text-align:center;margin-bottom:3rem;padding:3rem;font-family:Readex Pro,sans-serif}.menusection[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:900}.menusection[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#004acd}@media (max-width: 576px){.titleThree[_ngcontent-%COMP%], .titleTwo[_ngcontent-%COMP%]{font-size:25px;line-height:35px}}.text[_ngcontent-%COMP%]{text-align:justify;word-wrap:break-word;padding:15px;font-size:14px;line-height:1.5}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;margin-top:2rem;padding:0 10px}.target[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:calc(50% - 10px);max-width:350px;min-width:280px;min-height:450px;margin:10px 0;box-sizing:border-box;background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 6px 12px #00000026;transition:transform .2s,box-shadow .2s}.target[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 16px #0003}.contimg[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:200px;overflow:hidden;background-color:#fff}.contimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px;object-fit:cover;border-radius:8px}ion-card-header[_ngcontent-%COMP%]{padding:16px 16px 8px;text-align:center;min-height:60px;display:flex;align-items:center;justify-content:center}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;color:#2c3e50;margin:0;line-height:1.3}ion-card-content[_ngcontent-%COMP%]{padding:8px 16px 16px;text-align:center;flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}ion-card-content.text[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#34495e;line-height:1.4;margin-bottom:10px;text-align:justify;min-height:120px}.btntarget[_ngcontent-%COMP%]{margin-top:15px;width:100%;--border-radius: 8px;--box-shadow: 0 4px 8px rgba(0, 0, 0, .1);font-weight:600;transition:all .3s ease}.btntarget.button-success[_ngcontent-%COMP%]{--background: #28a745;--background-activated: #218838;--background-hover: #218838}.btntarget[_ngcontent-%COMP%]:hover{transform:translateY(-1px);--box-shadow: 0 6px 12px rgba(0, 0, 0, .15)}.precio[_ngcontent-%COMP%]{font-size:1.6em;font-weight:800;color:#000;margin:15px 0 10px;padding:12px 16px;background-color:transparent;border-radius:0;text-align:center;box-shadow:none;position:relative;overflow:hidden}.precio[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000;text-shadow:none}.no-results[_ngcontent-%COMP%]{margin:20px;text-align:center}.no-results[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #f8f9fa;--border-radius: 12px;--padding-start: 16px;--padding-end: 16px;margin:10px 0}.no-results[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#6c757d;font-size:1.5rem}.no-results[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin:0}.no-results[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:4px 0 0}@media (max-width: 576px){.target[_ngcontent-%COMP%]{width:calc(100% - 20px);min-width:250px;min-height:400px}.contimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}ion-card-header[_ngcontent-%COMP%]{min-height:50px}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2em}ion-card-content.text[_ngcontent-%COMP%]{min-height:100px}.precio[_ngcontent-%COMP%]{font-size:1.3em;padding:10px 14px}}@media (min-width: 992px){.target[_ngcontent-%COMP%]{width:calc(33.333% - 20px)}}ion-icon[_ngcontent-%COMP%]{margin-left:8px}.ion-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:5px}']}),c})()}];let T=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[b.iI.forChild(N),b.iI]}),c})();var R=i(7383);let S=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[p.MD,h.YN,a.bv,T,R.G]}),c})()}}]);