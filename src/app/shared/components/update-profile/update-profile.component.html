<app-header [isModal]="true" [title]="userForm ? 'Actualizar usuario' : 'Agregar usuario'"></app-header>

<ion-content>
  <form [formGroup]="form" class="ion-padding ion-text-center" (ngSubmit)="submit()">

    <ion-avatar>
      <img *ngIf="form.value?.image" [src]="form.value?.image" /> <!-- Imagen del usuario -->
    <ion-icon style="width: 140px !important; height: 140px; margin: 0 auto; opacity: 30%;" *ngIf="!form.value?.image" name="person-circle-outline" class="empty-icon"></ion-icon> 
    </ion-avatar>
    <br>
    <ion-button (click)="takePicture()" size="small" shape="round">
      Tomar/Seleccionar
    </ion-button>
    <br>

    <!-- Nombre -->
    <ion-item>
      <ion-label position="floating">Nombre</ion-label>
      <ion-input formControlName="name" required></ion-input>
    </ion-item>

    <!-- Apellido Materno -->
    <ion-item *ngIf="!isNegocio">
      <ion-label position="floating">Apellido Materno</ion-label>
      <ion-input formControlName="mother_Last_Name" required></ion-input>
    </ion-item>

    <!-- Apellido Paterno -->
    <ion-item *ngIf="!isNegocio">
      <ion-label position="floating">Apellido Paterno</ion-label>
      <ion-input formControlName="father_Last_Name" required></ion-input>
    </ion-item>

    <!-- Correo Electrónico -->
    <ion-item>
      <ion-label position="floating">Correo Electrónico</ion-label>
      <ion-input 
        formControlName="email" 
        type="email" 
        [value]="form.value.email" 
        [disabled]
        required>
      </ion-input>
    </ion-item>

    <!-- Cambiar/Restablecer contraseña -->
    <ion-item lines="none" class="ion-margin-top">
      <ion-label>
        <h2>Cambiar contraseña</h2>
        <p>Se enviará un enlace de restablecimiento al correo registrado.</p>
      </ion-label>
    </ion-item>
    <ion-button mode="ios" fill="outline" color="primary" (click)="resetPassword()">
      Enviar enlace de restablecimiento
      <ion-icon slot="end" name="mail-outline"></ion-icon>
    </ion-button>

    <ion-button class="ion-margin" mode="ios" type="submit" [disabled]="form.invalid">
      Actualizar usuario
      <ion-icon slot="end" name="checkmark-circle-outline"></ion-icon>
    </ion-button>
  </form>
</ion-content>